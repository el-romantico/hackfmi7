(function(q,x,R){q.execute(function(){q.register("postMetric",function(){return{postCountMetric:function(q){if("undefined"!==typeof q){var d=x.ue;if(d){var g=d.count(q)||0;d.count(q,g+1)}}}}});q.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(q,d,g,m){q=q.extend(!0,{},g,m);return new d(q)});q.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(x,d,g){x=g.airyConfig;x.jsUrl&&q.load.js(x.jsUrl);x.cssUrl&&
q.load.css(x.cssUrl)});q.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils").register("ImageBlockController",function(q,d,g,m,b){var a={};return function(c){var e=this;e.dispatch=function(c,e){var g=a[c];b.isDefined(g)&&d.each(g,function(a,b){b.call(x,e)})};e.register=function(c,d){b.isDefined(a[c])||(a[c]=[]);"function"===typeof d&&a[c].push(d)};e.model=new g(c,e);e.view=new m(c,e,e.model);e.init=function(){e.model.init();e.view.init()};e.init()}});q.when("A",
"jQuery","imageBlockUtils").register("ImageBlockModel",function(q,d,g){function m(a,b,c,d,e){g.isDefined(a)&&(h.type=a);g.isDefined(b)&&(h.index=b);g.isDefined(c)&&(h.thumbnailIndex=c);g.isDefined(d)&&(h.variant=d);g.isDefined(e)&&(h.color=e)}function b(a){a=a.data;f=q.copy(h);m(a.type,a.index,a.thumbnailIndex,a.variant,a.color)}function a(a){b(a);a=q.copy(a);a.data=q.copy(h);e.dispatch("updateView",a)}var c,e,h={},f={};return function(d,g){e=g;c=d;e.register("updateSelection",a);e.register("updateModel",
b);this.init=function(){m("image",0,0,"MAIN",c.landingAsinColor||c.defaultColor)};this.getCurrentItem=function(){return q.copy(h)};this.getPreviousItem=function(){return q.copy(f)}}});q.when("ImageBlockBTF").execute(function(L){function d(d,m,b,a,c){function e(a){t.dispatch("updateSelection",a)}function h(a){t.dispatch("imageClick",a)}function f(a){t.dispatch("imageHover",a)}function l(c){!b.isDefined(c)||"swatchClick"!==c.type&&"updatedData"!==c.type?(n.update(c),"swatchHover"!==c.type&&
q.getPreviousItem().thumbnailIndex!==c.data.thumbnailIndex&&a.postCountMetric(c.data.type+"ThumbnailSelected"),d.trigger("image-block-thumbnail-selected",c.data)):n.render(c.data.color,!1,c.onload)}function k(a){t.dispatch("resize",a)}function p(a){var c=y.find("img");b.isDefined(c[a])&&m(c[a]).click()}var n,r,t,q,y;return function(a,b,w){n=this;r=a;t=b;q=w;y=m("#imageBlock #altImages ul");var A=m("#imageBlock .canvas"),I=m("#main-image-container");n.subViews=[];for(b=0;b<c.length;b++)n.subViews.push(new c[b](a,
w,n,t));n.render=function(a,b,c){var d=0;y.find(".item").remove();a=a||q.getCurrentItem().color;m.each(n.subViews,function(e,f){d=f.render(a,d,A,y,I,b,c)||d})};n.init=function(){y=m("#imageBlock #altImages ul");var a=y.find(".a-button-selected").closest(".a-declarative"),b=a.data("action"),a=a.data(b)||{};a.color=r.landingAsinColor||r.defaultColor;t.dispatch("updateModel",{data:a});n.render(a.color,!0);r.isDebug&&x.console&&console.log(r);t.register("updateView",l);t.register("selectThumbnail",p);
d.declarative("thumb-action",["click","mouseenter"],e);d.declarative("main-image-click",["click"],h);d.declarative("main-image-click",["mouseenter","mouseleave"],f);m(x).resize(k)};n.update=function(a){m.each(n.subViews,function(b,c){c.update(a)})}}}L=["A","jQuery","imageBlockUtils","postMetric"].concat(L.views);q.when.apply(q,L).register("ImageBlockView",function(){for(var g=arguments[0],m=arguments[1],b=arguments[2],a=arguments[3],c=[],e=4,h=arguments.length;e<h;e++)c.push(arguments[e]);return d(g,
m,b,a,c)})});q.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockAltImageView",function(q,d,g,m){function b(a,b,c,e){if(!g.isjQueryObjDefined(a.find(".a-button-selected"))){var k=y.getCurrentItem();if(!e||"chromeless-video"!==k.type||!x.autoplayVideo){e=0;"image"===k.type&&(e=h(k.color,k.variant),e=-1!==e?e:0);var l=b+e;l>=c&&(e=0,l=b);b=f(k.color,e);-1!==b&&(u.dispatch("updateModel",{data:{index:e,thumbnailIndex:l,variant:b.variant,type:"image"}}),b=a.find(".item").get(l),
g.selectGivenThumbnail(d(b),a))}}}function a(a,c,e){c=x.colorImages&&x.colorImages[c];var f=a;g.isDefined(c)&&(d.each(c,function(b,c){a<x.maxAlts&&(g.createThumbnail({type:"image",index:b,thumbnailIndex:a,variant:c.variant},c.thumb,B),a++)}),b(B,f,a,e));return a}function c(a,b){var c=d("#image-canvas-caption #canvasCaption"),e,f=x.staticStrings,h=x.colorImages,g=a.color,k=a.index;b&&x.useIV?e=f.clickToExpand:h[g]&&h[g][k].hiRes&&x.useHoverZoom?(e=x.useHoverZoomIpad?f.touchToZoom:x.useClickZoom?f.clickToZoom:
f.rollOverToZoom,x.hoverZoomIndicator&&(e="<img src='"+x.staticImages.hoverZoomIcon+"'/>&nbsp;"+e)):x.useIV&&(e=f.clickToExpand);c.html(e)}function e(){w.find("li").removeClass("selected");d("#image-canvas-caption #canvasCaption").empty();g.hideUnavailable()}function h(a,b){var c=x.colorImages;if(1>c.length||!g.isDefined(c[a])||!g.isDefined(b))return-1;var e=-1;d.each(c[a],function(a,c){c.variant===b&&(e=a)});return e}function f(a,b){var c=x.colorImages;return!(g.isDefined(c)&&g.isDefined(c[a])&&
g.isDefined(c[a][b])&&g.isDefined(c[a][b].main))||1>d.map(c[a][b].main,function(a,b){return b}).length?-1:c[a][b]}function l(a,b){var c;d.each(a.main,function(a,b){g.isDefined(c)||(c=parseFloat(b[1]/b[0])<=parseFloat(x.holderRatio)?"a-stretch-vertical":"a-stretch-horizontal")});var e="a-dynamic-image "+c,f=g.getMaxHeightOfMainImage(a.main,A),h=g.getMaxWidthOfMainImage(a.main,A),k=d("<div></div>"),f=x.naturalMainImageSize?{}:{"max-height":f,"max-width":h};k.addClass(e).css(f).attr({"data-old-hires":a.hiRes,
"data-a-manual-replacement":"true",onload:b}).data("a-dynamic-image",a.main);return k}function k(a){var b=A.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");x.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(x.imgTagWrapperClasses)}function p(a,b){if("image"===a.type||"unavailable"===a.type){var d=f(a.color,a.index);if(-1===d)return u.dispatch("updateModel",{data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}}),g.showUnavailable(a.color),-1;
var e=w.find(".item.itemNo"+a.thumbnailIndex);if(!g.isjQueryObjDefined(e)){var e=a.thumbnailIndex,e=w.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+e+" maintain-height"),h=l(d,b);e.find(".placeHolder").replaceWith(h);w.find(".list").append(e);q.loadImageManually(h)}k(e);u.dispatch("loadMagnifier");c(a);x.useIV&&e.css("cursor","pointer");a.isUserGenerated&&(e=y.getPreviousItem(),h=a.variant,g.isDefined(h)&&e.thumbnailIndex!==a.thumbnailIndex&&
(m.postCountMetric("ImageThumbnailSelectedVariant:"+h),0===h.indexOf("IG")&&(m.postCountMetric("IGImageSelectedVariant:"+h),m.postCountMetric("IGImageSelectedEvent:"+a.interaction))));q.trigger("dp:image-block:update",d)}}function n(){var a=w.find(".item .imgTagWrapper"),b=g.getContainerHeight(A,x.holderRatio,x.holderMaxHeight);0<b&&(A.height(b),a.height(b));w.find("img.a-dynamic-image").each(function(){var a=d(this);a.data("a-manual-replacement")&&q.loadDynamicImage(this);var b=a.data("a-dynamic-image"),
c=g.getMaxHeightOfMainImage(b,A),b=g.getMaxWidthOfMainImage(b,A);x.naturalMainImageSize||a.css({"max-height":c+"px","max-width":b+"px"})})}function r(a){c(y.getCurrentItem(),"mouseenter"===a.type)}var t,x,y,u,B,w,A;return function(b,c,d,m){t=this;x=b;y=c;u=m;x.colorImages[x.landingAsinColor]=x.colorImages[x.defaultColor];t.render=function(b,c,d,f,h,g,k){w=d;B=f;A=h;b=a(c,b,g);e();g||w.find(".list .item").remove();p(y.getCurrentItem(),k);return b};t.update=function(a){e();var b=a.data;if("swatchHover"===
a.type)if(b.color===y.getCurrentItem().color)p(y.getCurrentItem());else{if(!a.captured){var c;c=h(b.color,y.getCurrentItem().variant);c=f(b.color,-1!==c?c:0);if(-1===c)g.showUnavailable(b.color),c=-1;else{var b=w.find(".swatchHoverExp"),d=l(c);b.find(".imgTagWrapper").html(d);q.loadImageManually(d);k(b);q.trigger("dp:image-block:update",c);c=void 0}-1!==c&&(a.captured=!0)}}else"image"===b.type&&(b.interaction=a.type,b.isUserGenerated=!0,p(b),g.selectGivenThumbnail(a.$declarativeParent,B))};u.register("imageHover",
r);u.register("resize",n)}});q.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockMagnifierView",function(q,d,g,m){function b(a){n?a.css("cursor","url('"+f.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function a(a){var b=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(g.isDefined(b))for(var b=b[1].split("_"),c=0;c<b.length;c++){var d=b[c].match(/^([A-Z]+)(\d+(\.\d+)?)$/);g.isDefined(d)&&
(a[d[1]]=parseInt(d[2],10))}return a}function c(c,e){function h(){var a;e.useClickZoom?(a=e.offsetInClickZoom,a=[Math.min(1,Math.max(0,aa[0]-(Q[0]+a))/(Q[2]-2*a)),Math.min(1,Math.max(0,aa[1]-(Q[1]+a))/(Q[3]-2*a))]):a=E&&E.updatePosition();if(a&&L.detailSize){var b=[L.detailSize[0]-L.rect.width,L.detailSize[1]-L.rect.height];L.detailImage.get(0).style.left=-(a[0]*b[0])+"px";L.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function k(a){var b=K?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:
"";aa=K?[b.pageX,b.pageY]:[a.pageX,a.pageY]}function l(a){K&&a.preventDefault();k(a);e.useClickZoom?a=[Q[0],Q[1],Q[0]+Q[2],Q[1]+Q[3]]:(a=E?E.offset:c.offsetParent().offset(),a=[F[0]+a.left,F[1]+a.top,F[0]+F[2]+a.left,F[1]+F[3]+a.top]);aa[0]<a[0]||aa[1]<a[1]||aa[0]>=a[2]||aa[1]>=a[3]?(e.useClickZoom||p(),V&&(V=!1,clearTimeout(S))):(V||(V=!0,S=setTimeout(function(){m.postCountMetric("dppc_hoverZoomOpened")},1E3)),h())}function p(a){a&&q.suppressMagnifier(!0);if(T&&(L&&L.hide(),E&&(E.destroy(),E=null),
T=!1,K?(c.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),d(document).trigger("disengaged.magnifier")):d(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),A(),a))c.one("click.magnifier touchstart.magnifier",function(a){w(a,!0)})}function w(a,b){b&&q.suppressMagnifier(!1);if(!T&&!J&&(0===Y&&(m.postCountMetric("dppc_hoverTime",new Date-(x.ue&&x.ue.t0||0)),Y=1),N[M]||(m.postCountMetric("dppc_hoverMain"),N[M]=1),F=[c.position().left,c.position().top,c.width(),
c.height()],M&&(k(a),L?L.refit().show():L=new O,e.useClickZoom||(E=E||new H),Q=L.getWindowSize(),h()),T=!0,K?(c.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",l).bind("touchend.magnifier",p),d(document).trigger("engaged.magnifier")):(c.unbind("mousemove.magnifier"),d(document).trigger("engaged.magnifier").bind("mousemove.magnifier",l)),b)){var f=d("#zoomWindow");if(0<f.length)f.one("click.magnifier touchend.magnifier",function(a){p(!0)})}}function A(){e.useHoverZoom&&
(K?c.bind("touchstart.magnifier touchmove.magnifier",w):c.bind("mousemove.magnifier",w))}var q=this,C={detailImageUrl:c.attr("data-old-hires"),location:"over",locationElement:c,prelaod:"ready",zIndex:50,offsetInClickZoom:50};e=d.extend(C,e);e.adjustment=[10,0,-10,0];var L=null,E=null,aa=null,F=null,Q=null,G={"null":1,"":1,undefined:1},T=!1,J=!1,M=e.detailImageUrl,K=e.useHoverZoomIpad||0,Y=0,N={},H=function(){function a(b){var d=Math.round(Math.min(c.width(),L.rect.width/b));b=Math.round(Math.min(c.height(),
L.rect.height/b));m.css({width:d,height:b});g=[d,b]}var h=this,g=[0,0],k=(L.detailSize&&L.detailSize[0]||5E8)/F[2],l=(L.detailSize&&L.detailSize[1]||5E8)/F[3],k=l>k?l:k;d("#magnifierLens").remove();var m=d("<div id='magnifierLens' />").css({backgroundImage:"url("+e.generalImageUrls.zoomLensBackground+")",position:"absolute"});f.showMagnifierOnHover?b(m):m.css("cursor","pointer");h.updatePosition=function(){var a=[F[2]-g[0],F[3]-g[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,(aa[0]-g[0]/2-F[0]-h.offset.left)/
a[0])),c=0>=a[1]?.5:Math.max(0,Math.min(1,(aa[1]-g[1]/2-F[1]-h.offset.top)/a[1])),d=F[0]+Math.round(b*a[0]),a=F[1]+Math.round(c*a[1]);m.get(0).style.left=d+"px";m.get(0).style.top=a+"px";return[b,c]};h.destroy=function(){m.remove()};h.offset=c.offsetParent().offset();a(k);h.updatePosition();m.appendTo(c.parent());L.detailImage[0].complete||L.detailImage.load(function(){var b=L.detailImage.width()/F[2];a(b);h.updatePosition()})};H.preload=function(){q.preload(e.generalImageUrls.lensBackgroundUrl)};
var O=function(){function b(){var a={};if("over"===e.location){var a=e.useClickZoom,f={},h=d("#leftCol"),m=d("#centerCol"),n=d("#rightCol"),u=d("#hover-zoom-end"),w=g.isjQueryObjDefined(h)?h.outerHeight():m.outerHeight();f.top=g.isjQueryObjDefined(h)?h.offset().top:m.offset().top;f.bottom=w+f.top;f.right=n.offset().left;f.left=a?0:h.offset().left+h.outerWidth();g.isjQueryObjDefined(u)&&u.offset().top>f.bottom&&(f.bottom=u.offset().top);a=f}else"right"===e.location&&(a=c.offset(),a={left:a.left+c.outerWidth(),
top:a.top,right:a.left+c.outerWidth()+400,bottom:a.top+400});e.minHeightElement&&(a.bottom=Math.max(a.bottom,a.top+d(e.minHeightElement).outerHeight()));a.bottom=Math.min(a.bottom,d(x).scrollTop()+d(x).height());a.left+=l[0];a.top+=l[1];a.right+=l[2];a.bottom+=l[3];a.width=a.right-a.left;a.height=a.bottom-a.top;e.enhancedHoverOverlay&&g.isDefined(x.pageXOffset)&&(f=d(x).width(),a.width=f-a.left+x.pageXOffset-18,a.height-=14);p.css({left:a.left,top:a.top,width:a.width,height:a.height});k.rect=a;return k}
function f(b){var c=new Image;k.detailSize=[0,0];c.onload=function(){k.detailSize=[c.width,c.height];h()};c.src=b.attr("src");if(0<c.width&&0<c.height)k.detailSize=[c.width,c.height];else if(e.detailImageSize)k.detailSize=e.detailImageSize;else{b=a(c.src);var d=F[2]/F[3];b.SS||b.AA?(b=b.SS||b.AA,k.detailSize=[b,b]):b.SX?k.detailSize=[b.SX,Math.round(b.SX/d)]:b.SY?k.detailSize=[Math.round(b.SY*d),b.SY]:b.SL&&(k.detailSize=1<=d?[b.SL,Math.round(b.SL/d)]:[Math.round(b.SL*d),b.SL])}}var k=this,l=e.adjustment;
d("#zoomWindow").remove();var m={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:e.zIndex};e.enhancedHoverOverlay&&(m.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",m.border="1px solid #949494",m.borderColor="rgb(148,148,148)");var p=d("<div id='zoomWindow' />").css(m);e.fadeMagnifier&&p.fadeIn(200);e.useClickZoom&&(n?p.css("cursor",'url("'+e.zoomOutIcon+'"), auto'):(p.css("cursor","-webkit-zoom-out"),p.css("cursor","-moz-zoom-out"),p.css("cursor","zoom-out")));k.updateImage=function(a){a=
d("<img id='detailImg' src='"+a+"'/>").css("position","absolute");k.detailImage&&k.detailImage.remove();p.append(a);d(document).trigger("updated.magnifier");k.detailImage=a;f(k.detailImage)};k.refit=function(){b();f(k.detailImage);return k};e.fadeMagnifier?(k.show=function(){p.fadeIn(200);return k},k.hide=function(){p.fadeOut(200);return k}):(k.show=function(){p.show();return k},k.hide=function(){p.hide();return k});k.destroy=function(){p.remove();return k};k.getWindowSize=function(){return[k.rect.left,
k.rect.top,k.rect.width,k.rect.height]};k.updateImage(M);b();p.appendTo(document.body)},V=!1,S;q.preload=function(a){a=d.makeArray(a);for(var b=a.length,c=0;c<b;c++)a[c]instanceof Array?q.preload(a[c]):"string"===typeof a[c]&&a[c]&&!G[a[c]]&&(G[a[c]]=new Image,G[a[c]].src=a[c])};q.changeImage=function(a,b){T&&p();M=b;c.attr("src",a);q.preload(a);F=[c.position().left,c.position().top,c.width(),c.height()];b&&("immediately"===e.preload?q.preload(b,!0):d(x).ready(function(){q.preload(b)}),L?L.updateImage(b):
c.attr("data-old-hires",b))};q.destroy=function(){c.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");d(document).unbind("mousemove.magnifier");E&&E.destroy();E=null;L&&L.destroy();L=null};q.detailImage=function(){return L.detailImage};q.suppressMagnifier=function(a){J=a};q.isEngaged=function(){return T};q.engageMagnifier=w;q.disengageMagnifier=p;c[0].complete?A():c.one("load",A);q.preload(c.attr("src"));if(e.preload){var Z=e.detailImageUrl,C=function(){q.preload(Z,
!0);e.useClickZoom||H.preload()},W=e.preload;W.constructor!==Array&&(W=[W]);for(var R=0;R<W.length;R++)if("immediately"===W[R])C();else if(d(x)[W[R]])d(x)[W[R]](C);else d(x).bind(W[R],C)}return q}function e(){if(f.useHoverZoom){var a={adjustment:[0,0,1,1],generalImageUrls:f.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:f.useHoverZoomIpad,useHoverZoom:f.useHoverZoom,useClickZoom:f.useClickZoom,zoomOutIcon:f.staticImages.zoomOutCur,enhancedHoverOverlay:f.enhancedHoverOverlay};
k&&(k.destroy(),k=R);var b=p.find(".image.item.selected img[data-old-hires]").not("[data-old-hires='']");g.isjQueryObjDefined(b)&&(f.useClickZoom?(b.one("click.loadmagnifier touchstart.loadmagnifier",function(d){k=new c(b,a);k.engageMagnifier(d,!0)}),n?b.css("cursor",'url("'+f.staticImages.zoomInCur+'"), auto'):(b.css("cursor","-webkit-zoom-in"),b.css("cursor","-moz-zoom-in"),b.css("cursor","zoom-in"))):k=new c(b,a))}}var h,f,l,k,p,n=d.browser.msie||navigator.userAgent.match(/msie|trident/i);return function(a,
b,c,d){h=this;f=a;l=d;h.render=function(a,b,c,d,e,f){p=c;k&&(k.destroy(),k=R)};h.update=function(a){};l.register("loadMagnifier",e);l.register("resize",e)}});q.when("A","jQuery","imageBlockUtils").register("ImageBlockTwisterView",function(q,d,g){function m(a,b,d){a=(a=d?d:g.getColorFromState(b.getState().hovered_variations,c))&&""!==a?a:c.defaultColor;h.dispatch("updateView",{type:"swatchHover",data:{color:a}})}function b(a,b,d,m){a=(a=m?m:g.getColorFromState(b.getState().selected_variations,
c))&&""!==a?a:c.defaultColor;a===e.getCurrentItem().color?"function"===typeof d&&d():h.dispatch("updateSelection",{type:"swatchClick",data:{color:a},onload:d})}var a,c,e,h;return function(d,g,k,p){a=this;c=d;e=g;h=p;q.on("image-block-twister-swatch-hover",m);q.on("image-block-twister-swatch-click",b);a.render=function(a,b,c,d,e){};a.update=function(a){}}});q.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockVideoView",function(q,d,g,m,b,a){function c(a,
b,c,e){m.isjQueryObjDefined(a.find(".a-button-selected"))||e||(c=r.getCurrentItem(),c=f(c.color,0),-1!==c&&(b+=0,t.dispatch("updateModel",{data:{index:0,thumbnailIndex:b,variant:c.variant,type:n.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),b=a.find(".item").get(b),m.selectGivenThumbnail(d(b),a)))}function e(a){if(!n.useChildVideos)return n.videos;if(n.colorToVideo[a])return n.colorToVideo[a];var c=n.colorToAsin[a];if(c&&c.asin){var d={};d.params={asin:c.asin,productGroupID:n.productGroupID,
useAiryVideoPlayer:!0,useChromelessVideoPlayer:n.useChromelessVideoPlayer,isUDP:n.isUDP};d.success=function(b){b&&(n.colorToVideo[a]=b,b={type:"updatedData",data:r.getCurrentItem()},t.dispatch("updateView",b))};b.load("/gp/product/features/apparel-main-image/videos.html",d);return n.colorToVideo&&n.colorToVideo[a]}}function h(b,c,e,f){return g.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:b[0],streamingUrls:c.url,swfUrl:e.swfUrl,foresterMetadataParams:e.foresterMetadataParams,backgroundColor:"transparent",
flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var c=m.isjQueryObjDefined(b.find("video"))?"HTML5":"FLASH";a.postCountMetric("dppc_chromelessVideo:"+c)},playing:function(){b.parent().css("z-index",8)},videounsupported:function(){t.dispatch("selectThumbnail",0);a.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){t.dispatch("selectThumbnail",0);a.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){B.seek(0)}},
cuePoints:[{values:c.durationSeconds-1,type:"position",callback:function(a,c,e){a=e.durationSeconds-e.playheadTimeSeconds;b.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*a,.1,function(){b.parent().css({"background-color":"transparent","z-index":-1});t.dispatch("selectThumbnail",0);d(this).show().css("opacity",1)})}}]})}function f(a,b){var c;if(n.useChildVideos){if(!m.isDefined(n.colorToVideo))return-1;c=n.colorToVideo[a]}else c=n.videos;return m.isDefined(c)&&
m.isDefined(c[b])&&m.isDefined(c[b].url)?c[b]:-1}function l(a){if("chromeful-video"===a.type||"chromeless-video"===a.type){var b=f(a.color,a.index);if(-1===b)return-1;if("chromeful-video"===a.type){a=n.holderRatio;var c=parseInt(b.videoWidth,10),d=parseInt(b.videoHeight,10);y.parent().css("z-index",2);0!==d&&0!==c&&(c/=d,a>c?y.css("width",c/a*100+"%"):y.css("height",a/c*100+"%"));B?(B.show(),m.loadMediaIntoAiry(B,b,w),u.show()):(B=m.createAiryInstanceForChromeful(y,b,w),u.find("#videoCaption").text(n.staticStrings.playVideo))}else B?
(B.show(),m.loadMediaIntoAiry(B,b,w),B.play()):(B=h(y,b,w))&&B.play()}}function k(b,f,h){f=e(f);var g=b;m.isDefined(f)&&0<f.length&&n.alwaysIncludeVideo&&b===n.maxAlts&&(x.find(".item:last").remove(),b--);m.isDefined(f)&&(d.each(f,function(c,d){if(b<n.maxAlts){var e=n.useChromelessVideoPlayer?"chromeless-video":"chromeful-video";m.createThumbnail({type:e,index:c,thumbnailIndex:b,variant:d.variant},d.thumb,x);A||(A=!0,a.postCountMetric("chromeless-video"===e?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));
b++}}),c(x,g,b,h));return b}var p,n,r,t,x,y,u,B,w,A=!1;return function(a,b,c,d){p=this;n=a;r=b;t=d;w=n.airyConfig;n.colorToVideo={};n.colorToVideo[n.landingAsinColor]=n.colorToVideo[n.defaultColor]=n.videos;p.render=function(a,b,c,d,e,f){x=d;y=e.find("#main-video-container");u=y.parent().find("#video-canvas-caption");a=k(b,a,f);l(r.getCurrentItem());return a};p.update=function(a){B&&(B.hide(),y.parent().css("z-index",-1),u.hide());var b=a.data;if("swatchHover"===a.type)b.color===r.getCurrentItem().color&&
l(r.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type)l(b),m.selectGivenThumbnail(a.$declarativeParent,x)}}});q.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","postMetric").register("ImageBlockImmersiveView",function(q,d,g,m,b,a){function c(a){return a.hiRes||a.large||a.main[a.main.length-1]}function e(a,c){var d=q.copy(a);if(b.isDefined(a)&&a.length>c){try{for(var e=-1,f=0;f<a.length;f++){var h=a.charAt(f);if(" "===h||"."===h||"?"===h||";"===
h||","===h||":"===h)e=f;if(f===c-4){d=a.substring(0,-1===e?f:e);break}}}catch(g){d=a.substring(0,c-3)}d+="..."}return d}function h(a){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"");var b=a.lastIndexOf(".");return a=a.substring(0,b)+"._AA50_"+a.substring(b)}function f(){J.find("#ivTitle").click(function(){T.hide()})}function l(a,b){var c=parseInt(a.css(b),10);return isNaN(c)?0:c}function k(){var a=J.find("#ivStage"),
b=T.$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-l(c,"padding-top")-l(c,"padding-bottom");J.css("height",b);var c=J.find("#ivTitle").outerHeight(!0),d=J.find("#ivVariationSelection").outerHeight(!0),e=J.find("#ivMediaSelection").outerHeight(!0),f=J.find("#ivThumbs"),h=l(f,"margin-top")+l(f,"margin-bottom");f.css("height",b-c-d-e-h);J.find("#ivLargeImage").css("height",b);a.css("width",J.width()-l(J,"padding-left")-l(J,"padding-right")-J.find("#ivThumbColumn").width()-
l(a,"margin-left")-l(a,"margin-right"))}function p(){J.find("#ivMediaSelect").change(function(){var a=m(this).val();"all"===a?(J.find("#ivVideoList").hide(),J.find("#ivThumbs").show(),J.find(".ivThumbVideo").show(),"chromeful-video"===H.type&&J.find("#ivVideo_"+H.index).click()):"images"===a?(J.find("#ivVideoList").hide(),J.find("#ivThumbs").show(),J.find(".ivThumbVideo").hide(),"chromeful-video"===H.type&&J.find("#ivImage_0").click()):"videos"===a&&(J.find("#ivVideoList").show(),J.find("#ivThumbs").hide(),
"image"===H.type?J.find("#ivVideoList_0").click():J.find("#ivVideoList_"+H.index).click())})}function n(){var a=J.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,f=0===f?1:f,h=Math.min(b/e,c/f),g=f*h,k=e*h;1>h?(S?a.css("cursor","url('"+F.staticImages.zoomIn+"'), auto"):(a.css("cursor",
"-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),R=!0):R=!1;e=Math.min(k,e);f=Math.min(g-20,f);d.css({"margin-top":(c-f)/2,"margin-left":(b-e)/2,height:f,width:e});a.css("visibility","visible");W=!1}function r(a){var b=J.find("#ivLargeImage");b.css("visibility","hidden");b.empty();b.animate({opacity:1},200);b.append(a);n()}function t(){O&&O.hide();J.find("#ivLargeVideo").css("display","none");J.find("#ivLargeImage").css("display","block");var a;b.isDefined(M)&&(a=c(M[H.index]));
if(b.isDefined(a)){J.find(".fullscreen").remove();var d=m("<img>").attr("src",a).addClass("fullscreen"),e=J.find("#ivLargeImage");e.animate({opacity:.4},200,function(){d.load(function(){r(d)});if(d[0].complete)r(d);else{e.empty();var a=(e.height()-104)/2,b=(e.width()-80)/2;m("<img>").attr("src",F.staticImages.spinner).css({position:"relative",top:a+"px",left:b+"px"}).appendTo(e)}})}}function D(){var a=parseInt(H.index,10)+1;a>=K.length||J.find("#ivVideo_"+a).click()}function y(){var a;b.isDefined(K)&&
(a=K[H.index]);if(b.isDefined(a)){J.find("#ivLargeImage").css("display","none").empty();var c=J.find("#ivLargeVideo").css("display","block");O?(O.isDetached()&&O.attach(c[0]),b.loadMediaIntoAiry(O,a,V),O.show()):(O=b.createAiryInstanceForChromeful(c,a,V,"ImmersiveView"),V.enableContinuousPlay&&O.bind("ended",D));O.play({isAsync:!0})}}function u(){H=Q.getCurrentItem();var a;if("image"===H.type)a=J.find("#ivImage_"+H.index);else if("chromeful-video"===H.type||"chromeless-video"===H.type)a=J.find("#ivVideo_"+
H.index);b.isjQueryObjDefined(a)||(a=J.find("#ivImage_0"));B(a)}function B(a){J.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(H.type="chromeful-video",H.index=a.attr("id").split("_")[1],y()):(H.type="image",H.index=a.attr("id").split("_")[1],t())}function w(){J.delegate(".ivThumb","click",function(){var a=m(this);B(a)});J.delegate(".ivThumbVideoListOuter","click",function(){J.find(".ivThumbVideoListOuter").removeClass("selected");var a=m(this);a.addClass("selected");
H.type="chromeful-video";H.index=a.attr("id").split("_")[1];y()})}function A(){O&&!O.isDetached()&&(V.volume=O.getVolume(),O.detach(),!document.all||x.atob||document.addEventListener||(O=null));J.find("#ivLargeImage").empty()}function I(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function C(a){var b=ha.top-(a.pageY-ra[1])*X;a=I(ha.left-(a.pageX-ra[0])*X,ka.left);b=I(b,ka.top);J.find(".fullscreen").css({left:a,top:b})}function P(){J.delegate("#ivLargeImage","click",function(a){if(W)n();else if(R){J.find(".fullscreen").removeAttr("style");
if(R){var b=J.find("#ivLargeImage"),c=b.find(".fullscreen");S?b.css("cursor","url('"+F.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));W=!0;var d=J.find("#ivLargeImage");ka.left=d.width()-c.width();ka.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;ra=[b.offset().left+e,b.offset().top+d];ha.top=d-c.height()/2;ha.left=e-c.width()/2;c.css({position:"relative",left:ha.left,top:ha.top});X=Math.max(c.height()/b.height(),
c.width()/b.width())}C(a)}});J.delegate("#ivLargeImage","mousemove",function(a){W&&C(a)})}function E(){var c;(c=!F.useIV)||(c=Q.getCurrentItem().color,c=F.colorImages&&F.colorImages[c]&&0<F.colorImages[c].length?!0:!1,c=!c);if(!c){a.postCountMetric("dppc_immersiveViewOpened");if(b.isDefined(T))T.show();else{c=m("#auiImmersiveViewDiv");var f=m(x).height()-150,g=m(x).width()-75;T=d.create(c,{name:"immersiveView",activate:"onclick",width:g,height:f,popoverLabel:"ImmersiveView",hideHeader:!0});c.click()}if(Z){J=
m("#ivMain");c=Q.getCurrentItem().color;M=F.colorImages[c];K=F.useChildVideos?F.colorToVideo[c]:F.videos;H=Q.getCurrentItem();N=Y=0;b.isDefined(M)&&(Y=M.length);b.isDefined(K)&&(N=K.length);c=J.find("#ivTitle");c.attr("title",F.title);c.text(e(F.title,45));if(b.isDefined(x.DetailPage)&&b.isDefined(x.DetailPage.StateController)){c=J.find("#ivVariationSelection");c.empty();var f=x.DetailPage.StateController.getState(),g=f.variation_label_order,k;for(k in g)if(g.hasOwnProperty(k)){var l=g[k],n=f.selected_variations[l],
l=f.variation_display_labels[l];n&&m("<div/>").addClass("ivVariations").text(l+":"+n).appendTo(c)}}k=J.find("#ivMediaSelect");0===Y||0===N?(k.parent().hide(),J.find("#ivThumbs").addClass("noMediaSelection")):(k.empty(),m("<option/>").attr("value","all").prop("selected",!0).text(F.staticStrings.allMedia+" ("+(Y+N)+")").appendTo(k),m("<option/>").attr("value","images").text(F.staticStrings.images+" ("+Y+")").appendTo(k),m("<option/>").attr("value","videos").text(F.staticStrings.videos+" ("+N+")").appendTo(k),
k.parent().show(),k.val("all"));k=J.find("#ivThumbs");k.find(".ivRow").not(".placeholder").remove();c=Y+N;for(g=f=0;f<c;)for(n=k.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(k),l=0;3>l&&f<c;l++,f++,g++)if(g<Y){var p=M[f].thumb,r=k.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+f).appendTo(n);r.find(".ivThumbImage").css("background",'url("'+h(p)+'") center no-repeat')}else if(p=K[f-Y],r=k.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id",
"ivVideo_"+(f-Y)).appendTo(n),r.find(".ivThumbImage").css("background",'url("'+p.thumbUrl+'") center no-repeat'),b.isDefined(p)){var t={position:"triggerTop"},u=J.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");u.find(".ivVideoPopoverTitle").text(p.title);u.find(".ivVideoPopoverDuration").text(p.durationTimestamp);t.inlineContent=u[0];q.declarative.create(r,"a-tooltip",t)}k=J.find("#ivVideoList");k.find(".ivThumbVideoListOuter").not(".placeholder").remove();
c=k.find(".placeholder");for(f=0;f<N;f++)g=K[f],n=c.clone().removeClass("placeholder").appendTo(k),n.attr("id","ivVideoList_"+f),n.find(".ivThumbImage").css("background",'url("'+g.thumbUrl+'") center no-repeat'),n.find(".ivThumbTitle").text(g.title),n.find(".ivThumbDuration").text(g.durationTimestamp);V=F.airyConfig;Z=!1;ja()}}}var aa,F,Q,G,T,J,M,K,Y,N,H,O,V,S=m.browser.msie||navigator.userAgent.match(/msie|trident/i),Z=!0,W=!1,R=!1,ka={},ha={},X,ra,ja=q.once(function(){p();w();P();q.on("a:popover:afterUpdatePosition:immersiveView",
k);q.on("a:popover:afterShow:immersiveView",u);q.on("a:popover:afterHide:immersiveView",A);f()});return function(a,b,c,d){aa=this;F=a;Q=b;G=d;aa.render=function(a,b,c,d,e,f){Z=!0};aa.update=function(a){};G.register("imageClick",E)}});q.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(q,d,g){return{load:function(d,b){b=b||{};b.timeout=b.timeout||4E3;q.ajax(d,b)}}});q.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF").register("imageBlockUtils",
function(q,d,g,m,b,a){function c(a){return null!==a&&"undefined"!==typeof a}function e(a){var b=0;d.each(a,function(a,c){var d=parseInt(c[1],10);d>b&&(b=d)});return b}function h(a){var b=0;d.each(a,function(a,c){var d=parseInt(c[0],10);d>b&&(b=d)});return b}var f,l,k=d.extend(!0,{},b,a);return{isDefined:c,isjQueryObjDefined:function(a){return 0!==a.length},getMaxHeightOfMainImage:function(a,b){var c=b.height(),d=h(a);0<d&&(c=Math.min(c,d));return c},getMaxWidthOfMainImage:function(a,b){var c=b.width(),
d=e(a);0<d&&(c=Math.min(c,d));return c},getContainerHeight:function(a,b,d){a=a.get(0);var e=0;c(a)&&(e=a.offsetWidth/b,e=Math.min(e,d));return e},getColorFromState:function(a,b){if(a){b=b||k;var c="";d.each(b.visualDimensions,function(b,d){a[d]&&(c+=" "+a[d])});return c&&c.substring(1)}},createThumbnail:function(a,b,c){var d=c.find(".template").clone().removeClass("template").addClass("item"),e=document.createElement("img");e.src=b;d.find(".placeHolder").replaceWith(e);q.declarative.create(d,"thumb-action",
a);c.append(d)},selectGivenThumbnail:function(a,b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(a,b,c,e){var h=d.extend({},c.foresterMetadataParams);null!==e&&(h.method+="."+e);var k=[];b.disabledViewIds&&(k=b.disabledViewIds);return g.embed({parentElement:a[0],streamingUrls:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||
"")||0,contentTitle:b.title,swfUrl:c.swfUrl,foresterMetadataParams:h,backgroundColor:"transparent",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl},videoAds:c.videoAds,bindings:{play:function(){"ImmersiveView"===e?f||(f=!0,m.postCountMetric("dppc_chromefulVideoPlayedIV")):l||(l=!0,m.postCountMetric("dppc_chromefulVideoPlayedPV"))}},disabledViewIds:k})},loadMediaIntoAiry:function(a,b,c){a&&a.getMediaSourceInfo()!==b.url&&a.loadMedia({mediaSourceInfo:b.url,
contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}})},showUnavailable:function(a){a&&(d("#imageBlock .unvailableVariation").html(a),d("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){d("#imageBlock .variationUnavailable").hide()}}})})})(function(){var q=window.AmazonUIPageJS||window.P,x=q._namespace||q.attributeErrors;return x?x("DetailPageImageBlockAssets"):q}(),window);