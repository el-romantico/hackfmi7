(function(f,c,t){f.execute(function(){f.when("A","RWDynamicModalFactory","ready").execute("RWDynamicModalBootstrapper",function(a,q){var l=a.state("rw-dynamic-modal"),b=a.state("rw-dynamic-modal-bootstrap"),d=a.$("#rwol-display-called"),k,g,h=function(){if(c.sessionStorage)try{sessionStorage.setItem("rwolLastPage",c.location.href),sessionStorage.setItem("rwolLastPageSet",Date.now())}catch(a){}},m=function(){var e=!1;return function(){e||(e=!0,a.ajax("/gp/overlay/update.html",{method:"post",params:{placementId:k,
priority:g}}))}}(),n=function(e){e.pageContent&&a.$("body").append(e.pageContent);e.data&&e.data.tracker?f.when(e.data.tracker).register("RWDynamicModal",function(a){return q(e,a)}):f.register("RWDynamicModal",function(){return q(e)})},p=function(e){if(e&&/\S/.test(e)&&(!c.$Nav||!c.$Nav.getNow("rwOverlaySuppress")))if(k=e.placementId,g=e.priority,a.$.isPlainObject(e.content))n(e);else if(e.content)try{a.$("body").append(e.content),a.state.parse(),(e.displayLogic||"").match("client")||m()}catch(b){c.ueLogError&&
c.ueLogError(b,{logLevel:"FATAL",attribution:"RetaiWebsiteOverlay",message:"[RWOL][Placement "+e.placementId+"] Failed appending content for placement with error: "})}};a.on("rw:overlay:displayed",function(a){m()});if(l)return h(),n(l);if(b){c.sessionStorage&&!document.referrer&&(l=sessionStorage.getItem("rwolLastPageSet"))&&parseInt(l,10)>Date.now()-3E4&&(b.referrer=sessionStorage.getItem("rwolLastPage"));b.referrer=b.referrer||document.referrer;if(b.referrer&&b.referrer.match(/^https?:\/\/([^\/]+\.)?amazon\.com(\/|$)/i))return h();
if(!c.$Nav||!c.$Nav.getNow("rwOverlaySuppress")){if(0<d.length){if("0"!==d.val())return h();d.val(1)}h();if(d=(b.queryString=c.location.search)&&c.location.search.split("?").pop())for(d=d.split("&"),h=0;h<d.length;h++){var l=d[h].split("="),r=c.decodeURIComponent(l[0]);b.hasOwnProperty(r)||(b[r]=c.decodeURIComponent(l[1]))}return a.ajax("/gp/overlay/display.html",{method:"post",params:b,success:p})}}});f.when("A","jQuery","a-modal-factory").register("RWDynamicModalFactory",function(a,c,f){var b,d,
k;return function(g,h){if(g&&!b){var m=c('<span style="display:none;"></span>');c("body").append(m);b=f.create(m,g);d=g.data||{};if(h){if(d.countRef)a.on("a:popover:show:"+g.name,function(a){h.track(d.countRef,d)});if(d.disButtonRef)a.on("a:popover:dismiss:"+g.name,function(b){h.track(d.disButtonRef,d);k=!0;a.off("a:popover:dismiss:"+g.name)});if(d.disRef)a.on("a:popover:afterHide:"+g.name,function(a){k||h.track(d.disRef,d)});a.declarative("rw-popover-log-close","click",function(a){h.track(a.data.disRef,
d);k=!0;b.hide()})}a.on("a:popover:afterShow:"+g.name,function(b){a.ajax("/gp/overlay/update.html")});g.autoShow&&b.show();b.attrs("data",d);return b}}})})})(function(){var f=window.AmazonUIPageJS||window.P,c=f._namespace||f.attributeErrors;return c?c("RetailWebsiteOverlayAUIAssets"):f}(),window);