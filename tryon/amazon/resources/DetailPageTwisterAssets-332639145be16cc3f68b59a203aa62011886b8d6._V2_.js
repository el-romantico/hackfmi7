(function(z,E,F){z.execute(function(){z.when("A","jQuery","dp-js-logger","dp-ajax-prefetch-metrics").register("dp-ajax-prefetch",function(w,h,a,c){function e(a,g,f,e,d,p){this.scope=a;this.uniqueId=g;this.url=f;this.options=e;this.context=d;this.status=0;this.selected=!1;this.error=this.successData=this.xhr=this._status=F;this.chunks=[];this.doNotAbort=p||!1;this.prefetchMetrics=c.getInstance(this.scope)}var t=new a("dpAjaxPrefetch");e.prototype._callback=function(a,c,f,e,d){"function"===typeof a&&
a.call(self,c,f,e,d)};e.prototype._canAbort=function(){return!this.doNotAbort&&1===this.status};e.prototype._isAborted=function(){return 3===this.status};e.prototype._getUniqueId=function(){return this.uniqueId};e.prototype._abort=function(){if(1===this.status)try{this.ajaxRequestRefence.abort(),this.status=3}catch(a){t.logFatal(a,{message:" Could not abort ajax request."})}};e.prototype._flushChunkData=function(){var a=this;a.chunks.length&&h.map(a.chunks,function(c){a._callback(a.options.chunk,
c,a.context)})};e.prototype._request=function(){var a=this;a.ajaxRequestRefence=w.get(a.url,{params:a.options.params,success:function(c,f,e){a.status=4;a.successData=c;a._status=f;a.xhr=e;a.selected&&a._callback(a.options.success,c,f,e,a.context)},error:function(c,f,e){a.status=2;a.xhr=c;a._status=f;a.error=e;a.selected&&a._callback(a.options.error,c,f,e,a.context)},abort:function(c){a.status=3;a.xhr=c;a.selected&&a._callback(a.options.abort,c,a.context)},chunk:function(c){c&&(a.chunks.push(c),a.selected&&
a._callback(a.options.chunk,c,a.context))},timeout:a.options.timeout||4E4})};e.prototype.prefetchContent=function(){this.prefetchMetrics.predicted(this.uniqueId);0===this.status&&(this.status=1,this._request())};e.prototype.getContent=function(a){a&&this.prefetchMetrics.selected(this.uniqueId);e._abortPrefetchesExcept(this);this.selected=!0;0===this.status?(this.status=1,this._request()):1===this.status?this._flushChunkData():4===this.status&&(this._flushChunkData(),this._callback(this.options.success,
this.successData,this._status,this.xhr,this.context),w.trigger("a:pageUpdate"))};e._objects={};e._abortPrefetchesExcept=function(a){h.each(e._objects[a.scope],function(c,f){f._canAbort()&&c!==a._getUniqueId()&&f._abort()})};e.getInstance=function(a,c,f,m,d,p){if(!a||!c||!f||"object"!==typeof m)throw"Incorrect parameter passed.";e._objects[a]=e._objects[a]||{};var v=e._objects[a][c];v&&v._isAborted()&&(delete e._objects[a][c],v=F);v||(e._objects[a][c]=new e(a,c,f,m,d,p,this));return e._objects[a][c]};
return e});z.register("dp-js-logger",function(){return function(w){function h(a,e,t){e=e||{};"string"===typeof a&&(e.message+=a,a=F);e.logLevel=t;E.ueLogError&&E.ueLogError(a,e)}var a=this;a.attribution=w||"Twister";a.logFatal=function(a,e){h(a,e,"FATAL")};a.logError=function(a,e){h(a,e,"ERROR")};a.logCounter=function(c,e){E.ue&&E.ue.count&&ue.count(a.attribution+c,e)};a.consoleLog=function(a){E.console&&"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log(a)}}});z.when("A","jQuery",
"dp-ajax-prefetch","twister-utils","dp-js-logger").register("dimensional-summary-module",function(w,h,a,c,e){var t=new e("dpDimensionalSummary");return function(a){function g(a){p.initData.fnToDetermineSelectedVariations?"function"===typeof p.initData.fnToDetermineSelectedVariations&&(p.currentDimCombOnGlance=p.initData.fnToDetermineSelectedVariations.call(p)):(p.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,p.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID);
return a?p.currentDimCombOnGlance.split("_"):p.currentDimCombOnGlance}function f(a,d){for(var f="",b,g,e=0,q=a.length;e<q;e++)f=f+(0<e?",":"")+a[e];var m=v.extend(m,c.getQueryParams({psc:1})),m=v.extend(m,{parentAsin:DetailPage.StateController.getState().parent_asin});p.initData.globalAjaxParameters&&(m=v.extend(m,p.initData.globalAjaxParameters));m&&(g=v.param(m));f&&(b=!Twister.multiDimensionWeblabEnabled||"dropdown"!==d.dimType.toLowerCase()&&"swatch"!==d.dimType.toLowerCase()?d.dimType:"Dropdown",
b="/gp/twister/dimension?asinList="+f+"&isDimensionSlotsAjax=1&dimSubType="+d.dimSubType+"&dimType="+b+(g?"&"+g:""));return b}function e(a){for(var d,c=0,b=a.length;c<b;c++)d=d+(0<c?",":"")+a[c];return d}function d(a,d,g){e(a);a=f(a,g);var b={};g.params&&(b.params=g.params);b.chunk=function(b,a){var d;(d=(d=(d=(d=b&&"JSON"==b.Type)&&typeof("undefined"!==b.Value))&&typeof("undefined"!==b.Value.content))&&typeof("undefined"!==b.Value.content.twisterSlotDiv))?(g.executeChunk===F?g.chunk(b,a):g.executeChunk()&&
g.chunk(b,a),p.asinDimSumCache[b.ASIN]=b):t.logFatal("The received data does not contain required properties.",{message:"[Twister]Invalid data received."})};b.success=function(b,a,d,f){g.success&&c.typeChecker.isFunction(g.success)&&g.success(b,a,d,f)};b.error=function(b,a,d){g.error&&c.typeChecker.isFunction(g.error)&&g.error(b,a,d)};b.abort=function(b){g.abort&&c.typeChecker.isFunction(g.abort)&&g.abort(b)};b.timeout=6E4;w.get(a,{success:function(a,c,q){b.success(a,c,q,d)},chunk:function(a){b.chunk(a,
d)},error:function(a,d,q){b.error(a,d,q)},abort:function(a){b.abort(a)}})}var p=this,v=w.$;p.initData=a;p.scopePrefix="dpDimSum";p.symbolForTriggeringDim="*";p.uniqueID="";p.urlPrefix="";p.asinDataCache={};p.glanceViewSelectedDims="";p.currentDimCombOnGlance="";p.mapOfDimToAsinMaps={};p.mapOfAsinToDimMaps={};p.asinDimSumCache={};p.scope=p.scopePrefix+"_"+p.initData.scopeSuffix;p.dimensionsList=p.initData.dimensionsList;p.dimensionValuesList=p.initData.dimensionValuesList;p.dimensionCombinationToASINMap=
p.initData.dimensionCombinationToASINMap;g();p.fetchDimSumData=function(a){if(a.dimTriggeringDimSum&&c.typeChecker.isString(a.dimTriggeringDimSum))var f=a.dimTriggeringDimSum;else throw"Wrong parameter passes to DimSumModule "+p.scope;var e=p.dimensionsList.indexOf(f);if(a){if(!a.asinList||!c.typeChecker.isArray(a.asinList))throw"Wrong parameter passed to DimSumModule "+p.scope;if(!a.chunk||!c.typeChecker.isFunction(a.chunk))throw"Wrong parameter passed to DimSumModule "+p.scope;}else throw error("No options for dimSum");
f={dimIndexTriggeringDimSum:e};f.dimCombOnPage=g();var b=g(!0).slice(0);b[e]=p.symbolForTriggeringDim;e=b.join("_");f.hashKey=e;for(var x=a.asinList,e=[],b=[],m=0,q=x.length;m<q;m++){var v=x[m];v&&(p.asinDimSumCache&&p.asinDimSumCache[v]?b.push(v):e.push(v))}x=[];x.asinListForServer=e;x.asinListForCache=b;0<x.asinListForServer.length&&d(x.asinListForServer,f,a);if(0<x.asinListForCache.length){e=x.asinListForCache;x=0;for(m=e.length;x<m;x++)b=e[x],a.chunk(p.asinDimSumCache[b],f);e.length===a.asinList.length&&
a.success(F,F,F,f)}}}});z.when("A","jQuery").register("detail-page-state-controller",function(){return function(){this.state={};this.getState=function(){return this.state};this.setState=function(w,h){w&&h&&(this.state[w]=h)}}});z.when("A","jQuery").register("detail-page-framework",function(){return{callbacks:{},registerCallback:function(w,h,a){"after_redraw"!=w&&"asin_select"!=w||"sims-widget"!=h&&"session-similarities"!=h&&"purchase-similarities"!=h&&"buyxgety"!=h||(this.callbacks[h+"_feature_div"]=
a)},registerFeature:function(){},registerFeatureConfig:function(){}}});z.when("A","twister-string-constants").register("twister-modal-resize-helper",function(w,h){return function(){function a(a,g){a.each(function(a,e){var d=t(e);-1==e.className.indexOf(g)&&(d.outerWidth()>c.width&&(c.width=d.outerWidth()),d.outerHeight()>c.height&&(c.height=d.outerHeight()))});return c}var c={width:0,height:0},e=this,t=w.$;e.getGlanceSwatchesInRow=function(a,c){c&&c.fixModalSwatchesForThinWidths();var f=t("#twister_feature_div "+
a),e=0,d=0;0<f.length&&(d=f.get(0).getBoundingClientRect().top,e++);for(var p=1,v=f.length;p<v;p++){var l=f.get(p).getBoundingClientRect();if(5<Math.abs(d-l.top))break;else e++}c&&c.resizeSwatchesForThinWidths();return e};e.fixSize=function(c,g,f,m,d){c.removeClass("twisterSwatchWrapper");var p=a(c,m),v=E.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(d!=F){var l=d.twisterModalDiv.outerWidth(),k=e.getGlanceSwatchesInRow(g,d),h=c.first().width(),h=k*(p.width-h);0<h&&
0<k&&(newModalWidth=l+h,d.setModalWidth(newModalWidth))}c.addClass("twisterSwatchWrapper");Twister.isIE8()?(c.each(function(b,a){t(a).css({"min-height":p.height+"px","min-width":p.width+"px"})}),1100<v&&t("."+m).css({height:p.height+"px"})):t("#"+f).html(g+" { min-height:"+p.height+"px; min-width:"+p.width+"px; } ."+m+" { height: "+p.height+"px;}");e.resetBestSize()};e.resetBestSize=function(){c={width:0,height:0}}}});z.when("A","jQuery","twisterModule","dp-js-logger","page-refresh:controller","twister-controller",
"twister-state","twister-string-constants").register("detailPage:RefreshHandler",function(w,h,a,c,e,t,r,g){var f=E.twisterController.twisterModel.twisterState,m=new c("dpPageRegreshHandler"),d={},p=function(a){var d=this;d.clientId=a;d.doPageRefresh=function(c){if(!Array.isArray(c))throw"Incorrect parameters passed to doPageRefresh for clientId "+d.clientId;c=f.getRequestContextForExternalTwisterUpdates(c);try{e.updatePage(c,g.EVENT_TYPE_CLICK)}catch(p){m.logFatal(p,{message:" Error doing page-refresh for clientId "+
a})}};d.getURLParamObject=function(a,c,b){if(!a||null==b)throw"Incorrect parameters passed to getURLParams for clientId "+d.clientId;return{key:encodeURIComponent(a),value:encodeURIComponent(c),isPersistent:b}}};return{getHandlerInstance:function(a){if(null==a||""==a)throw"Incorrect clientID passed to getHandlerInstance of dpRefreshHandler";d[a]||(d[a]=new p(a));return d[a]}}});z.when("A","jQuery","detailPage:RefreshHandler","twister-string-constants").register("your-module-name",function(w,h,a,c){E.handleClickForMyButton=
function(){for(var c=[],t="",r="",g=0,f=arguments.length;g<f;g++)r=arguments[g],0==g?t=a.getHandlerInstance(r):(r=t.getURLParamObject(r[0],r[1],r[2]),c.push(r));t.doPageRefresh(c)}});z.when("A","jQuery","dp-ajax-prefetch","detail-page-framework","dp-js-logger","twister-string-constants","page-refresh:meta-cache","page-refresh:page").register("page-refresh:controller",function(w,h,a,c,e,t,r,g){var f={intermediateEOS:1,EOS:1},m=new e("dpTwister");return new function(){function d(b,a){if(!(1<a.recordImpressionPending)){var d=
a.impressionCallbackData&&a.impressionCallbackData.relatedRequestID,c="/gp/twister/impression.html/?relatedRequestID="+d;d?w.delay(function(){w.get(c,{success:function(b){m.logCounter("dpTwisterImpression",1)},timeout:4E4,error:function(b,a,d){m.logCounter("dpTwisterImpressionFailed",1)}})},1500):m.logFatal("prefetchRequestId does not exists. twister prefetch ajax requests are not returning the metadata.");a.recordImpressionPending++;r.set(b,a)}}function e(b,a,d){"undefined"===typeof a.forceFullPrefetch&&
(a.forceFullPrefetch=d||t.NO,r.set(b,a));return a.forceFullPrefetch===t.NO&&A.metadata[b.mType]&&!A.metadata[b.mType].fullyPrefetchable}function v(b,a){l(b,function(b){g.executeClientFeatures(b,a)})}function l(b,a){var d=[b];b.relatedContext&&d.push(b.relatedContext);h.each(d,function(b,d){a.apply(A,[d])})}function k(d,c){l(d,function(d){g.fadeInFeatures(d);var f=d.uniqueID,k=d.url;md=r.get(d);A.newPrefetchWeblab&&md.prefetchSent&&e(d,md)&&(f+="_prefetch_1",k+="&prefetchParam=1",md.hotFeaturesPending=
!0);md.requestSent=!0;r.set(d,md);var l=A.newPrefetchWeblab&&c===t.EVENT_TYPE_CLICK;a.getInstance("dpTwister",f,k,b,d,d.doNotAbort).getContent(l)})}var A=this;A.metadata={};A.newPrefetchWeblab=!1;A.page=g;A.twisterPSCParam="psc";var b={chunk:function(b,a){var d=b.ASIN,c=b.Value,k=b.FeatureName;if(!f[k]){var e=r.get(a);"twister-request-metadata"===k?(e.impressionCallbackData=w.parseJSON(c.content[k]),r.set(a,e)):g.refreshFeature(d,k,c)}},success:function(c,f,q,g){c=r.get(g);c.hotFeaturesPending&&(c.hotFeaturesPending=
!1,r.set(g,c),a.getInstance("dpTwister",g.uniqueID+"_prefetch_2",g.url+"&prefetchParam=2",b,g,g.doNotAbort).getContent());c.recordImpressionPending&&d(g,c)},error:function(b,a,d){Twister.$("#variations-overlay").hide();Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());m.logFatal(a+" "+d)},abort:function(b){m.logFatal(" Ajax aborted: "+b)},timeout:4E4};A.prefetchPage=function(d,c){l(d,function(d){var f=d.uniqueID,g=d.url,k=r.get(d);k.requestSent||(e(d,k,c)&&
(f+="_prefetch_1",g+="&prefetchParam=1"),k.prefetchSent=!0,k.recordImpressionPending=k.recordImpressionPending||1,k.requestSent=!0,r.set(d,k),a.getInstance("dpTwister",f,g,b,d,d.doNotAbort).prefetchContent())})};A.updatePage=function(b,a){if(a===t.EVENT_TYPE_CLICK||a===t.EVENT_TYPE_DROPDOWN_CHANGE){if(!b.partialState){if(c.callbacks["sims-widget_feature_div"])c.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());g.startMeasurement(b)}k(b,a)}v(b,a)};A.reloadPage=function(b){var a;
if(E.location.search){a=E.location.search;var d={};a=a.substring(a.indexOf("?")+1).split("&");for(var c=0;c<a.length;c++){var f=a[c].split("=");f[0]&&0<=f[0].length&&(d[decodeURIComponent(f[0])]=decodeURIComponent(f[1]))}a=d}var g,d="/dp/"+b.childAsin;b.partialState?a[A.twisterPSCParam]&&delete a[A.twisterPSCParam]:a[A.twisterPSCParam]=1;(b="?"+h.param(a))&&d&&(g=d+b);E.location.href=g};A.init=function(b){A.newPrefetchWeblab=b.newPrefetchWeblab;h.each(b.contextMetaData,function(b,a){if(a.elementList){for(var d=
a.elementList.length,c=!0,f=0;f<d;f++)if(!a.elementList[f].isPrefetchable){c=!1;break}A.metadata[b]||(A.metadata[b]={});A.metadata[b].fullyPrefetchable=c}});g.init(b)}}});z.when("A","jQuery","page-refresh-measurement","twister-string-constants","dp-js-logger").register("page-refresh:page",function(w,h,a,c,e){var t=new e("dpTwister");return new function(){var e=this;e.measurement=F;e.config={partial:{},full:{},parent:{},master:{}};e.initializeMeasurement=function(c){var f=c.measurement;e.measurement=
new a(h,f.atf.marker,f.cf.marker);e.measurement.init(c.storeID,c.productGroupID)};e.init=function(a){e.initializeMeasurement(a);h.each(a.contextMetaData,function(a,g){var d=[],p={},v=g.elementList||[],l=v.length;p[c.EVENT_TYPE_MOUSEOVER]={};p[c.EVENT_TYPE_CLICK]={};for(var k=0;k<l;k++){var t=h("#"+v[k].divToUpdate);d.push("#"+v[k].divToUpdate);t.length&&v[k].customClientFunction&&(v[k].updateOnHover&&(p[c.EVENT_TYPE_MOUSEOVER][v[k].divToUpdate]=t.attr("customfunctionname")),p[c.EVENT_TYPE_CLICK][v[k].divToUpdate]=
t.attr("customfunctionname"))}e.config[a].affectedFeatures=d.join(",");e.config[a].clientFeatures=p})};e.startMeasurement=function(a){var f,e;null!=a.divMetaData&&(f=a.divMetaData.dimDisplayType);"undefined"!==typeof a.currentDimCombID&&(e=a.currentDimCombID.split(c.CHAR_UNDERSCORE).length);this.measurement.start(a.newAsin,f,e)};e.fadeInFeatures=function(a){h(this.config[a.mType].affectedFeatures).css({opacity:.5})};e.executeClientFeatures=function(a,f){h.each(e.config[a.mType].clientFeatures[f===
c.EVENT_TYPE_CLICK||f===c.EVENT_TYPE_DROPDOWN_CHANGE?c.EVENT_TYPE_CLICK:c.EVENT_TYPE_MOUSEOVER],function(c,d){try{eval("var twisterCustomFunction = "+d+";"),twisterCustomFunction(a.reactID,DetailPage.StateController,function(){e.measurement.stampImageLoad(a.newAsin)})}catch(f){t.logFatal(f)}})};e.refreshFeature=function(a,c,e){var d,p;try{c&&e&&e.content&&(p=e.content[c],"undefined"!==typeof p&&(d=h("#"+c),d.html(p),d.css({opacity:""})))}catch(v){c=c||"NoFeatureName",t.logFatal(v,{message:" Error in feature "+
c})}this.measurement.stampFeature(c,a)}}});z.when("twister-string-constants").register("page-refresh:meta-cache",function(w){return{data:{},set:function(h,a){var c=this.getKey(h);return c?this.data[c]=a:F},get:function(h){h=this.getKey(h);return this.data[h]||{}},getKey:function(h){var a;h&&h.newAsin&&(a=h.mType===w.MTYPE_PARENT?h.mType+h.newAsin:h.mType===w.MTYPE_MASTER?h.mType+h.id:h.mType+h.newAsin+h.reactID);if(!a)throw"Twister PageRefresh::MetaCache:getKey incorrect context passed.";return a}}});
z.when("A","jQuery").register("page-refresh-ajax-scope",function(w,h){return function(a,c,e){this.scopeName=c;this.url=e;ues("t0",c,E.newTwisterInteractionStartTime);ues("ctb",c,"1");this.signalMarker=function(a){!this.markers[a]||0>=this.markers[a].conditions||0===--this.markers[a].conditions&&"function"==typeof this.markers[a].handler&&this.markers[a].handler()};this.addlongPoleTag=function(a,c){a=a.toLowerCase();this.markers[a]&&0==this.markers[a].conditions&&0==this.markers[a].conditions&&E.ue&&
"function"===typeof ue.tag&&ue.tag(c)};this.postData=function(){var c=this.scopeName;a.ajax({url:this.url,dataType:"text",timeout:4E4,error:function(){},success:function(a,f,e){ues("id",c,a);uex("ld",c)}})};var t=this;this.markers={image:{conditions:1,handler:function(){uet("ne",c);t.signalMarker("af")}},af:{conditions:Twister.atfMarkerCount?Twister.atfMarkerCount:2,handler:function(){uet("af",c);uet("cf",c);t.signalMarker("cf")}},cf:{conditions:Twister.cfMarkerCount?Twister.cfMarkerCount:2,handler:function(){uet("cf",
c);t.postData()}}}}});z.when("A","jQuery").register("page-refresh-cache",function(w,h){return function(){this.data={};this.getValue=function(a,c){return null==this.data[a]?null:c?this.data[a][c]:this.data[a]};this.setValue=function(a,c,e){if(null==this.data[a]||this.data[a].pending)this.data[a]={};this.data[a][c]=e};this.clear=function(a){this.data[a]=null}}});z.when("A","jQuery","page-refresh-refresh","page-refresh-measurement","page-refresh-model","detail-page-framework").register("page-refresh-manager",
function(w,h,a,c,e,t){return function(r,g,f,m,d){this.$=r;this.model={};this.refresh=new a(r,m,d);this.contextMetaData=g;this.measurement=new c(r,f.atfMarker,f.cfMarker);this.init=function(a,d){for(var c in this.contextMetaData)this.model[c]=new e(r,this.contextMetaData[c].AJAXUrl,this.contextMetaData[c].elementList,c.toString());this.measurement.init(a,d)};this.getModelCacheSize=function(a){var d=0;this.model.hasOwnProperty(a)&&r.each(this.model[a].cache.data,function(a,c){c.hasOwnProperty("cacheStatus")&&
("preFetched"!==c.cacheStatus&&"completeFetched"!==c.cacheStatus||d++)});return d};this.react=function(a,d){for(var c in this.model)d||this.model[c].finishAjaxCall(this.model[c].currentRequestId,1);c=0;for(var f=a.length;c<f;c++){var g=a[c];d||this.model[g.type].finishAjaxCall(this.model[g.type].currentRequestId,2);var b=this.model[g.type].getUpdateData(this,g);this.refresh.startRefresh(b);this.model[g.type].makePendingCallBacks()}};this.pageRefreshHandler=function(a,d,c,f){if(!f.noRefresh)for(var g in f.content)try{this.refresh.doRefresh(g,
f.content[g]);if(c.isFinishRefreshReq)if(this.refresh.finishRefresh(g),"session-similarities_feature_div"==g||"purchase-similarities_feature_div"==g||"buyxgety_feature_div"==g){if(t.callbacks[g])t.callbacks[g]()}else"zeroes-buy-box_feature_div"===g&&Twister.isIEBrowser(r)&&r("#"+g).css({opacity:"",zoom:1});this.measurement.stampFeature(d,a)}catch(b){}}}});z.when("A","jQuery","page-refresh-ajax-scope").register("page-refresh-measurement",function(w,h,a){return function(c,e,t){this.atfMarker=e;this.cfMarker=
t;this.scopeCount={};this.ajaxScopes={};this.url="";this.init=function(a,c){this.url="/gp/twister/dynamic-update/ajax-measurement.html/?s="+a+"&pgid="+c+"&deviceType="+Twister.deviceType;Twister.isInstaTwisterEnabled&&(this.url+="&ptd="+Twister.productTypeName)};this.start=function(e,g,f){if(E.ue){this.scopeCount[e]||(this.scopeCount[e]=0);var m=e+(this.scopeCount[e]+1);this.scopeCount[e]++;var d=this.url;g&&(d+="&dimensionType="+g);"undefined"!==typeof f&&(d+="&dimensionCount="+f);this.ajaxScopes[e]=
new a(c,m,d)}};this.stampImageLoad=function(a){this.ajaxScopes[a]&&(this.ajaxScopes[a].signalMarker("image"),Twister.cfImageLongPollTag&&this.ajaxScopes[a].addlongPoleTag("cf",Twister.cfImageLongPollTag))};this.stampFeature=function(a,c){this.ajaxScopes[c]&&(a===this.atfMarker&&this.ajaxScopes[c].signalMarker("af"),a===this.cfMarker&&(this.ajaxScopes[c].signalMarker("cf"),Twister.cfHtmlLongPollTag&&this.ajaxScopes[c].addlongPoleTag("cf",Twister.cfHtmlLongPollTag)))};this.stampCustomMetrics=function(a,
c){this.ajaxScopes[c]&&uet(a,this.ajaxScopes[c].scopeName)}}});z.when("A","jQuery","page-refresh-cache").register("page-refresh-model",function(w,h,a){return function(c,e,t,r){this.$=c;this.pendingCallBacks={};this.pendingCallBacksASIN="";this.cache=new a;this.AJAXUrl=e;this.AJAXRequests={};this.requestIdHash={};this.elementList=t;this.currentRequestId=null;this.pendingCallbacksList={};this.immediateCallbacksList=[];this.elementsToRefresh=[];this.modelType=r;this.getNewRequestId=function(){for(var a=
0;100>a;a++){var c=a.toString();if(!this.requestIdHash.hasOwnProperty(c))return this.requestIdHash[c]=!0,c}};this.removeRequestId=function(a){"string"!=typeof a&&(a=a.toString());this.requestIdHash.hasOwnProperty(a)&&delete this.requestIdHash[a]};this.executeActionItems=function(a,c,e,d,p){e=e.divToUpdate;for(var v=0,l=a.length;v<l;v++){var k=a[v];if("addToImmediate"==k)k={},k.id=c,k.key=e,this.immediateCallbacksList.push(k);else if("addToElementsRefresh"==k||"addToElementsRefreshWithLoading"==k)p.push(e+
("addToElementsRefreshWithLoading"==k?",loadingBar":""));else if("updateCache"==k)k={handler:this,callbackType:"updateCache"},this.addToPendingCallbacksList(c,e,k);else if("customClientFunction"==k){var k={handler:this,callbackType:"customClientFunction"},r={};r.refreshHandler=d;k.callbackParams=r;this.addToPendingCallbacksList(c,e,k)}else if("doRefreshAndFinish"==k||"doRefresh"==k)k={},k.handler=d,k.callbackType="doRefresh",r={isFinishRefreshReq:1},k.callbackParams=r,this.addToPendingCallbacksList(c,
e,k)}};this.getAjaxCallContext=function(a,c,e,d,p,v){c=[];var l=p=0,k="notFetched";this.cache.getValue(a,"cacheStatus")&&(k=this.cache.getValue(a,"cacheStatus"));for(var r=0,b=this.elementList.length;r<b;r++){var x=this.elementList[r],B=x.divToUpdate,q=[],u=1,t=0,h=0,D=0;"0"==x.isPrefetchable&&(u=0,l=1);"1"==x.customClientFunction&&(t=1,u=0);"1"==x.updateOnHover&&(h=1);"1"==x.loadingBar&&(D=1);if(!v||h){if(e)if(t||!u||this.cache.getValue(a,B))continue;else q.push("updateCache"),p||(p=1);else t?(q.push("customClientFunction"),
q.push("addToImmediate")):this.cache.getValue(a,B)?(q.push("doRefresh"),q.push("addToImmediate")):(q.push("updateCache"),q.push("doRefreshAndFinish"),D?q.push("addToElementsRefreshWithLoading"):q.push("addToElementsRefresh"),p||(p=1));(1==e&&"preFetched"==k||0==e&&"completeFetched"==k||1==e&&"completeFetched"==k)&&1==p&&(p=0);this.executeActionItems(q,a,x,d,c)}}(1==e&&"preFetched"==k||0==e&&"completeFetched"==k||1==e&&"completeFetched"==k)&&1==p&&(p=0);v&&p&&(p=0);p&&this.cache.setValue(a,"cacheStatus",
e?l?"preFetching":"completeFetching":"preFetched"==k?"hotFeaturesFetching":"completeFetching");a={};a.isAjaxCallReq=p;a.elementsToRefresh=c;return a};this.getUpdateData=function(a,c){for(var e=c.idList,d=[],p=[],v=[],l=[],k=0,r,b,x,B,q,u=1,t=0,h=e.length;t<h;t++){b=e[t].id;x=e[t].asin;B=e[t].isPrefetch;r=e[t].requiredDivs;r=this.getAjaxCallContext(b,x,B,a,r,e[t].isHover);q=r.elementsToRefresh;for(var D=0,n=q.length;D<n;D++)l.push(q[D]);if(r.isAjaxCallReq){k=1;B=B?1:"hotFeaturesFetching"==this.cache.getValue(b,
"cacheStatus")?2:0;if(0==B||2==B)u=0;p.push(b);v.push(x);d.push(B)}}if(k){e={};e.asinList=v.join(",");e.id=p.join(",");e.prefetchParam=d.join(",");e.managerHandler=a;e.modelType=this.modelType;e.containsOnlyPrefetches=u;try{this.doAjaxCall(e)}catch(y){}}this.elementsToRefresh=l.slice();return l};this.makeCallback=function(a,c,e,d){var p=e.handler,v=e.callbackType;e=e.callbackParams;null==d&&(d=this.cache.getValue(a,c));if("function"==typeof p)p(a,c,e,d);else if("doRefresh"==v)p.pageRefreshHandler(a,
c,e,d);else if("customClientFunction"==v)try{p.callCustomClientFunction(a,c,e,d)}catch(l){}else"updateCache"==v&&p.updateCache(a,c,e,d)};this.makePendingCallBacks=function(a,c,e){var d;if(a){if("object"===typeof this.pendingCallbacksList[a])if(c){d=this.pendingCallbacksList[a][c];if(!d){d=[];var p={handler:this,callbackType:"updateCache"};d.push(p)}for(var v=0,l=d.length;v<l;v++){p=d[v];try{this.makeCallback(a,c,p,e)}catch(k){}}this.pendingCallbacksList[a][c]&&delete this.pendingCallbacksList[a][c]}else{for(p in this.pendingCallbacksList[a])for(d=
this.pendingCallbacksList[a][p],v=0,l=d.length;v<l;v++)this.makeCallback(a,c,callbackargs,e);delete this.pendingCallbacksList[a]}}else{a=0;for(l=this.immediateCallbacksList.length;a<l;a++)c=this.immediateCallbacksList[a],this.makePendingCallBacks(c.id,c.key,null);this.immediateCallbacksList=[]}};this.addToPendingCallbacksList=function(a,c,e){this.pendingCallbacksList.hasOwnProperty(a)||(this.pendingCallbacksList[a]={});this.pendingCallbacksList[a].hasOwnProperty(c)||(this.pendingCallbacksList[a][c]=
[]);this.pendingCallbacksList[a][c].push(e)};this.doAjaxCall=function(a){Twister.useVariationsOverlay&&0===Twister.remainingAjaxCalls&&Twister.$("#variations-overlay").show();Twister.remainingAjaxCalls+=1;var c=this.getNewRequestId();this.currentRequestId=c;var e=a.managerHandler,d=this.AJAXUrl+a.asinList+"&isFlushing=2&id="+a.id+"&prefetchParam="+a.prefetchParam+"&mType="+a.modelType;Twister.isInstaTwisterEnabled&&(d+="&dpEnvironment="+Twister.dpEnvironment);var p={};if(Twister.useAuiAjax){var v=
this,d=Twister.A.ajax(d,{method:"get",chunk:function(a){v.AJAXHandler(null,a,AJAXFlushUtils.ajaxReadyState.LOADING)},success:function(){v.AJAXHandler(null,null,AJAXFlushUtils.ajaxReadyState.DONE);--Twister.remainingAjaxCalls;0===Twister.remainingAjaxCalls&&Twister.$("#variations-overlay").hide()},error:function(){Twister.$("#variations-overlay").hide();--Twister.remainingAjaxCalls;Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());Twister.printConsoleLogs&&
console.logs("ajax call failed")},timeout:4E4});p.streamingXhrRef=d}p.ajaxParams=a;p.managerHandler=e;this.AJAXRequests[c]=p};this.abortAllAjaxCalls=function(){for(requestId in this.requestIdHash)this.finishAjaxCall(requestId,!0)};this.finishAjaxCall=function(a,c){if(a){var e=this.AJAXRequests[a],d=e.streamingXhrRef,p=e.ajaxParams,e=p.id.split(","),p=p.containsOnlyPrefetches;if(1!=c||!p){this.pendingCallbacksList={};this.immediateCallbacksList=[];if(c)for(d&&"function"===typeof d.abort&&d.abort(AJAXFlushUtils.ajaxHandlerCode.ABORT),
d=0,p=e.length;d<p;d++)if(this.cache.getValue(e[d])){var v=this.cache.getValue(e[d],"cacheStatus");"preFetching"==v||"completeFetching"==v?c?this.cache.clear(e[d]):this.cache.setValue(e[d],"cacheStatus","preFetching"==v?"preFetched":"completeFetched"):"hotFeaturesFetching"==v&&this.cache.setValue(e[d],"cacheStatus",c?"preFetched":"completeFetched")}this.elementsToRefresh=[];this.removeRequestId(a);delete this.AJAXRequests[a];this.currentRequestId=null}}};this.updateCache=function(a,c,e,d){"intermediateEOS"==
c||"EOS"==c?(c=this.cache.getValue(a,"cacheStatus"),"preFetching"==c?this.cache.setValue(a,"cacheStatus","preFetched"):"completeFetching"!=c&&"hotFeaturesFetching"!=c||this.cache.setValue(a,"cacheStatus","completeFetched")):this.cache.setValue(a,c,d)};this.callCustomClientFunction=function(a,f,e,d){var p=c("#"+f).attr("customFunctionName");if(p){var v=e.refreshHandler,l=DetailPage.StateController.getState().current_asin;d=function(){v.measurement.stampImageLoad(l)};e=Twister.useAui?d:null;if(p=Twister.useAui?
eval("var customFunction = "+p+"; customFunction")(a,DetailPage.StateController,e):eval(p)(a,DetailPage.StateController,e)){e={isFinishRefreshReq:0};if(!Twister.useAui){var k;if("twister-main-image"==f&&l){k=document.getElementById("main-image");if(!k){var r=document.getElementById("main_image_0");r&&(k=(k=r.getElementsByTagName("img"))?k[0]:null)}k&&(k.onload=d)}}v.pageRefreshHandler(a,f,e,p);Twister.useAui||-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&k&&k.complete&&d()}}};this.AJAXHandler=
function(a,c,e){if(e==AJAXFlushUtils.ajaxReadyState.DONE)return this.finishAjaxCall(this.currentRequestId,0),AJAXFlushUtils.ajaxHandlerCode.OK;for(a=0;1>a;a++){var d=c;e=d.ASIN;c=d.Value;d=d.FeatureName;"intermediateEOS"==d||"EOS"==d?this.updateCache(e,d,null,c):this.makePendingCallBacks(e,d,c)}return AJAXFlushUtils.ajaxHandlerCode.OK};this.AJAXErrorHandler=function(a,c,e){(a=a.xhrStatus)||(a=e);return a}}});z.when("A","jQuery").register("page-refresh-refresh",function(w,h){return function(a,c,e){this.$=
a;this.loadingBarHtml=c;this.loadingBarHtml2=e;this.doRefresh=function(c,e){a("#"+c).html(e)};this.startRefresh=function(c){if(c)for(var e=0,g=c.length;e<g;e++){var f=c[e].split(","),m=f[0],d=!0,p=!1;if("buy-box_feature_div"==m||"more-buying-choices_feature_div"==m||"session-similarities_feature_div"==m&&a.browser.msie)d=!1;1<f.length&&"loadingBar"==f[1]&&(p=!0);d&&!Twister.useVariationsOverlay&&a("#"+m).css("opacity","0.5");p&&this.appendLoadingBar(m)}};this.appendLoadingBar=function(c){var e=a("#"+
c);"moreBuyingChoices_feature_div"==c||e.attr("loadingBarSet")||(e.attr("loadingBarSet","1"),"more-buying-choices_feature_div"==c?(e=a("#more-buying-choice-content-div"),e.html(this.loadingBarHtml2)):(c=e.find("h2, h1, b"),0<c.length&&(c=a(c[0]),c.css({display:"inline",padding:"0px"}),c.after(a(this.loadingBarHtml)))))};this.finishRefresh=function(c){var e=!0,g=!0;"buy-box_feature_div"==c&&(g=e=!1);if("session-similarities_feature_div"==c&&a.browser.msie||"more-buying-choices_feature_div"==c)e=!1;
var f="0";"more-buying-choices_feature_div"==c&&(f="1");e&&a("#"+c).css({opacity:"",zoom:f});g&&a("#"+c).removeAttr("loadingBarSet")}}});z.when("A").register("evdd-utils",function(w){return function(){this.PopulateEVDD=function(h,a,c,e){var t={},r,g;for(r in h)g=c[r],"undefined"!=typeof g&&(masterDimValIndex=g[0],slaveDimValIndex=g[1],e==masterDimValIndex&&(t[slaveDimValIndex]=h[r]));"function"===typeof a.dimensionViewHandlersMap[1].updateViewWithPriceInfo&&a.dimensionViewHandlersMap[1].updateViewWithPriceInfo(t)}}});
z.when("A","jQuery","dp-js-logger").register("dp-ajax-prefetch-metrics",function(w,h,a){function c(a){this.scope="dpPre"+a;this.data={}}new a("PrefetchMetrics");c.prototype._count=function(a,c){var r=this.scope+a,g;E.ue&&E.ue.count&&(g="undefined"!==typeof c?(g=ue.count(r,c))||c:(g=ue.count(r))||0);return g};c.prototype._incrementCounter=function(a){this._count(a,(this._count(a)||0)+1)};c.prototype._record=function(a,c,r){this.data[c]=this.data[c]||{};this.data[c][a]||(this.data[c][a]=r||(new Date).getTime(),
"predicted"==a?this._incrementCounter("Predicted"):"selected"==a&&this.data[c].predicted?(a=this.data[c].selected-this.data[c].predicted,this.data[c].lookahead=a,this._incrementCounter("PredictedSelect"),this._count("LookAhead"+this._count("PredictedSelect"),a),this._count("LookAhead",a)):"selected"!=a||this.data[c].predicted||this._incrementCounter("UnpredictedSelect"))};c.prototype.setCounter=function(a,c){this._count(a,c)};c.prototype.predicted=function(a,c){this._record("predicted",a,c)};c.prototype.selected=
function(a,c){this._record("selected",a,c)};c._allInstances={};c.getInstance=function(a){if(!a)throw"Undefind scope. scope is a required parameter";c._allInstances[a]||(c._allInstances[a]=new c(a));return c._allInstances[a]};return c});z.when("A").register("scroll-event-handler",function(w){return function(h,a,c){if(a){var e=w.$,t,r=(new Date).getTime();e(a).bind("scroll",function(a){var f=Date.now();t&&f-r<h&&clearTimeout(t);r=f;t=setTimeout(function(){c(a)},h)})}}});z.when("A","twister-utils","twister-string-constants",
"legacy-popover").register("twister-beaconized-evdd",function(w,h,a){return function(c,e){function t(){var a=8+p(v).height(),a={localContent:l,location:"bottom",showOnHover:!1,showCloseButton:!1,skin:null,clone:!1,controlCallbacks:!0,locationOffset:[-2,-a],closeEventInclude:"CLICK_OUTSIDE",forceAlignment:!0,group:"DonsBoxDropDowns",width:null};b=p(v).amazonPopoverTrigger(a);p(document).bind("touchend click",function(){B=!1;b.amznPopoverHide()})}function r(a){B=!0;a=a.currentTarget.id.split("_");twisterController.handleClick({dimIndex:d.dimOrder,
dimValueIndex:a[a.length-1]});B&&(b.amznPopoverHide(),B=!1);return!1}function g(b){p(b.currentTarget).addClass("evdd-row-hovered")}function f(b){p(b.currentTarget).removeClass("evdd-row-hovered");return!1}function m(b){p(b.currentTarget).removeClass("evdd-row-hovered");r(b);return!1}var d=this,p=w.$,v,l,k,A,b,x={},B=!1;d.dimType="evdd";d.dimNameDisplayString;d.dimData;d.dimensionsMap;d.dimNameDisplayString;d.dimValuesDisplayData;d.dimName;d.dimOrder;d.isMasterDim=!1;d.updateView=function(a){var c=
h.getDimStyleData(a.dimCombID,d.dimValuesDisplayData.length,d.dimOrder,d.twisterControllerHandle.twisterAvailabilityCache,d.displayConfigStylesData),f,g,e,n=-1;a=0;n="";b.amznPopoverHide();B=!1;for(var l=0,m=c.length;l<m;l++)f=c[l],g=x[f.style],e="#"+d.dimName+"_"+l,"evdd-row-selected"===g&&(n=l,n=d.dimValuesDisplayData[n]),"available"!==f.style&&"selected"!==f.style||a++,$rowElement=p(e),$rowElement.removeClass(A).addClass(g),$rowElement.find(".evdd-row-snake-wrapper").show(),$rowElement.find(".evdd-row-price-info-wrapper").html(""),
$rowElement.find(".evdd-row-prime-badge-wrapper").html("");c=!1;d.isMasterDim||1!==a||(c=!0);a=c;p(v).find("button").text(n);p(k).text(n);a?(p(v).addClass("evdd-hidden"),p(k).removeClass("evdd-hidden")):(p(k).addClass("evdd-hidden"),p(v).removeClass("evdd-hidden"))};d.updateViewWithPriceInfo=function(b){var a,c,f;for(a in b)c=b[a],f="#"+d.dimName+"_"+a,f=p(f),f.find(".evdd-row-snake-wrapper").hide(),f.find(".evdd-row-price-info-wrapper").html(c[2]),f.find(".evdd-row-prime-badge-wrapper").html(c[3])};
(function(){var b;d.dimOrder=e[a.STRING_DIM_ORDER];d.dimName=e[a.STRING_DIM_NAME];d.dimensionsMap=e[a.STRING_DIMENSIONS_MAP];d.dimNameDisplayString=e[a.STRING_DIMENSION_DISPLAY_STRING];d.dimValuesDisplayData=e[a.STRING_DIMENSION_VALUES_DATA];d.displayConfigStylesData=e[a.STRING_DISPLAY_CONFIG_STYLES_DATA];d.twisterControllerHandle=e[a.STRING_TWISTER_CONTROLLER_HANDLE];d.initialTwisterState=e[a.STRING_TWISTER_INITIAL_STATE_KEY];b=d.initialTwisterState.getCurrentDimCombID();d.dimData=h.getDimStyleData(b,
d.dimValuesDisplayData.length,d.dimOrder,d.twisterControllerHandle.twisterAvailabilityCache,d.displayConfigStylesData);d.isMasterDim=!1;"0"===d.dimOrder&&(d.isMasterDim=!0);d.dimNameDisplayString=e[a.STRING_DIMENSION_DISPLAY_STRING];v="#evdd-button-"+d.dimName;l="#evdd-table-wrapper-"+d.dimName;k="#evdd-singleton-"+d.dimName;x.invalid=d.isMasterDim?"evdd-row-default":"evdd-row-hidden";x.available="evdd-row-default";x.selected="evdd-row-selected";A="evdd-hidden evdd-row-hovered evdd-row-hidden evdd-row-default evdd-row-selected";
t();for(var c=0,B=d.dimData.length;c<B;c++)b="#"+d.dimName+"_"+c,p(b).bind("click",r).bind("touchend",m).bind("touchstart",g).bind("mouseenter",g).bind("mouseleave",f)})()}});z.when("A","twister-variations-data","twister-view","twister-model","twister-model-new","twister-state","twister-availabilty-cache","twister-utils","evdd-utils","twister-logger","dp-js-logger").register("twister-controller",function(w,h,a,c,e,t,r,g,f,m,d){return function(p,v){var l=this,k=w.$;l.logger=new m(k,this);l.logger.init();
l.twisterJSInitData=v;l.pageRefreshRefactor=v.pageRefreshRefactor;l.twisterVariationsData=new h(v);l.twisterAvailabilityCache=new r(l.twisterVariationsData);l.initTwisterState=new t(v,l.twisterVariationsData,l.twisterAvailabilityCache);l.twisterView=new a(l,l.initTwisterState,v,l.twisterVariationsData,l.twisterAvailabilityCache);l.twisterModel=l.pageRefreshRefactor?new e(l,v,l.twisterVariationsData):new c(l,p,v,l.twisterVariationsData,l.twisterAvailabilityCache);(function(){k(".variations .swatchOuter a").each(function(){var b=
jQuery(l).contents();k(l).replaceWith(b)});if("undefined"!==typeof TwisterNonJs)for(var a=TwisterNonJs.handleDropDown.length,b=0;b<a;b++)TwisterNonJs.handleDropDown[b]=function(){};k("#twister .swatches a").remove();k("#twisterNonJsData").html("");l.jsInteractionEnabledTime=Date.now()})();l.onInitializeTwister=function(){"undefined"!==typeof l.twisterView.dimensionViewHandlersMap&&l.twisterView.dimensionViewHandlersMap&&k.each(l.twisterView.dimensionViewHandlersMap,function(a,b){if("function"===typeof b.onInitializeTwister)b.onInitializeTwister()})};
l.populateEVDD=function(a){var b=this.twisterView,d=this.twisterVariationsData.asinToDimIndexMapData,c=this.twisterModel.twisterState.getMaster();a&&(new f).PopulateEVDD(a,b,d,c)};l.handleClick=function(a){this.divMetaData=a;var b=l.initTwisterState.getCurrentDimCombID(),d=g.reconstructCombinationWithDimValue(b,a.dimIndex,a.dimValueIndex);E.newTwisterInteractionStartTime=new Date;E.ue&&ue.tag&&ue.tag("twisterSwatchClick");g.isSwatchSelected(a,l.twisterVariationsData)||b===d||(this.enableMouseOut=
0,this.twisterModel.handleClick(a),l.twisterAvailabilityCache.isDimCombinationAvailable(d)||l.logger.logImpression(l.logger.eventTypes.CLICK_NA,null))};l.handleClickPrediction=function(a,b){this.twisterModel.prefetch(a,b)};l.handleExternalViewClick=function(a,b){try{l.handleClick(a)}catch(c){(new d(b)).logFatal(c,{message:"[Failed to hand over click event of external view]"})}};l.handleMouseOver=function(a){if("undefined"!=typeof touchDeviceDetected&&touchDeviceDetected)return this.handleClick(a),
!0;this.enableMouseOut=1;this.twisterModel.handleMouseOver(a);return!0};l.handleExternalViewMouseOver=function(a,b){try{l.handleMouseOver(a)}catch(c){(new d(b)).logFatal(c,{message:"[Failed to hand over mouse over event of external view]"})}};l.handleMouseOut=function(a,b,d){1===this.enableMouseOut&&this.twisterModel.handleMouseOut(a,b,d)};l.handleExternalViewMouseOut=function(a,b,c,f){try{l.handleMouseOut(a,b,c)}catch(q){(new d(f)).logFatal(q,{message:"[Failed to hand over mouse out event of external view]"})}};
l.handleDropdownOnChange=function(a,b){b.dimValueIndex=parseInt(a.value.split(",")[0]);E.newTwisterInteractionStartTime=new Date;E.ue&&ue.tag&&ue.tag("twisterDDClick");this.twisterModel.twisterState.setPreHoverData(b);this.twisterModel.handleDropdownChange(b)};l.registerExternalView=function(a,b){l.twisterModel.registerExternalView(a,b)}}});z.when("A","twister-shelf","twister-counter","twister-vodd","twister-beaconized-evdd","twister-native-evdd","twister-dimension-views-swatch","twister-dimension-views-dropdown",
"twister-IMDD","twister-dimension-views-singleton","twister-string-constants").register("twister-dimension-view-factory",function(w,h,a,c,e,t,r,g,f,m,d){var p=w.$;return{getDimensionSubViewObject:function(v,l,k,A,b){var x,B=v.dimensionsDisplayType[k],q=v.dimensionsDisplaySubType[k],u=v.dimensions[k],C=v.dimensions,G=v.dimensionsDisplay[k],D=p.isArray(Twister.isImmersiveViewEnabled)?Twister.isImmersiveViewEnabled[k]:!1;dimensionValuesData=l.dimensionValuesData[k];displayConfigStylesData=l.displayConfigStylesData[B];
maxSwatchesForImmersiveView=v.maxSwatchesForImmersiveView[k];B===d.TWISTER_DIMENSION_VIEW_SWATCH?x=r:B===d.TWISTER_DIMENSION_VIEW_DROPDOWN?x=D?f:g:B===d.TWISTER_DIMENSION_VIEW_SINGLETON?x=m:B===d.TWISTER_DIMENSION_VIEW_EVDD?x=p("html").hasClass("a-lt-ie8")?t:e:B===d.TWISTER_DIMENSION_VIEW_VODD?x=c:B===d.TWISTER_DIMENSION_VIEW_COUNTER?x=a:B===d.TWISTER_DIMENSION_VIEW_SHELF&&(x=h);l=dimensionValuesData;var B=displayConfigStylesData,D=maxSwatchesForImmersiveView,n={};n[d.STRING_DIM_ORDER]=k;n[d.STRING_DIM_NAME]=
u;n[d.STRING_DIMENSIONS_MAP]=C;n[d.STRING_DIMENSION_DISPLAY_STRING]=G;n[d.STRING_DIMENSION_VALUES_DATA]=l;n[d.STRING_DISPLAY_CONFIG_STYLES_DATA]=B;n[d.STRING_TWISTER_CONTROLLER_HANDLE]=A;n.isImmersiveViewEnabled=p.isArray(Twister.isImmersiveViewEnabled)?Twister.isImmersiveViewEnabled[k]:Twister.isImmersiveViewEnabled;n.isSlotsEnabled=p.isArray(Twister.isSlotsEnabled)?Twister.isSlotsEnabled[k]:Twister.isImmersiveViewEnabled;n[d.STRING_TWISTER_INITIAL_STATE_KEY]=b;n[d.STRING_MAX_SWATCHES_IMMERSIVE_VIEW]=
D;n.dimensionDisplaySubType=q;return new x(v,n)}}});z.when("A").execute(function(){"function"===typeof uet&&uet("bb","clickToTwister",{wb:1})});z.when("twisterModule").execute(function(w){"function"===typeof uex&&"function"===typeof uet&&(uet("be","clickToTwister",{wb:1}),uet("be","TwisterAUIWait",{wb:1}),uex("ld","clickToTwister",{wb:1}),uex("ld","TwisterAUIWait",{wb:1}))});z.when("A","twister-js-init-mason-data","twister-js-init-dpx-data","twister-controller","page-refresh-manager","dimensional-summary-module").execute(function(w,
h,a,c,e,t){function r(){"undefined"!=typeof amznJQ?amznJQ.declareAvailable("newTwister"):z.register("newTwister",function(){return E.newTwister});z.register("twisterModule",function(){return{getState:function(){return DetailPage.StateController.getState()}}});"undefined"!=typeof amznJQ?(amznJQ.declareAvailable("pageRefreshJS"),amznJQ.declareAvailable("dpf")):(z.register("pageRefreshJS",function(){return E.pageRefreshJS}),z.register("dpf",function(){return E.pageRefreshJS}))}function g(a){var d={};
a.extend(d,{ajaxReadyState:{NONE:-1,UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},ajaxHandlerCode:{OK:0,IGNORE:1,RETRY:2,RELOAD:3,TIMEOUT:4,ABORT:5,FATAL:6,INVALID_RESP:7,INCOMPLETE_RESP:8,PAGELET_FATAL:9,DEBUG_NOAJAX:10},serverCode:{ERROR:-1,OK:200,TIMEOUT:408},shouldReload:function(a){return!1}});E.AJAXFlushUtils=d}E.Twister={};var f=E.Twister;f.$=w.$;f.DimensionViews={};w.on.ready(function(){f.A=w;if(!w.$.isEmptyObject(a)){var m=a.updateDivLists;f.dpEnvironment=a.dpEnvironment;f.isInstaTwisterEnabled=
!0;f.productTypeName=h.productTypeName;f.isImmersiveViewEnabled=a.isImmersiveViewEnabledOnDim?a.isImmersiveViewEnabledOnDim:a.isImmersiveViewEnabled;f.isSlotsEnabled=a.isSlotsEnabled;f.isImmersiveViewEnabledOnPage=a.isImmersiveViewEnabled;f.isImmersiveExperience=a.isImmersiveExperience?a.isImmersiveExperience:a.isImmersiveViewEnabled;f.multiDimensionWeblabEnabled=a.multiDimensionWeblabEnabled?a.multiDimensionWeblabEnabled:!1;f.immersivePartialStateMessage=a.immersivePartialStateMessage?a.immersivePartialStateMessage:
"";f.immersiveFullySelectedStateMessage=a.immersiveFullySelectedStateMessage?a.immersiveFullySelectedStateMessage:"";f.immersiveBannersPresent=a.immersiveBannersPresent?a.immersiveBannersPresent:!1;f.globalAjaxParameters={};var d=h.contextMetaData,p=d.full,v=d.master,l=d.parent,d=d.partial;h.dimensionSelectionData=a.dimensionSelectionData;h.dimensionsDisplayType=a.dimensionsDisplayType;h.dimensionsDisplaySubType=a.dimensionsDisplaySubType?a.dimensionsDisplaySubType:[];h.ajaxUrlParams=a.ajaxUrlParams;
h.displayTypeProperties=a.displayTypeProperties?a.displayTypeProperties:[];h.maxSwatchesForImmersiveView=a.maxSwatchesForImmersiveView?a.maxSwatchesForImmersiveView:[];"counter"===h.dimensionsDisplayType[0]&&"undefined"===typeof a.displayTypeProperties[0].expandedViewEnabled&&(h.useCounterConfig=!0,h.expandedViewEnabled=a.expandedViewEnabled?a.expandedViewEnabled:[],h.minAsinForExpandedView=a.minAsinForExpandedView?a.minAsinForExpandedView:[],h.minAsinForExpandedScroll=a.minAsinForExpandedScroll?
a.minAsinForExpandedScroll:[]);if("undefined"!==typeof a.twisterUpdateURLAppend){var k=h.twisterUpdateURLInfo,A=k.immutableURLPrefix,b=k.immutableParams,x=a.twisterUpdateURLAppend.immutableParams,B;for(B in x)if("function"!==typeof x.hasOwnProperty||x.hasOwnProperty(B))A+=(-1==A.indexOf("?")?"?":"&")+B+"="+x[B],b[B]=x[B];k.immutableURLPrefix=A;f.globalAjaxParameters=x}a.shouldUseDPXTwisterData&&(h.dimToAsinMapData=a.dimensionToAsinMap,h.asinToDimIndexMapData=a.asinToDimensionIndexMap,h.dimensionValuesData=
a.dimensionValuesData,h.variation_values=a.variationValues,h.asin_variation_values=a.asinVariationValues,h.reactId=a.reactId,h.currentDimCombID=a.currentDimensionCombinationId,h.selected_variation_values=a.selectedVariationValues,h["use-early-twister-init"]&&(h.current_asin=a.currentAsin,h.parent_asin=a.parentAsin,h.deletedLandingAsinInfo=a.deletedLandingAsinInfo,h.num_total_variations=a.num_total_variations,h.dimensions=a.dimensions,h.unselectedDimCount=a.unselectedDimCount,h.selected_variations=
a.selected_variations,h.dimensionValuesDisplayData=a.dimensionValuesDisplayData,h.prirotizeReqPrefetch=a.prioritizeReqPrefetch,h.num_variation_dimensions=a.num_variation_dimensions,h.num_total_variations=a.num_total_variations,h.dimensionsDisplay=a.dimensionsDisplay,h.variationDisplayLabels=a.variationDisplayLabels));null!=m.full&&(p.elementList=null!=p.elementList?m.full.concat(p.elementList):m.full);null!=m.master&&(v.elementList=null!=v.elementList?m.master.concat(v.elementList):m.master);null!=
m.parent&&(l.elementList=null!=l.elementList?m.parent.concat(l.elementList):m.parent);null!=m.partial&&(d.elementList=null!=d.elementList?m.partial.concat(d.elementList):m.partial)}m=h.isTablet;E.twisterInitPrefetchMode=h.twisterInitPrefetchMode;E.jqupgrade=h.jqupgrade;f.useDropdownThumbnail=m;f.useVariationsOverlay=m;f.showErrorMessageOnFailure=m;f.remainingAjaxCalls=0;f.errorMessageOnFailure="We are sorry.  Amazon has encountered an error.  Please try again.";f.isLoggingEnabled=h.isLoggingEnabled;
f.printConsoleLogs=h.printConsoleLogs;f.deviceType=h.deviceType;f.useAui=1;f.useAuiAjax=1;m=h.measurement.atf.marker;f.atfMarkerCount=h.measurement.atf.count;p=h.measurement.cf.marker;f.cfMarkerCount=h.measurement.cf.count;f.disableJsInteractions=h.disableJsInteractions?h.disableJsInteractions:!1;f.cfImageLongPollTag=h.measurement.cf.longPollImageTag;f.cfHtmlLongPollTag=h.measurement.cf.longPollHtmlTag;m=new e(w.$,h.contextMetaData,{atfMarker:m,cfMarker:p,logChannel:"twister"},h.loadingBarHtml,h.loadingBarHtml2);
E.twisterController=new c(m,h);m={};m.dimensionsList=h.dimensions;m.dimensionValuesList=h.dimensionValuesData;m.dimensionCombinationToASINMap=h.dimToAsinMapData;m.scopeSuffix="twister";m.globalAjaxParameters=f.globalAjaxParameters;f.dimensionalSummaryModule=new t(m);g(w.$);r();if("function"===typeof E.twisterController.onInitializeTwister)E.twisterController.onInitializeTwister()});f.isIEBrowser=function(a){return a.browser.msie||!!navigator.userAgent.match(/Trident/)};f.isIE8=function(){var a=f.A.$;
return a("html").hasClass("a-lt-ie9")};return f});z.when("A","twister-state","twister-utils","detail-page-framework","twister-string-constants","dp-js-logger").register("twister-model",function(w,h,a,c,e,t){return function(e,g,f,m,d){function p(a,d,c){d=0;try{for(;d<b.externalViews.length;)b.externalViews[d].updateView(a,b.twisterState,c),d++}catch(f){(new t(externalViewNames[d])).logFatal(f,{message:"[Failed to update external view from TwisterModel]"})}}function v(a){var d,c,f,g,k,e=b.twisterState.parentASIN,
n;a?(d=b.twisterState.reactId,c=b.twisterState.hoveredReactId,f=b.twisterState.unselectedDimCount,g=0<=b.twisterState.hoveredDimCombID.search(/X/)?1:0,k=b.twisterState.hoveredAsin):(d=b.twisterState.previousReactId,c=b.twisterState.reactId,f=b.twisterState.previousPartialState,g=b.twisterState.partialState,k=b.twisterState.getCurrentASIN());n=b.twisterVariationsData.asinToDimIndexMapData[k];b.twisterVariationsData.useMS&&n&&k&&l(b.fetchMasterIDList,"m"+n[0],k,0,a);0===g?(l(b.fetchFullIDList,k,k,0,
a),b.prioritizeReqPrefetch=0):0===f?(l(b.fetchPartialIDList,c,k,0,a),l(b.fetchParentIDList,e,e,0,a),b.prioritizeReqPrefetch=1):d!==c&&l(b.fetchPartialIDList,c,k,0,a)}function l(a,d,c,f,g){g||(g=0);1!=b.idsList[d]&&d&&c&&(!b.prefetchFixWeblab||c!==b.twisterState.parentASIN||"full"!==a.type)&&a&&(b.idsList[d]=1,a.data.push({id:d,asin:c,isPrefetch:f,isHover:g}))}function k(a){a||(a=0);var d=[];0<b.fetchParentIDList.data.length&&d.push({type:"parent",idList:b.fetchParentIDList.data});0<b.fetchPartialIDList.data.length&&
d.push({type:"partial",idList:b.fetchPartialIDList.data});0<b.fetchFullIDList.data.length&&d.push({type:"full",idList:b.fetchFullIDList.data});0<b.fetchMasterIDList.data.length&&d.push({type:"master",idList:b.fetchMasterIDList.data});0<d.length&&(a||b.pageRefresh.measurement.stampCustomMetrics("ns",b.twisterState.currentASIN),b.pageRefresh.react(d,a));b.fetchParentIDList.data=[];b.fetchPartialIDList.data=[];b.fetchFullIDList.data=[];b.fetchMasterIDList.data=[];b.idsList={};b.prefetchCount=0}function h(d,
c){for(var q={},f="",g=0;g<c.length;g++)f=null,b.twisterState.isDimSelected(g)&&(f=c[g],"(Please Select)"===f&&(f=null)),null!==f&&(f=a.htmlUnescape(f)),q[b.viewHandle.dimensionsMap[g]]=f;DetailPage.StateController.setState(d+"_variations",q)}var b=this;b.twisterControllerHandle=e;b.pageRefresh=g;b.twisterJSInitData=f;b.twisterVariationsData=m;b.twisterAvailabilityCache=d;b.twisterState;b.prefetchCount=0;b.preHoverClass="";b.fetchParentIDList={type:"parent",data:[]};b.fetchPartialIDList={type:"partial",
data:[]};b.fetchFullIDList={type:"full",data:[]};b.fetchMasterIDList={type:"master",data:[]};b.idsList={};b.prefetchFixWeblab=0;b.prioritizeReqPrefetch=0;b.externalViews=[];b.externalViewNames=[];b.registerExternalView=function(a,d){try{b.externalViews.push(a),b.externalViewNames.push(d)}catch(c){(new t(d)).logFatal(c,{message:"[Failed to register external view with TwisterModel]"})}};b.handleMouseOver=function(d){var c;null!==d&&(b.twisterState.updateStateOnMouseOver(d),!a.isSwatchSelected(d,b.twisterVariationsData)||
b.twisterVariationsData.useMS)&&(c=b.twisterVariationsData.getDimensionValuesDisplayData(b.twisterState.hoveredAsin),b.twisterVariationsData.useMS||h("hovered",c),this.viewHandle.updateView(d,b.twisterState,"mouseOver"),p(d,b.twisterState,"mouseOver"),v(1),k(1))};b.handleDropdownChange=function(a){b.handleClick(a)};b.handleClick=function(d,f,q){var g=q?"mouseOut":"click",e,l,m=0;e=f;l=b.twisterState.getCurrentASIN();b.twisterVariationsData.useMS&&d&&a.isSwatchSelected(d,b.twisterVariationsData)&&
(m=1);q||(q=0);if(null!==e||null!==d)if(e=b.twisterState.updateStateOnClick(d,f,g)){e=b.twisterState.getCurrentASIN();if(!q&&l!==e&&!b.twisterState.partialState&&c.callbacks["sims-widget_feature_div"])c.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());b.twisterState.partialState||q||b.pageRefresh.measurement.start(e);l=b.twisterVariationsData.getDimensionValuesDisplayData(e);h("selected",l);h("hovered",l);b.twisterState.partialState||q||b.pageRefresh.measurement.stampCustomMetrics("bb",
e);b.viewHandle.updateView({},b.twisterState,g);p(d,b.twisterState,g);b.twisterState.partialState||q||b.pageRefresh.measurement.stampCustomMetrics("be",e);1!==m&&(v(q),k(q))}};b.handleMouseOut=function(d,c,q){c=b.twisterState.getCurrentASIN();!b.twisterVariationsData.useMS&&a.isSwatchSelected(d,b.twisterVariationsData)||b.handleClick(null,c,1)};(function(){var a;b.twisterJSInitData&&(b.twisterState=b.twisterControllerHandle.initTwisterState,b.MAX_PREFETCH_COUNT=b.twisterJSInitData.prefetchCount,b.prioritizeReqPrefetch=
b.twisterJSInitData.prioritizeReqPrefetch,b.prefetchFixWeblab=b.twisterJSInitData.prefetchFixWeblab,a=b.twisterState.getCurrentASIN(),a=b.twisterVariationsData.getDimensionValuesDisplayData(a),b.viewHandle||(b.viewHandle=b.twisterControllerHandle.twisterView),h("selected",a),h("hovered",a));b.pageRefresh.init(b.twisterJSInitData.storeID,b.twisterJSInitData.productGroupID)})()}});z.when("A","jQuery","twister-state","twister-utils","twister-string-constants","page-refresh:controller","accessibility-helper",
"dp-js-logger").register("twister-model-new",function(w,h,a,c,e,t,r,g){return function(a,m,d){function p(a,d,c){d=0;try{for(;d<b.externalViews.length;)b.externalViews[d].updateView(a,b.twisterState,c),d++}catch(f){(new g(externalViewNames[d])).logFatal(f,{message:"[Failed to update external view from TwisterModel]"})}}function v(a,d,q,f){function g(a){var d=[];a.variation_label_order.forEach(function(b){a.selected_variations[b]&&d.push(a.variation_display_labels[b]+" = "+a.selected_variations[b])});
return b.twisterJSInitData[e.STRING_ACCESSIBILITY_CURRENT_SELECTION]+d.join(" , ")}if(d&&!b.twisterVariationsData.useMS&&c.isSwatchSelected(d,b.twisterVariationsData))return!1;if(b.twisterState.updateStateOnClick(d,q,f,a)){q=b.twisterVariationsData.getDimensionValuesDisplayData(q);k(f);h("selected",q);h("hovered",q);b.viewHandle.updateView({},b.twisterState,f);p(d,b.twisterState,f);switch(f){case e.EVENT_TYPE_DROPDOWN_CHANGE:case e.EVENT_TYPE_CLICK:d=g(DetailPage.StateController.getState()),r.announceText(d)}Twister.disableJsInteractions?
f!==e.EVENT_TYPE_CLICK&&f!==e.EVENT_TYPE_DROPDOWN_CHANGE||t.reloadPage(a):t.updatePage(a,f);return!0}}function l(a,d,c,f,k){if(a&&1<b.twisterVariationsData.dimensionsMap.length){b.viewHandle.updateViewAfterTwisterUpdate(c,b.twisterState,k);a=0;try{for(;a<b.externalViews.length;)b.externalViews[a].updateViewAfterTwisterUpdate(c,b.twisterState,k),a++}catch(e){(new g(externalViewNames[a])).logFatal(e,{message:"[Failed to update external view after twister update from TwisterModel]"})}}}function k(a){if(a==
e.EVENT_TYPE_CLICK||a==e.EVENT_TYPE_DROPDOWN_CHANGE){a=b.twisterState.getCurrentDimCombID().split("_");for(var d={},c=0,f=b.twisterState.dimensionSelectionData.length;c<f;c++)d[b.twisterState.twisterJSInitData.dimensions[c]]="1"==b.twisterState.dimensionSelectionData[c].isRequired&&"0"==b.twisterState.dimensionSelectionData[c].isSelected&&"X"===a[c]?"-1":a[c];DetailPage.StateController.setState("selected_variation_values",d)}}function h(a,d){for(var c={},f="",g=0;g<d.length;g++)f=null,b.twisterState.isDimSelected(g)&&
(f=d[g],"(Please Select)"===f&&(f=null)),c[b.viewHandle.dimensionsMap[g]]=f;DetailPage.StateController.setState(a+"_variations",c)}var b=this;b.twisterControllerHandle=a;b.twisterJSInitData=m;b.twisterVariationsData=d;b.pageRefresh=t.page;b.twisterState;b.externalViews=[];b.externalViewNames=[];b.registerExternalView=function(a,d){try{b.externalViews.push(a),b.externalViewNames.push(d)}catch(c){(new g(d)).logFatal(c,{message:"[Failed to register external view with TwisterModel]"})}};b.prefetch=function(a,
d){var c=b.twisterState.getRequestContext(a,!0);t.prefetchPage(c,d)};b.handleMouseOver=function(a){if(!a||b.twisterVariationsData.useMS||!c.isSwatchSelected(a,b.twisterVariationsData)){var d=b.twisterState.getHoverContext(a);b.twisterState.updateStateOnMouseOver(a,d);var q=b.twisterVariationsData.getDimensionValuesDisplayData(d.newAsin);b.twisterVariationsData.useMS&&(!a||a.dimDisplayType!==e.TWISTER_DIMENSION_VIEW_VODD&&a.dimDisplayType!==e.TWISTER_DIMENSION_VIEW_SHELF&&a.dimDisplayType!==e.TWISTER_DIMENSION_VIEW_COUNTER)||
h("hovered",q);this.viewHandle.updateView(a,b.twisterState,e.EVENT_TYPE_MOUSEOVER);p(a,b.twisterState,e.EVENT_TYPE_MOUSEOVER);Twister.disableJsInteractions||t.updatePage(d,e.EVENT_TYPE_MOUSEOVER)}};b.handleClick=function(a){var d=b.twisterState.getRequestContext(a),c=v(d,a,d.childAsin,e.EVENT_TYPE_CLICK);l(c,d,a,d.childAsin,e.EVENT_TYPE_CLICK)};b.handleMouseOut=function(a){a=b.twisterState.getCurrentContext(a);v(a,null,a.currentAsin,e.EVENT_TYPE_MOUSEOUT)};b.handleDropdownChange=function(a){var d=
b.twisterState.getRequestContext(a);v(d,a,d.childAsin,e.EVENT_TYPE_DROPDOWN_CHANGE);l(d,a,d.childAsin,e.EVENT_TYPE_DROPDOWN_CHANGE)};(function(){if(b.twisterJSInitData){b.viewHandle||(b.viewHandle=b.twisterControllerHandle.twisterView);b.twisterState=b.twisterControllerHandle.initTwisterState;var a=b.twisterState.getCurrentASIN(),a=b.twisterVariationsData.getDimensionValuesDisplayData(a);h("selected",a);h("hovered",a);t.init(m);w.on("dp:twister:prefetch",function(a,d){b.prefetch(a,d)})}})()}});z.when("A",
"twister-utils","twister-string-constants").register("twister-native-evdd",function(w,h,a){return function(c,e){var t=this,r=w.$,g;t.dimType="evdd";t.dimNameDisplayString;t.dimName;t.dimOrder;t.isMasterDim=!1;t.updateView=function(a){a=h.getDimStyleData(a.dimCombID,t.dimValuesDisplayData.length,t.dimOrder,t.twisterControllerHandle.twisterAvailabilityCache,t.displayConfigStylesData);var c,d="";r(g).empty();for(var e=0,v=a.length;e<v;e++)if(rowData=a[e],c=rowData.style,"invalid"!==c||t.isMasterDim)c=
"selected"===c?"selected":"",rowId="#native-"+t.dimName+"_"+e,c='<option id="'+rowId+'" value="'+e+'," '+c+">"+t.dimValuesDisplayData[e]+"</option>",d+=c;r(g).html(d)};t.dimOrder=e[a.STRING_DIM_ORDER];t.dimName=e[a.STRING_DIM_NAME];t.dimValuesDisplayData=e[a.STRING_DIMENSION_VALUES_DATA];t.isMasterDim=!1;"0"===t.dimOrder&&(t.isMasterDim=!0);t.dimNameDisplayString=e[a.STRING_DIMENSION_DISPLAY_STRING];t.displayConfigStylesData=e[a.STRING_DISPLAY_CONFIG_STYLES_DATA];t.twisterControllerHandle=e[a.STRING_TWISTER_CONTROLLER_HANDLE];
g="#evdd-select-"+t.dimName;r(g).change(function(){var a=r(g).val(),a=parseInt(a.split(",")[0]);twisterController.handleClick({dimIndex:t.dimOrder,dimValueIndex:a})})}});z.when("A","twister-utils","detail-page-state-controller","twister-string-constants").register("twister-state",function(w,h,a,c){return function(e,t,r){function g(b){b.mType===c.MTYPE_PARENT&&b.relatedContext&&(b=b.relatedContext);return b}function f(b,a,f){var q=A.extend(!0,{},b);q.mType=c.MTYPE_MASTER;q.id="m"+f[0];q.relatedContext=
b;q.doNotAbort=!0;q.url=m(q,a,[]);q.uniqueID=d(q,[]);return q}function m(b,a,d){var c=k.twisterJSInitData.twisterUpdateURLInfo,f=c.immutableURLPrefix,g=c.immutableParams,c=c.mutableParams,e=k.twisterJSInitData.contextMetaData[b.mType].mTypeSpecificURLParams,l={};keyItr=0;l=A.extend(!0,{},c,e);if(null!=d)for(var e=0,n=d.length;e<n;e++){var m=d[e];if(!g.hasOwnProperty(m.key)){var p=m.key,v=m.value;l[p]=v;m.isPersistent&&(c[p]=v)}}for(var r in l)null!=l[r]&&(f+="&"+r+"="+l[r]);f+="&asinList="+b.newAsin+
"&isFlushing=2&dpEnvironment="+Twister.dpEnvironment+"&id="+b.id+"&mType="+b.mType;a&&(f+="&prefetchRequest=1");return f}function d(b,a){var d="",c=b.mType,f=[],g=A.extend(!0,{},k.twisterJSInitData.twisterUpdateURLInfo.mutableParams);if(null!=a)for(var e=0,l=a.length;e<l;e++){var n=a[e];g[n.key]=n.value}for(var m in g)g.hasOwnProperty(m)&&f.push(m);f.sort();e=0;for(l=f.length;e<l;e++)n=f[e],null!=n&&null!=g&&(d+=n+"="+g[n]+"&");return d+="mType="+c+"&id="+b.id}function p(b){var a=b[c.STRING_DIM_INDEX],
d=b[c.STRING_DIM_VALUE_INDEX];b=k.getCurrentDimCombID().split("_");b[a]=-1===d?"X":d;b=b.join("_");return k.twisterAvailabilityCache.gAsinToRender(b,a)}function v(b,a){var d=k.getCurrentDimCombID().split("_"),q=d.length,f=k.twisterVariationsData.asinToDimIndexMapData[b],g=-1,e;if(f)f=f.slice(0);else for(f=[],e=0;e<q;e++)f[e]="X";null!==a&&a!==F&&(g=a[c.STRING_DIM_INDEX]);for(var l=0;l<q;l++)(e=k.dimensionSelectionData[l][c.STRING_IS_REQUIRED])&&l!==parseInt(g)&&f[l]!=d[l]&&(f[l]="X",k.sizeSwatch&&
0!=k.partialState&&(k.dimensionSelectionData[l][c.STRING_IS_SELECTED]=0)),-1!==parseInt(g)&&-1===parseInt(a[c.STRING_DIM_VALUE_INDEX])&&(f[g]="X");return f.join("_")}function l(b,a){for(var d=b.split("_"),q=0;q<k.dimensionSelectionData.length;q++)1===k.dimensionSelectionData[q][c.STRING_IS_REQUIRED]&&0!==a&&(d[q]="X");return d.join("_")}var k=this,A=w.$;k.twisterJSInitData=e;k.twisterVariationsData=t;k.twisterAvailabilityCache=r;k.parentASIN="";k.currentASIN="";k.dimensionSelectionData={};k.unselectedDimCount=
-1;k.master="";k.currentDimCombID="";k.preHoverClass="";k.hoveredReactId="";k.hoveredAsin="";k.hoveredDimCombID="";k.partialState="";k.previousPartialState="";k.previousReactId="";k.previousAsin="";k.sizeSwatch=!1;k.setMaster=function(b){k.master=b};k.getMaster=function(){return k.master};k.getCurrentASIN=function(){return k.currentASIN};k.setCurrentASIN=function(b){b&&(k.currentASIN=b)};k.getCurrentDimCombID=function(){return k.currentDimCombID};k.setCurrentDimCombID=function(b){b&&(k.currentDimCombID=
b)};k.isDimSelected=function(b){return 1===k.dimensionSelectionData[b][c.STRING_IS_SELECTED]};k.setPreHoverData=function(b){k.useMS||(k.preHoverClass=h.getAttachedClass(b,k.twisterVariationsData.dimensionsMap[b[c.STRING_DIM_INDEX]]))};k.updateStateOnMouseOver=function(b,a){var d,q;b&&"0"===b[c.STRING_DIM_INDEX]&&k.setMaster(b[c.STRING_DIM_VALUE_INDEX]);d=a&&a.childAsin||p(b);q=k.unselectedDimCount;if(""===d){if(0>=q)return;d=k.getCurrentASIN()}k.hoveredAsin=d;d=a&&a.newDimCombID||v(k.hoveredAsin,
b);k.hoveredDimCombID=d;q=0<=d.search(/X/)?1:0;d=a&&a.reactID||l(d,q);k.hoveredReactId=d;k.setPreHoverData(b)};k.updateStateOnClick=function(b,a,d,q){var f=-1,g=-1;k.previousAsin=k.getCurrentASIN();a=a||q&&q.childAsin||p(b);b&&b[c.STRING_DIM_INDEX]&&"0"===b[c.STRING_DIM_INDEX]&&k.setMaster(b[c.STRING_DIM_VALUE_INDEX]);f=k.unselectedDimCount;k.previousPartialState=f;if(""===a){if(0>=f)return!1;a=k.getCurrentASIN()}f=q&&q.newDimCombID||v(a,b);if(c.EVENT_TYPE_CLICK===d||c.EVENT_TYPE_DROPDOWN_CHANGE===
d){var e=b[c.STRING_DIM_INDEX];d="undefined"!==typeof k.preHoverClass&&(-1!==k.preHoverClass.indexOf(c.CLASS_FOR_SWATCH_UNAVAILABLE)||-1!==k.preHoverClass.indexOf(c.CLASS_FOR_DROPDOWN_UNAVAILABLE));var m=f.split("_"),g=k.currentDimCombID.split("_");m[e]="*";g[e]="*";e=m.join("_");g=g.join("_");e!=g&&(d=!0);if(d||-1===b[c.STRING_DIM_VALUE_INDEX])for(var g=f.split("_"),m=0,n=k.dimensionSelectionData.length;m<n;m++)e=k.dimensionSelectionData[m],"X"===g[m]&&1===e[c.STRING_IS_SELECTED]&&(e[c.STRING_IS_SELECTED]=
0,k.unselectedDimCount++);DetailPage.StateController.setState("isUnavailableInOldDimCombId",d?"true":"false");d=b[c.STRING_DIM_INDEX];null!==b&&b!==F&&(d=k.dimensionSelectionData[d],0===d[c.STRING_IS_SELECTED]&&-1!==parseInt(b[c.STRING_DIM_VALUE_INDEX])&&(d[c.STRING_IS_SELECTED]=1,k.unselectedDimCount--,0>k.unselectedDimCount&&(k.unselectedDimCount=0)));g=k.unselectedDimCount;k.previousReactId=k.reactId}else g=0<=f.search(/X/)?1:0,k.previousReactId=k.hoveredReactId;b=q&&q.reactID||l(f,g);k.partialState=
g;k.setCurrentASIN(a);k.setCurrentDimCombID(f);k.reactId=b;DetailPage.StateController.setState("current_asin",k.getCurrentASIN());DetailPage.StateController.setState("currentDimCombID",k.getCurrentDimCombID());DetailPage.StateController.setState("reactId",k.reactId);DetailPage.StateController.setState("dimensionSelectionData",k.dimensionSelectionData);return!0};k.getCurrentContext=function(){var b=k.getRequestContext();return g(b)};k.getHoverContext=function(b){b=k.getRequestContext(b);return g(b)};
k.getRequestContext=function(b,a){var g=k.getCurrentASIN(),q=k.parentASIN,e;e=b&&p(b)||g;var r=k.getCurrentDimCombID(),t=v(e,b),h=0<=r.search(/X/)?1:0,n=0<=t.search(/X/)?c.MTYPE_PARTIAL:c.MTYPE_FULL;h||n!==c.MTYPE_PARTIAL||(n=c.MTYPE_PARENT);var h=n!==c.MTYPE_FULL?1:0,y=l(t,h),g={divMetaData:b,currentAsin:g,newAsin:e,childAsin:e,currentDimCombID:r,newDimCombID:t,reactID:y,partialState:h,mType:n,id:0<=y.search(/X/)?y:e};if(k.useMS&&e){if(q=k.twisterVariationsData.asinToDimIndexMapData[e])g.relatedContext=
f(g,a,q),g.doNotAbort=!0}else n===c.MTYPE_PARENT&&(e=A.extend(!0,{},g),e.mType=c.MTYPE_PARTIAL,e.relatedContext=g,e.url=m(e,a,[]),e.doNotAbort=!0,e.uniqueID=d(e,[]),g.relatedContext=e,g.id=q,g.newAsin=q,g.doNotAbort=!0);g.url=m(g,a,[]);g.uniqueID=d(g,[]);return g};k.getRequestContextForExternalTwisterUpdates=function(b){var a=k.getCurrentASIN(),g=k.getCurrentDimCombID();g.search(/X/);var q=0<=g.search(/X/)?c.MTYPE_PARTIAL:c.MTYPE_FULL,e=q!==c.MTYPE_FULL?1:0,p=l(g,e),g={divMetaData:{},currentAsin:a,
newAsin:a,childAsin:a,currentDimCombID:g,newDimCombID:g,reactID:p,partialState:e,mType:q,id:0<=p.search(/X/)?p:a};k.useMS&&a&&(a=k.twisterVariationsData.asinToDimIndexMapData[a])&&(g.relatedContext=f(g,0,a),g.doNotAbort=!0);g.url=m(g,0,b);g.uniqueID=d(g,b);return g};(function(){var b=k.twisterJSInitData,d=b.keysToPopulateDetailPageStateController,f;if(b){DetailPage.StateController=new a;for(var q=0,g=d.length;q<g;q++)f=d[q],DetailPage.StateController.setState(f,b[f]);DetailPage.StateController.setState("variation_display_labels",
b[c.INIT_DATA_VARIATIONS_DISPLAY_LABELS]);DetailPage.StateController.setState("variation_label_order",b[c.INIT_DATA_DIMENSIONS_MAP]);k.currentASIN=b.current_asin;k.parentASIN=b.parent_asin;k.dimensionSelectionData=b.dimensionSelectionData;k.unselectedDimCount=b.unselectedDimCount;k.currentDimCombID=b.currentDimCombID;k.reactId=b.reactId;k.storeID=b.storeId;k.productGroupID=b.productGroupId;k.useMS=b[c.STRING_USE_MS];k.useMS&&k.currentASIN&&k.twisterVariationsData.asinToDimIndexMapData[k.currentASIN]&&
k.setMaster(k.twisterVariationsData.asinToDimIndexMapData[k.currentASIN][0]);A("#sizeSwatch").length&&(k.sizeSwatch=!0)}})()}});z.when("A","twister-string-constants").register("twister-variations-data",function(w,h){return function(a){var c=this;c.twisterJSInitData=a;c.dimensionValuesDisplay={};c.deletedLandingAsinInfo;c.dimToAsinMapData;c.dimensionValuesData;c.asinToDimIndexMapData;c.dimensionsDisplayType;c.displayConfigStylesData;c.useMS;c.hoverMS;c.dimensionsMap;c.getDimensionValuesDisplayData=
function(a){var t=c.dimensionValuesDisplay[a];t||a!=c.deletedLandingAsinInfo.asin||(t=c.deletedLandingAsinInfo.dimValues);return t};(function(){var a=c.twisterJSInitData;c.dimensionsMap=a[h.INIT_DATA_DIMENSIONS_MAP];c.dimensionValuesDisplay=a[h.INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA];c.deletedLandingAsinInfo=a[h.INIT_DATA_DELETED_LANDING_ASIN_INFO];c.dimToAsinMapData=a[h.INIT_DATA_DIM_TO_ASIN_MAP];c.asinToDimIndexMapData=a[h.INIT_DATA_ASIN_TO_DIM_INDEX_MAP];c.dimensionsDisplayType=a[h.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP];
c.dimensionValuesData=a[h.STRING_DIMENSION_VALUES_DATA];c.displayConfigStylesData=a[h.STRING_DISPLAY_CONFIG_STYLES_DATA];c.useMS=a[h.STRING_USE_MS];c.hoverMS=a[h.STRING_HOVER_MS]})()}});z.when("A","twister-dimension-view-factory","twister-string-constants").register("twister-view",function(w,h,a){return function(c,e,t,r,g){function f(d,c,f,g,e){var b={},x={};b[a.STRING_EVENT_TYPE]=d;b[a.STRING_DIM_COMB_ID]=c;x[a.STRING_EVENT_DIV_METADATA]=f;x[a.STRING_EVENT_DIM_INFO]=g;x[a.STRING_DIMENSION_SELECTION_DATA]=
e;b[a.STRING_EVENT_DATA]=x;return b}var m=this,d=w.$;m.twisterControllerHandle=c;m.twisterJSInitData=t;m.twisterVariationsData=r;m.twisterAvailabilityCache=g;m.dimensionsMap={};m.dimensionDisplayMap={};m.dimensionDisplayTypeMap={};m.dimensionViewHandlersMap={};m.updateView=function(d,c,g){var k={},e,b=c.dimensionSelectionData;g===a.EVENT_TYPE_MOUSEOVER?(e=c.hoveredAsin,c=c.hoveredDimCombID):(e=c.getCurrentASIN(),c=c.getCurrentDimCombID());k[a.STRING_DIMENSION_VALUES_DATA]=m.twisterVariationsData.getDimensionValuesDisplayData(e);
k[a.STRING_DIMENSION_DISPLAY_MAP]=m.dimensionDisplayMap;k[a.STRING_DIMENSIONS_MAP]=m.dimensionsMap;d=f(g,c,d,k,b);g=0;for(k=m.dimensionsMap.length;g<k;g++)m.dimensionViewHandlersMap[g].updateView(d)};m.updateViewAfterTwisterUpdate=function(d,c,g){var k={},e=c.dimensionSelectionData;c.getCurrentASIN();c=c.getCurrentDimCombID();k[a.STRING_DIMENSION_DISPLAY_MAP]=m.dimensionDisplayMap;k[a.STRING_DIMENSIONS_MAP]=m.dimensionsMap;d=f(g,c,d,k,e);if(g===a.EVENT_TYPE_DROPDOWN_CHANGE||g===a.EVENT_TYPE_CLICK)for(g=
0,k=m.dimensionsMap.length;g<k;g++)m.dimensionViewHandlersMap[g].updateViewAfterTwisterUpdate&&m.dimensionViewHandlersMap[g].updateViewAfterTwisterUpdate(d)};(function(c){var f=m.twisterJSInitData;m.dimensionsMap=f[a.INIT_DATA_DIMENSIONS_MAP];m.dimensionDisplayMap=f[a.INIT_DATA_DIMENSIONS_DISPLAY];m.dimensionDisplayTypeMap=f[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP];for(var g=0,k=m.dimensionsMap.length;g<k;g++)f=h.getDimensionSubViewObject(m.twisterJSInitData,m.twisterVariationsData,g.toString(10),
m.twisterControllerHandle,c),m.dimensionViewHandlersMap[g]=f;d(a.CLASS_FOR_NON_JS_EVDD).hide();d(a.CLASS_FOR_NEW_TWISTER_EVDD).show();m.updateView({},m.twisterControllerHandle.initTwisterState,a.EVENT_TYPE_CLICK)})(e)}});z.when("A","a-dropdown","twister-thumbnailModule","twister-utils","twister-string-constants").register("twister-dimension-views-dropdown",function(w,h,a,c,e){return function(t,r){function g(){var a=e.DROPDOWN_DIV_NAME+f.dimName,c={},g;c[e.STRING_DIM_INDEX]=f.dimOrder;g=function(a){f.twisterControllerHandle&&
f.twisterControllerHandle.handleDropdownOnChange(a,c)};z.when("A").execute(function(c){c.on(e.AUI_DROPDOWN_EVENT_PREFIX+a,g)})}var f=this,m=w.$;f.dimType="dropdown";f.AuiDropdownHandle=h;f.thumbnailHandle=a;f.dimName;f.dimOrder;f.dimStyleData;f.dimensionsMap;f.dimNameDisplayString;f.dimValuesDisplayData;f.twisterControllerHandle;f.isTablet;f.updateView=function(a){switch(a[e.STRING_EVENT_TYPE]){case e.EVENT_TYPE_MOUSEOUT:case e.EVENT_TYPE_DROPDOWN_CHANGE:case e.EVENT_TYPE_CLICK:var g,v,l,k;v=e.ID_SELECTOR+
f.dimName+e.CHAR_UNDERSCORE+e.INDEX_FOR_SELECT_OPTION;var r=e.NATIVE_DROPDOWN_DIV_PREFIX+e.DROPDOWN_DIV_NAME+f.dimName,b=m(r).val().split(",")[0],x=a[e.STRING_EVENT_TYPE],B=a[e.STRING_EVENT_DATA][e.STRING_DIMENSION_SELECTION_DATA];a=c.getDimStyleData(a.dimCombID,f.dimValuesDisplayData.length,f.dimOrder,f.twisterControllerHandle.twisterAvailabilityCache,f.displayConfigStylesData);0===B[f.dimOrder][e.STRING_IS_SELECTED]&&b!==e.INDEX_FOR_SELECT_OPTION&&"undefined"!==typeof f.AuiDropdownHandle&&f.AuiDropdownHandle.getSelect(r).val("-1");
x!==e.EVENT_TYPE_CLICK&&x!==e.EVENT_TYPE_DROPDOWN_CHANGE||0!==B[f.dimOrder][e.STRING_IS_REQUIRED]||1!==B[f.dimOrder][e.STRING_IS_SELECTED]||m(v).remove();b=0;for(B=a.length;b<B;b++)if(g=a[b],v=e.NATIVE_DROPDOWN_DIV_PREFIX+f.dimName+e.CHAR_UNDERSCORE+b,g=g[e.STRING_STYLE],l=m(v).get(0).className,g===e.CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION&&(k=m(v).attr("value"),m(r).val()!==k&&f.AuiDropdownHandle.getSelect(r).val(k)),l!==g)try{l={},l[e.STRING_CSS_CLASS]=g,l[e.STRING_NATIVE_CSS_CLASS]=g,f.AuiDropdownHandle.updateOption(v,
l)}catch(q){}f.isTablet&&(x===e.EVENT_TYPE_CLICK||x===e.EVENT_TYPE_DROPDOWN_CHANGE)&&f.thumbnailHandle&&f.thumbnailHandle.update(f.dimName)}};(function(){var a;f.dimOrder=r[e.STRING_DIM_ORDER];f.dimName=r[e.STRING_DIM_NAME];f.dimensionsMap=r[e.STRING_DIMENSIONS_MAP];f.dimNameDisplayString=r[e.STRING_DIMENSION_DISPLAY_STRING];f.dimValuesDisplayData=r[e.STRING_DIMENSION_VALUES_DATA];f.twisterControllerHandle=r[e.STRING_TWISTER_CONTROLLER_HANDLE];f.displayConfigStylesData=r[e.STRING_DISPLAY_CONFIG_STYLES_DATA];
f.initialTwisterState=r[e.STRING_TWISTER_INITIAL_STATE_KEY];f.isTablet=t.isTablet;a=f.initialTwisterState.getCurrentDimCombID();f.dimStyleData=c.getDimStyleData(a,f.dimValuesDisplayData.length,f.dimOrder,f.twisterControllerHandle.twisterAvailabilityCache,f.displayConfigStylesData);g();if(f.isTablet)for(var m=0,v=f.dimensionsMap.length;m<v;m++)a=f.dimensionsMap[m],f.thumbnailHandle.attach(a),f.thumbnailHandle.preloadAllThumbnails(a)})()}});z.when("A").register("twister-dimension-views-singleton",function(w){return function(h,
a){this.updateView=function(a){}}});z.when("A","twister-dimension-views-unavailablePopover","twister-utils","twister-string-constants","aui-style-override","twister-dimension-views-ingress","twister-logger","twister-modal-resize-helper").register("twister-dimension-views-swatch",function(w,h,a,c,e,t,r,g){return function(f,m){function d(){w.declarative(Twister.isImmersiveExperience?c.AUI_EVENT_FOR_SWATCHTHUMB+"-"+u.dimOrder:c.AUI_EVENT_FOR_SWATCHTHUMB,[c.EVENT_TYPE_CLICK,c.EVENT_TYPE_MOUSEENTER,c.EVENT_TYPE_MOUSELEAVE,
c.EVENT_TYPE_MOUSEDOWN,c.EVENT_TYPE_TOUCHSTART],function(b){b.type===c.EVENT_TYPE_CLICK?u.twisterControllerHandle&&(u.twisterControllerHandle.handleClick(b.data),A(b)):b.type===c.EVENT_TYPE_MOUSEENTER?u.twisterControllerHandle&&u.twisterControllerHandle.handleMouseOver(b.data):b.type===c.EVENT_TYPE_MOUSELEAVE?u.twisterControllerHandle&&u.twisterControllerHandle.handleMouseOut(b.data,b.data[c.STRING_DIM_INDEX],b.data[c.STRING_DIM_VALUE_INDEX]):!u.newPrefetchWeblab||b.type!==c.EVENT_TYPE_MOUSEDOWN&&
b.type!==c.EVENT_TYPE_TOUCHSTART||u.twisterControllerHandle&&u.twisterControllerHandle.handleClickPrediction(b.data,"T1"===u.newPrefetchWeblab?c.YES:c.NO)})}function p(b,a){var d=DetailPage.StateController.getState().selected_variations,q=DetailPage.StateController.getState()[c.STRING_DIMENSION_SELECTION_DATA],f;u.twisterIngressHandle&&(f=u.twisterIngressHandle.modalHandle.twisterModalDiv);if(a)C("#variation_"+u.dimName+" .selection").html(b).addClass("hover"),f&&0<f.length&&C("#"+c.TWISTER_MODAL_ID_PREFIX+
u.dimName+" .selection").html(b).addClass("hover");else{var g=C("#variation_"+u.dimName+" .selection"),k=C("#"+c.TWISTER_MODAL_ID_PREFIX+u.dimName+" .selection");if(u.sizeSwatch){var e="";l(q,u.dimOrder)&&""===b||(null==d[u.dimName]?v(q,u.dimOrder)&&(e=b):e=d[u.dimName]);g.html(e).removeClass("hover");f&&0<f.length&&k.html(d[u.dimName]).removeClass("hover")}else C("#variation_"+u.dimName+" .selection").html(b).removeClass("hover"),f&&0<f.length&&C("#"+c.TWISTER_MODAL_ID_PREFIX+u.dimName+" .selection").html(b).removeClass("hover")}}
function v(b,a){var d=!1;1==b[a][c.STRING_IS_SELECTED]&&(d=!0);return d}function l(b,a){var d=!1;1==b[a][c.STRING_IS_REQUIRED]&&(d=!0);return d}function k(b,a,d,q){(Twister.isImmersiveExperience?C("."+c.TWISTER_SWATCH_CLASS_PREFIX+u.dimName+c.CHAR_UNDERSCORE+b):C(c.ID_SELECTOR+u.dimName+c.CHAR_UNDERSCORE+b)).each(function(a,f){var g=u.dimName+c.CHAR_UNDERSCORE+b+c.CHAR_UNDERSCORE+a;u.twisterJSInitData[c.STRING_HIDE_POPOVER]?h.setAriaLabel(q,d,C(f),g,u.twisterJSInitData,u.dimOrder):h.setTooltip(q,
d,C(f),g,u.twisterJSInitData,u.dimOrder)})}function A(b,a){if(u.twisterIngressHandle){u.twisterIngressHandle.modalHandle.isModalOpen&&u.logger.logImpression(u.logger.eventTypes.IMMERSIVE_SWATCH_CLICK,null);var d=u.twisterIngressHandle.modalHandle.twisterModalDiv,q=a===F?C(b.$target).parents().closest("li"):a,f=q.attr("id"),g=C("#"+f);d.has(q)&&0===f.indexOf(c.MODAL_SWATCH_PREFIX)&&(d=u.finalLimitForSwatches-1-1,q=C("#variation_"+u.dimName+" > ul > li"),g.index()>d&&(C(q.get(u.finalLimitForSwatches-
1)).remove(),f=f.replace(c.MODAL_SWATCH_PREFIX,""),C(g.clone().attr("id",f)).insertAfter(q.get(d))),u.twisterIngressHandle&&u.twisterIngressHandle.modalHandle.isModalOpen&&u.twisterIngressHandle.modalHandle.closeTwisterModal());u.$swatches=C(u.swatchWrapper);u.twisterIngressHandle.modalHandle.$swatches=C(u.twisterIngressHandle.modalHandle.swatchWrapper)}}function b(b){var a=Twister.isImmersiveExperience?C("."+c.TWISTER_SWATCH_CLASS_PREFIX+u.dimName+c.CHAR_UNDERSCORE+b):C(c.ID_SELECTOR+u.dimName+c.CHAR_UNDERSCORE+
b);b=[];var d;if(0<a.length){b=a.get(0).className.split(" ");for(var a=0,q=b.length;a<q;a++){var f=b[a];if(0===f.indexOf("swatch")){d=f;break}}}return d}function x(b,a,d){b=Twister.isImmersiveExperience?C("."+c.TWISTER_SWATCH_CLASS_PREFIX+u.dimName+c.CHAR_UNDERSCORE+b):C(c.ID_SELECTOR+u.dimName+c.CHAR_UNDERSCORE+b);a!==d&&C(b).removeClass(a).addClass(d);e.doOverride(d,b)}function B(b,a){var d=Twister.isImmersiveExperience?C("."+c.TWISTER_SWATCH_CLASS_PREFIX+u.dimName+c.CHAR_UNDERSCORE+b+" ."+c.PRICE_SLOT_CLASS_NAME):
C(c.ID_SELECTOR+u.dimName+c.CHAR_UNDERSCORE+b+"_price"),q=c.CLASS_FOR_PRICE_SECONDARY;if(a===c.CLASS_FOR_SWATCH_SELECT||a===c.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||a===c.CLASS_FOR_SWATCH_HOVER)q=c.CLASS_FOR_PRICE_SELECTED;d.length&&d.removeClass(c.CLASS_FOR_PRICE_SECONDARY+" "+c.CLASS_FOR_PRICE_SELECTED).addClass(q)}function q(b){var d={};d.asinList=b;C("#"+c.TWISTER_FEATURE_DIV_ID).css("opacity",u.twisterDimmedOpacity);d.dimTriggeringDimSum=u.dimName;d.dimSubType=u.dimSubType;d.dimType=u.dimType;d.dimCombId=
DetailPage.StateController.getState().currentDimCombID;d.executeChunk=function(){var b=DetailPage.StateController.getState().currentDimCombID,c=b.split("_"),q=d.dimCombId.split("_");if(d.dimCombId===b)return!0;if(!a.isPartialState(u.dimensionsMap.length)){for(var b=u.dimensionsMap.length,f=!0,g=0;g<b;g++)if(g!==parseInt(u.dimOrder)&&q[g]!==c[g]){f=!1;break}return f}return!1};d.chunk=function(b){for(var a=C(".twister_"+u.dimName+"_"+u.twisterJSInitData.asin_variation_values[b.ASIN][u.dimName]+" .twisterSlotDiv"),
d="",c=0;b.Value.content.twisterSlotDiv[c];)"IMAGE"===u.dimSubType&&(d+="<div>"),d+=b.Value.content.twisterSlotDiv[c],"IMAGE"===u.dimSubType&&(d+="</div>"),c++;a.html(d)};d.success=function(b,a,d,q){u.resizeHelperHandle.fixSize(u.$swatches,u.swatchWrapper,u.swatchDynaWrapper,u.ingressWrapper);C("#"+c.TWISTER_FEATURE_DIV_ID).css("opacity",1)};d.error=function(){u.resizeHelperHandle.fixSize(u.$swatches,u.swatchWrapper,u.swatchDynaWrapper,u.ingressWrapper);C("#"+c.TWISTER_FEATURE_DIV_ID).css("opacity",
1)};d.abort=function(){u.resizeHelperHandle.fixSize(u.$swatches,u.swatchWrapper,u.swatchDynaWrapper,u.ingressWrapper);C("#"+c.TWISTER_FEATURE_DIV_ID).css("opacity",1)};Twister.dimensionalSummaryModule.fetchDimSumData(d)}var u=this,C=w.$;u.dimType="swatch";u.dimSubType="";u.dimName;u.dimOrder;u.dimData;u.dimensionsMap;u.dimNameDisplayString;u.dimValuesDisplayData;u.twisterControllerHandle;u.maxSwatchLimitForImmersive;u.finalLimitForSwatches;u.twisterIngressHandle;u.twisterJSInitData=f;u.newPrefetchWeblab=
!1;u.resizeHelperHandle;u.landingDimCombId;if(Twister.multiDimensionWeblabEnabled)var G="ImmersiveMultiDimensionView";else Twister.isImmersiveExperience&&(G="ImmersiveSwatchSingleDimensionView");u.logger=G!==F?new r(C,this,G):new r(C,this);u.logger.init();u.sizeSwatch=!1;u.updateView=function(d){if(d[c.STRING_EVENT_TYPE]===c.EVENT_TYPE_MOUSEOVER){var q,f,g,e,m=d[c.STRING_EVENT_DATA],r=m[c.STRING_EVENT_DIM_INFO][c.STRING_DIMENSION_VALUES_DATA][u.dimOrder],m=m[c.STRING_EVENT_DIV_METADATA];if(u.dimOrder==
m[c.STRING_DIM_INDEX]){var t=b(m[c.STRING_DIM_VALUE_INDEX]);d=a.getDimStyleData(d.dimCombID,u.dimValuesDisplayData.length,u.dimOrder,u.twisterControllerHandle.twisterAvailabilityCache,u.displayConfigStylesData);p(r,!0);for(var r=0,h=d.length;r<h;r++)q=d[r],q=q[c.STRING_STYLE],f=b(r),g=f===c.CLASS_FOR_SWATCH_SELECT?!0:!1,e=parseInt(m[c.STRING_DIM_INDEX])===parseInt(u.dimOrder)&&parseInt(m[c.STRING_DIM_VALUE_INDEX])===parseInt(r)?!0:!1,g||t===c.CLASS_FOR_SWATCH_UNAVAILABLE&&!e||(q===c.CLASS_FOR_SWATCH_SELECT&&
(q=f===c.CLASS_FOR_SWATCH_UNAVAILABLE?c.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:c.CLASS_FOR_SWATCH_HOVER,B(r,q)),x(r,f,q))}}else for(eventData=d[c.STRING_EVENT_DATA],eventDimInfo=eventData[c.STRING_EVENT_DIM_INFO],dimensionValueDisplay=eventDimInfo[c.STRING_DIMENSION_VALUES_DATA][u.dimOrder],divMetaData=eventData[c.STRING_EVENT_DIV_METADATA],dimensionSelectionData=eventData[c.STRING_DIMENSION_SELECTION_DATA],dimCombID=d.dimCombID,dimDataForThisInteraction=a.getDimStyleData(dimCombID,u.dimValuesDisplayData.length,
u.dimOrder,u.twisterControllerHandle.twisterAvailabilityCache,u.displayConfigStylesData),u.sizeSwatch?(t=dimCombID.split("_")[0],m=l(dimensionSelectionData,u.dimOrder),r=v(dimensionSelectionData,u.dimOrder),"X"==t&&m&&r||p(dimensionValueDisplay,!1)):p(dimensionValueDisplay,!1),q=0,f=dimDataForThisInteraction.length;q<f;q++)if(t=dimDataForThisInteraction[q],r=t[c.STRING_STYLE],0===dimensionSelectionData[u.dimOrder][c.STRING_IS_SELECTED]&&r===c.CLASS_FOR_SWATCH_SELECT&&(r=c.CLASS_FOR_SWATCH_AVAILABLE),
h=b(q),u.sizeSwatch&&(m=l(dimensionSelectionData,u.dimOrder),g=!v(dimensionSelectionData,u.dimOrder),h==c.CLASS_FOR_SWATCH_SELECT&&t[c.STRING_STYLE]==c.CLASS_FOR_SWATCH_SELECT&&m&&g&&(r=t[c.STRING_STYLE])),h){u.sizeSwatch&&(m=l(dimensionSelectionData,u.dimOrder),h!=c.CLASS_FOR_SWATCH_SELECT&&h!=c.CLASS_FOR_SWATCH_HOVER||!m||r!=c.CLASS_FOR_SWATCH_UNAVAILABLE||p("",!1));h=b(q);x(q,h,r);switch(d[c.STRING_EVENT_TYPE]){case c.EVENT_TYPE_DROPDOWN_CHANGE:case c.EVENT_TYPE_CLICK:k(q,h,r,d)}B(q,r)}};u.updateViewAfterTwisterUpdate=
function(b){var d=b[c.STRING_EVENT_DATA][c.STRING_EVENT_DIV_METADATA];b=DetailPage.StateController.getState().currentDimCombID.split("_");if(Twister.multiDimensionWeblabEnabled){var g=C(c.ID_SELECTOR+c.MODAL_SWATCH_PREFIX+u.dimName+"_"+b[u.dimOrder]);A(F,g);if(u.isSlotsEnabled)if(a.isPartialState(u.dimensionsMap.length))b=C(" .twisterSwatchWrapper_"+u.dimOrder+" .twisterSlotDiv"),"none"!==b.css("display")&&(document.getElementById("twisterSwatchWrapperDynaStyle_"+u.dimOrder).innerHTML=".twisterSwatchWrapper_"+
u.dimOrder+" {min-width:100%;min-height:100%;}",b.css("display","none"),u.resizeHelperHandle.fixSize(u.$swatches,u.swatchWrapper,u.swatchDynaWrapper,u.ingressWrapper)),Twister.immersiveBannersPresent&&(b=a.getImmersivePartialStateBannerContent(f,parseInt(u.dimOrder)),d=C("#twisterImmersiveGlanceBanner"),d.html(b),d.removeClass("twisterImmersiveBannerHide"),C("#twisterImmersiveModalBanner").html(b));else if(d[c.STRING_DIM_INDEX]!=u.dimOrder||"true"===DetailPage.StateController.getState().isUnavailableInOldDimCombId){for(var g=
C(c.ID_SELECTOR+"variation_"+u.dimName+" > ul > li"),d=[],k=u.twisterJSInitData.dimensionValuesData[u.dimOrder].length,e=u.isImmersiveViewEnabled?u.finalLimitForSwatches:k,l=0;l<k;l++)C("."+c.TWISTER_SWATCH_CLASS_PREFIX+u.dimName+"_"+l+" ."+c.CLASSNAME_FOR_SWATCH+"_"+u.dimOrder).css("min-width","");C(c.ID_SELECTOR+c.TWISTER_INGRESS_ID_PREFIX+u.dimName+" ."+c.CLASSNAME_FOR_SWATCH+"_"+u.dimOrder).css("min-width","");C("."+c.CLASSNAME_FOR_INGRESS+"_"+u.dimOrder).css("min-width","");C(c.ID_SELECTOR+c.TWISTER_INGRESS_ID_PREFIX+
u.dimName+" ."+c.CLASSNAME_FOR_SWATCH+"_"+u.dimOrder).css("min-height","");for(k=0;k<e;k++){var l=C(g.get(k)).find(".a-declarative"),x=l.attr("data-action"),l=JSON.parse(l.attr("data-"+x)).dimValueIndex;b[u.dimOrder]=l;var m=b.join("_"),x=C("."+c.TWISTER_SWATCH_CLASS_PREFIX+u.dimName+"_"+l+" .twisterSlotDiv");x.css("display","");(m=u.twisterJSInitData[c.INIT_DATA_DIM_TO_ASIN_MAP][m])?(d.push(m),x.html("<div class='loadingSlot_0' style='width: 40px; margin : 5px 0px 5px 5px; height : 7px'></div><div class='loadingSlot_1'      style='width: 30px; margin : 5px 0px 0px 5px; height : 7px'></div>")):
C("."+c.TWISTER_SWATCH_CLASS_PREFIX+u.dimName+"_"+l+" .twisterSlotDiv").html("<span class='a-color-tertiary'>- -</span>")}C(c.ID_SELECTOR+c.TWISTER_MODAL_ID_PREFIX+u.dimName+" .swatches li").invalidateAppearedAlreadyCache();k=u.twisterJSInitData.dimensionValuesData[u.dimOrder].length;for(l=0;l<k;l++)b=C(c.ID_SELECTOR+c.TWISTER_MODAL_ID_PREFIX+u.dimName+" ."+c.TWISTER_SWATCH_CLASS_PREFIX+u.dimName+"_"+l+" .twisterSlotDiv"),b.css("display",""),b.html("<div class='loadingSlot_0' style='width: 40px; margin : 5px 0px 5px 5px; height : 7px'></div><div class='loadingSlot_1' style='width: 30px;  margin : 5px 0px 0px 5px; height : 7px'></div>");
0<d.length?q(d):u.resizeHelperHandle.fixSize(u.$swatches,u.swatchWrapper,u.swatchDynaWrapper,u.ingressWrapper);Twister.immersiveBannersPresent&&(C("#twisterImmersiveGlanceBanner").addClass("twisterImmersiveBannerHide"),b=a.getImmersiveFullStateBannerContent(f,parseInt(u.dimOrder)),C("#twisterImmersiveModalBanner").html(b))}}};(function(){u.isImmersiveViewEnabled=m.isImmersiveViewEnabled;u.isSlotsEnabled=m.isSlotsEnabled;u.newPrefetchWeblab=u.twisterJSInitData.newPrefetchWeblab;u.dimOrder=m[c.STRING_DIM_ORDER];
u.dimName=m[c.STRING_DIM_NAME];u.dimensionsMap=m[c.STRING_DIMENSIONS_MAP];u.dimNameDisplayString=m[c.STRING_DIMENSION_DISPLAY_STRING];u.dimValuesDisplayData=m[c.STRING_DIMENSION_VALUES_DATA];u.displayConfigStylesData=m[c.STRING_DISPLAY_CONFIG_STYLES_DATA];u.twisterControllerHandle=m[c.STRING_TWISTER_CONTROLLER_HANDLE];u.initialTwisterState=m[c.STRING_TWISTER_INITIAL_STATE_KEY];currDimCombID=u.initialTwisterState.getCurrentDimCombID();u.dimData=a.getDimStyleData(currDimCombID,u.dimValuesDisplayData.length,
u.dimOrder,u.twisterControllerHandle.twisterAvailabilityCache,u.displayConfigStylesData);u.maxSwatchLimitForImmersive=m[c.STRING_MAX_SWATCHES_IMMERSIVE_VIEW];u.dimSubType=m.dimensionDisplaySubType;u.finalLimitForSwatches=u.maxSwatchLimitForImmersive-1;d();for(var q,f,k=0,e=u.dimData.length;k<e;k++)if(q=u.dimData[k],f=b(k))q=q[c.STRING_STYLE],x(k,f,q),B(k,q);0<C("#twister_ingress_"+u.dimName).length&&(f={},f.dimName=u.dimName,f.dimOrder=u.dimOrder,f.dimData=u.dimData,f.dimensionsMap=u.dimensionsMap,
f.dimNameDisplayString=u.dimNameDisplayString,f.dimValuesDisplayData=u.dimValuesDisplayData,f.maxSwatchLimitForImmersive=u.maxSwatchLimitForImmersive,f.dimSubType=u.dimSubType,f.isSlotsEnabled=u.isSlotsEnabled,u.twisterIngressHandle=new t(f,u.twisterJSInitData));u.resizeHelperHandle=new g;u.swatchWrapper=".twisterSwatchWrapper_"+u.dimOrder;u.swatchDynaWrapper="twisterSwatchWrapperDynaStyle_"+u.dimOrder;u.$swatches=C(u.swatchWrapper);u.twisterDimmedOpacity=.2;C("#sizeSwatch").length&&(u.sizeSwatch=
!0);u.landingDimCombId=DetailPage.StateController.getState().currentDimCombID})();z.when("twister-lazy-load-data").execute(function(b){if(b.context.dimKey===u.dimName){var d=DetailPage.StateController.getState().currentDimCombID,q=u.landingDimCombId.split("_"),d=d.split("_");q[u.dimOrder]="*";d[u.dimOrder]="*";d=d.join("_");q=q.join("_");if(d==q){var f=b.context;b=b.responseData.split("&&&");C("#"+c.TWISTER_FEATURE_DIV_ID).css("opacity",.2);C.each(b,function(b,d){var c;if(""!==a.stringTrim(d))try{c=
C.parseJSON(d)}catch(q){}else c=d;var g=C(document.querySelectorAll('[data-defaultAsin="'+c.ASIN+'"]'));divToBeReplaced=g.find(" .twisterSlotDiv");if(0<divToBeReplaced.length){divToBeReplaced.css("display","");if(Twister.multiDimensionWeblabEnabled){for(var k="",e=0;c.Value.content.twisterSlotDiv[e];)"IMAGE"===f.dimSubType&&(k+="<div>"),k+=c.Value.content.twisterSlotDiv[e],"IMAGE"===f.dimSubType&&(k+="</div>"),e++;divToBeReplaced.html(k)}else divToBeReplaced.html(c.Value.content.twisterSlotDiv);g.removeAttr("data-defaultAsin")}});
u.resizeHelperHandle.fixSize(u.$swatches,u.swatchWrapper,u.swatchDynaWrapper,u.ingressWrapper);C("#"+c.TWISTER_FEATURE_DIV_ID).css("opacity",1)}}})}});z.when("A","twister-utils","twister-string-constants","scroll-event-handler","twister-vodd-popover").register("twister-vodd",function(w,h,a,c,e){return function(t,r){function g(){var b=100*parseInt(y.dimensionOrder),a=b,d=function(b,a,d){b.addClass("animation-start");setTimeout(function(){b.animate({top:d||"0px"},{duration:300,complete:function(){H(this).removeClass("animation-start")}})},
a)};T.length&&T.parent("td").is(":visible")&&(d(T.parent("td"),b,"5px"),a=b+50);d(F.parent("td"),a,"5px")}function f(){Z=a.ID_SELECTOR+"vodd-button-"+y.dimensionName;ba=a.ID_SELECTOR+"vodd-button-label-"+y.dimensionName;ca=a.ID_SELECTOR+"vodd-table-"+y.dimensionName;da=a.ID_SELECTOR+"dimension-button-img-"+y.dimensionName;Q=a.ID_SELECTOR+y.dimensionName+a.CHAR_UNDERSCORE;ea="vodd-popover-"+y.dimensionName;var b=parseInt(y.dimensionOrder),d=t[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES];d&&H.isArray(d)&&d.length>
b&&(b=d[b],b[a.INIT_DATA_VISIBLE_ROW_COUNT]&&(R=b[a.INIT_DATA_VISIBLE_ROW_COUNT]),b[a.INIT_DATA_MAX_POPOVER_HEIGHT]&&(M=b[a.INIT_DATA_MAX_POPOVER_HEIGHT]),b[a.INIT_DATA_ANIMATE_BUTTON_CONTENT]&&(V=b[a.INIT_DATA_ANIMATE_BUTTON_CONTENT]),b[a.INIT_DATA_POPOVER_POSITION]&&(X=b[a.INIT_DATA_POPOVER_POSITION]))}function m(b){if(L){var d=L.length/y.dimValuesDisplayData.length*100,d={divMetaData:A(null),count:Math.ceil(y.dimValuesDisplayData.length/R),percentage:Math.floor(d),dimDisplayType:a.TWISTER_DIMENSION_VIEW_VODD};
aa.logImpression(b,d)}}function d(){var b={trigger:y.dimensionButton,name:ea,eventListener:y,displayPosition:X},d=O.find("tr");d.length&&d.length>R&&M&&"undefined"!==typeof M&&H.extend(b,{height:M});I=new e(b);y.dimensionButton.bind(h.isTouchDevice()?a.EVENT_TYPE_TOUCHEND:a.EVENT_TYPE_CLICK,function(b){if(I&&I.getHandle()&&I.getHandle().isActive())return I.getHandle().hide(),!1;aa.logImpression(Y.CLICK,{time:Date.now()});h.isTouchDevice()&&y.dimensionButton.trigger("mouseenter")})}function p(b,a){var d=
aa.createFunctionTimer(Y.DIM_SUM_LOAD);d.start();Twister.dimensionalSummaryModule&&Twister.dimensionalSummaryModule.fetchDimSumData({indices:a,asinList:b,dimTriggeringDimSum:y.dimensionName,dimSubType:y.dimSubType,dimType:y.dimType,chunk:function(b){if(b&&"object"===typeof b){var a=N[b.ASIN][parseInt(y.dimensionOrder)],a=O.find(Q+a);b.Value&&b.Value.content&&b.Value.content.twisterSlotDiv&&(b=H.trim(b.Value.content.twisterSlotDiv),0<b.length&&(a.find(".vodd-loading-placeholder").hide(),q(a),a.find(".dimension-details").append(b)))}},
success:function(b,a,c,q){d.stop()},error:function(){d.stop()},abort:function(){d.stop()}})}function v(b){var a=y.initialTwisterState.getCurrentDimCombID(),d=parseInt(y.dimensionOrder),c=[],q=[];L||(L=[]);for(var f=0;f<b.length;f++){7===c.length&&(p(c,q),c=[],q=[]);var g=k(b[f].id);combination=h.reconstructCombinationWithDimValue(a,d,g);asin=S[combination];0>L.indexOf(g)&&L.push(g);asin&&(q.push(g),c.push(asin))}0<c.length&&p(c,q)}function l(b){b=h.getVisibleTableRows(b.currentTarget,O.find("tr"));
v(b)}function k(b){if(!b)return-1;b=b.split(a.CHAR_UNDERSCORE);return b[b.length-1]}function A(b){return{dimIndex:y.dimensionOrder,dimValueIndex:b?k(b.id):null,dimDisplayType:a.TWISTER_DIMENSION_VIEW_VODD}}function b(b){m(Y.CLICK_VARIATION);W||m(Y.SCROLL);W=!0;L=null;var a=A(b.currentTarget),d=y.initialTwisterState.getCurrentDimCombID(),c=h.reconstructCombinationWithDimValue(d,a.dimIndex,a.dimValueIndex);c!=d&&y.twisterControllerHandle&&(D(),y.twisterControllerHandle.handleClick(a));I&&I.getHandle()&&
I.getHandle().hide();d=y.twisterControllerHandle.twisterAvailabilityCache.isDimCombinationAvailable(c);a={dimensionOrder:y.dimensionOrder,dimensionValueIndex:a.dimValueIndex,isSelectedDimValueAvailable:d};H(b.currentTarget).trigger("TwisterVODD.dimensionRowClick",a)}function x(b){H(b.currentTarget).addClass("vodd-row-hovered");y.twisterControllerHandle&&(b=A(b.currentTarget),y.twisterControllerHandle.handleMouseOver(b))}function B(b){H(b.currentTarget).removeClass("vodd-row-hovered");if(y.twisterControllerHandle){var a=
A(b.currentTarget);b=k(b.currentTarget.id);y.twisterControllerHandle.handleMouseOut(a,y.dimensionOrder,b)}}function q(b){b.find(".dimension-slots .availability-message").nextAll().remove()}function u(b,a){if(a)b.find(".unavailable-text").hide(),b.find(".vodd-loading-placeholder").show();else{b.find(".unavailable-text").show();b.find(".vodd-loading-placeholder").hide();b.find(".unavailableV2").removeClass("aok-hidden");var d;d=y.initialTwisterState.getCurrentDimCombID().split("_");var c=[],f=parseInt(y.dimensionOrder),
g=k(b[0].id);d[f]=g;for(var g=d.join("_"),g=y.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(g,f),g=N[g],e=0;e<d.length;e++)f!==e&&c.push(P[e][g[e]]);d=c.join(", ");b.find(".variation-combination-text").text(d);a:{d=0;c=parseInt(y.dimensionOrder);f=parseInt(k(b[0].id));for(asin in N)if(parseInt(N[asin][c])===f&&1<++d){d=!0;break a}d=!1}d||b.find(".variation-more-text").hide()}q(b)}function C(b){K.sort(function(d,c){var q=k(d.id),f=k(c.id);if(b[q][a.STRING_STYLE]!==b[f][a.STRING_STYLE]){if(b[q][a.STRING_STYLE]===
a.CLASS_FOR_VODD_UNAVAILABLE)return 1;if(b[f][a.STRING_STYLE]===a.CLASS_FOR_VODD_UNAVAILABLE)return-1}return q-f});K.detach().appendTo(O)}function G(b){var a=O.find("tr");b=a.index(b);var d=a.length-R;b>d?(b=d,0>b&&(b=0)):b=0==b?b:b-1;a=a.slice(b,b+R);v(a)}function D(){K.unbind(a.EVENT_TYPE_CLICK,b);h.isTouchDevice()||K.unbind(a.EVENT_TYPE_MOUSEENTER,x).unbind(a.EVENT_TYPE_MOUSELEAVE,B)}function n(b,d){var c=h.getDimStyleData(b,y.dimValuesDisplayData.length,y.dimensionOrder,y.twisterControllerHandle.twisterAvailabilityCache,
y.displayConfigStylesData);C(c);for(var q=null,f=0;f<c.length;f++){var g=c[f],k=O.find(Q+f);if(g[a.STRING_STYLE]===a.CLASS_FOR_VODD_SELECT){if(q=k,k.addClass("vodd-row-selected"),F.text(y.dimValuesDisplayData[f]),T.length){var e=k.find("img.vodd-dimension-img");(e=0<e.length?e.attr("src"):null)&&T.attr("src",e).show()}}else k.removeClass("vodd-row-selected");k.removeClass("vodd-row-hovered");1<y.dimensionsMap.length&&u(k,g[a.STRING_STYLE]!==a.CLASS_FOR_VODD_UNAVAILABLE)}d?w.on.load(function(){G(q)}):
G(q)}var y=this,H=w.$,I,U,P,J,K,O,T,F,ba,da,Z,ca,Q,ea,R=0,X="bottom",V=!1,M,W=!1,L,S,N,aa,Y;y.onInitializeTwister=function(){n(y.initialTwisterState.getCurrentDimCombID(),!0);w.loadDescendantImagesManually(O);d()};y.handlePopoverEvent=function(d,q){if(d===a.EVENT_TYPE_SHOWPOPOVER){D();K.bind(a.EVENT_TYPE_CLICK,b);h.isTouchDevice()||K.bind(a.EVENT_TYPE_MOUSEENTER,x).bind(a.EVENT_TYPE_MOUSELEAVE,B);W=!1;var f=q.popover.$trigger,g={popover:q};f.addClass("highlighted");f.trigger("TwisterVODD.showPopup",
g);U||(J=O.closest(".a-popover-inner"),U=new c(200,J,l));f=O.find("tr.vodd-row-selected");J&&J.length&&f.length&&J.scrollTop(f.get(0).offsetTop-33)}else d===a.EVENT_TYPE_HIDEPOPOVER?(f=q.popover.$trigger,g={popover:q},W||(m(Y.SCROLL),L=null),W=!0,H(f).removeClass("highlighted"),f.trigger("TwisterVODD.hidePopup",g)):d===a.EVENT_TYPE_UPDATEPOPOVERPOSITION&&q.popover.$trigger.trigger("TwisterVODD.updatePopupPosition",{popover:q})};y.updateView=function(b){b[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_CLICK&&
n(b[a.STRING_DIM_COMB_ID])};y.showVariationSelection=function(){h.isTouchDevice()||y.dimensionButton.trigger("click")};(function(){y.dimType=a.TWISTER_DIMENSION_VIEW_VODD;y.dimensionName=r[a.STRING_DIM_NAME];y.dimensionOrder=r[a.STRING_DIM_ORDER];y.twisterControllerHandle=r[a.STRING_TWISTER_CONTROLLER_HANDLE];y.dimValuesDisplayData=r[a.STRING_DIMENSION_VALUES_DATA];y.displayConfigStylesData=r[a.STRING_DISPLAY_CONFIG_STYLES_DATA];y.initialTwisterState=r[a.STRING_TWISTER_INITIAL_STATE_KEY];y.dimensionsMap=
r[a.STRING_DIMENSIONS_MAP];y.dimSubType=r[a.DIMENSION_SUB_TYPE];aa=y.twisterControllerHandle.logger;Y=aa.eventTypes;P=y.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;S=y.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;N=y.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;y.initialTwisterState.asinDimensionValuesInfo||(y.initialTwisterState.asinDimensionValuesInfo={});f();y.dimensionButton=H(Z);O=H(ca);K=O.find("tr");T=H(da);F=H(ba);
var b=Math.ceil(y.dimValuesDisplayData.length/R);aa.logImpression(Y.DIM_INIT,{count:b,dimDisplayType:a.TWISTER_DIMENSION_VIEW_VODD});V&&z.when("A","ready").execute(function(b){E.setTimeout(function(){g()},1E3)})})()}});z.when("A","twister-string-constants","a-tooltip","accessibility-helper").register("twister-dimension-views-unavailablePopover",function(w,h,a,c){function e(a,c,f,e){var d=a[h.STRING_EVENT_DATA];a=d[h.STRING_EVENT_DIV_METADATA];f=f||a[h.STRING_DIM_INDEX];a=d[h.STRING_DIMENSION_SELECTION_DATA];
var d=d[h.STRING_EVENT_DIM_INFO][h.STRING_DIMENSION_DISPLAY_MAP],p=c[h.STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER];c=c[h.STRING_UNAVAILABLE_POPOVER_STRING_VALUE];for(var v="",l=0;l<a.length;l++)l!==parseInt(f,10)&&1===a[l][h.STRING_IS_SELECTED]&&(v=v?v+", "+d[l]:d[l]);e||(v="<strong>"+v+"</strong>");return p?c+" "+v:v+" "+c}function t(a){a=a.popover;var g="";a&&a.getContent()&&(g=a.getContent().text());g&&c.announceText(g)}return{setTooltip:function(c,g,f,m,d,p){f=f.find("button");f.length&&(c=e(c,
d,p),a.remove(f),w.off("a:popover:show:TwisterDimViewUnavailableTooltip"+m,t),g===h.CLASS_FOR_SWATCH_UNAVAILABLE&&(a.create(f,{position:"triggerTop",content:c,inlineContent:c,name:"TwisterDimViewUnavailableTooltip"+m}),w.on("a:popover:show:TwisterDimViewUnavailableTooltip"+m,t)))},setAriaLabel:function(a,c,f,m,d,p){f=f.find("button");f.length&&(f.attr("aria-label",""),c===h.CLASS_FOR_SWATCH_UNAVAILABLE&&(a=(f.text().trim()||f.find("img").attr("alt"))+". "+e(a,d,p,!0),f.attr("aria-label",a)))}}});
z.when("A","twister-utils","twister-string-constants","scroll-event-handler","dimensional-summary-module","a-popover","twister-logger").register("twister-IMDD",function(w,h,a,c,e,t,r){return function(c,f){function e(){w.declarative("twister-idd-button-click-"+n.dimOrder,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_MOUSEENTER,a.EVENT_TYPE_MOUSELEAVE,a.EVENT_TYPE_MOUSEDOWN,a.EVENT_TYPE_TOUCHSTART],function(b){if(b.type===a.EVENT_TYPE_CLICK){n.modalAttachedToButton?(b="imdd-appear-"+f[a.STRING_DIM_NAME],y("#"+n.immersiveDropdownDivId+
" .twister-idd-row").forceAppear({force_process:!0,$window:n.immersiveDropdownDiv,$scrollHandlerDiv:n.immersiveDropdownContentDiv,eventToBeTriggered:b})):(v(),y("#"+n.dropdownDivPlaceHolderId).after(n.immersiveDropdownDiv),d());n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_OPENED,null);n.immersiveDropdownDiv.css("display","block");n.modalAttachedToButton||(d(),n.modalAttachedToButton=1);b=y("#twisterDropdownWidthHelper_"+n.dimOrder);if(0<b.length){var c=b.html();b=y("#"+n.immersiveDropdownDivId+
" #twister-idd-modal-selection").html();y("#"+n.immersiveDropdownDivId+" #twister-idd-modal-selection").html(c);n.dropdownHeaderDiv.css("height","");n.maxHeaderHeight=n.dropdownHeaderDiv.outerHeight();c=n.immersiveDropdownDiv.height()-n.maxHeaderHeight;n.immersiveDropdownContentDiv.css({height:c});n.dropdownHeaderDiv.css({height:n.dropdownHeaderDiv.outerHeight()});y("#"+n.immersiveDropdownDivId+" #twister-idd-modal-selection").html(b)}var c=n.immersiveDropdownDiv.outerHeight(),q=n.$dropdownButtonDiv.outerHeight();
b=n.$dropdownButtonDiv.offset();var g=y(E).height()+y(E).scrollTop()-b.top,g=350<g?350:g,g=g>c?c:g,k=n.$subNav.offset().top+n.$subNav.outerHeight(),q=b.top+q,k=q-k,k=350<k?350:k,c=k>c?c:k;g>=c?(n.immersiveDropdownDiv.css("height",g+"px"),b=b.top):(n.immersiveDropdownDiv.css("height",c-10+"px"),b=q-n.immersiveDropdownDiv.outerHeight()+10);n.immersiveDropdownDiv.offset({top:b});b=n.immersiveDropdownDiv.height()-n.maxHeaderHeight;n.immersiveDropdownContentDiv.css({height:b});n.immersiveDropdownContentDiv.get(0).scrollHeight>
n.immersiveDropdownContentDiv.get(0).clientHeight?y(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"):y(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","none");n.immersiveDropdownDiv.css("display","none");n.immersiveDropdownDiv.css("display","block");h.disableTwisterDiv();n.modalAttachedToButton=1;n.isDropdownOpen=1}});w.declarative("twister-idd-row-click-"+n.dimOrder,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_MOUSEENTER,
a.EVENT_TYPE_MOUSELEAVE,a.EVENT_TYPE_MOUSEDOWN,a.EVENT_TYPE_TOUCHSTART],function(b){b.type===a.EVENT_TYPE_CLICK?n.twisterControllerHandle&&(n.twisterControllerHandle.handleClick(b.data),p(),n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_ROW_CLICK,null)):b.type===a.EVENT_TYPE_MOUSEENTER?n.twisterControllerHandle&&n.twisterControllerHandle.handleMouseOver(b.data):b.type===a.EVENT_TYPE_MOUSELEAVE&&n.twisterControllerHandle&&n.twisterControllerHandle.handleMouseOut(b.data,b.data[a.STRING_DIM_INDEX],
b.data[a.STRING_DIM_VALUE_INDEX])});w.declarative("twister-idd-close-button-"+n.dimOrder,[a.EVENT_TYPE_CLICK],function(b){b.type===a.EVENT_TYPE_CLICK&&(p(),n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_CLOSED,null))});y(document).ready(function(){y(document).click(function(b){b.target.id==n.immersiveDropdownDivId||n.immersiveDropdownDiv.has(b.target).length||b.target.id==n.dropdownButtonId||n.$dropdownButtonDiv.has(b.target).length||!n.isDropdownOpen||p()})});y(document).keyup(function(b){27==
b.keyCode&&p()});n.immersiveDropdownContentDiv.bind("scroll",function(){y(this).scrollTop()+y(this).innerHeight()>=this.scrollHeight?(n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_FULL_SCROLL,null),y(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","none")):(0==y(this).scrollTop()?y(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERTOP).css("display","none"):y(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERTOP).css("display",
"block"),y(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"))});n.immersiveDropdownContentDiv.live("DOMMouseScroll mousewheel  wheel",function(b){var d=y(this),c=this.scrollTop,q=this.scrollHeight,f=d.height(),g=b.originalEvent.wheelDelta;"undefined"==typeof g&&(g=-b.originalEvent.deltaY);var k=0<g,e=function(){b.stopPropagation();b.preventDefault();return b.returnValue=!1};if(!k&&-g>q-f-c)return d.scrollTop(q),y(a.ID_SELECTOR+n.immersiveDropdownDivId+
" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","none"),e();if(k&&g>c)return y(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERTOP).css("display","none"),d.scrollTop(0),e();d.scrollTop()+d.innerHeight()>q&&(y(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"),y(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERTOP).css("display","block"))})}function d(){var b=-1<navigator.platform.indexOf("Win"),d=n.immersiveDropdownContentDiv.scrollTop()+
n.immersiveDropdownContentDiv.get(0).scrollHeight>n.immersiveDropdownContentDiv.outerHeight()+15;if(d){var c=parseInt(n.immersiveDropdownDiv.width())+25+"px";n.immersiveDropdownDiv.css("width",c);b&&(b=parseInt(y(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).width())-21+"px",y(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("width",b),y(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERTOP).css("width",b))}d&&n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR,
null)}function p(){h.enableTwisterDiv();n.immersiveDropdownDiv.css("display","none");n.isDropdownOpen=0}function v(){var b="imdd-appear-"+f[a.STRING_DIM_NAME];y("#"+n.immersiveDropdownDivId+" .twister-idd-row").appearedInTwisterImmersiveView({force_process:!0,$window:n.immersiveDropdownDiv,$scrollHandlerDiv:n.immersiveDropdownContentDiv,eventToBeTriggered:b});w.on(b,function(b){for(b=b[0].slice(0);b.length;)n.requestStack.push(b.splice(0,n.maxBatchLimitForIMDD));l()})}function l(){if(!(0>=n.requestStack.length)&&
n.noOfOngoingConnections!==MAX_AJAX_CONNECTIONS_ALLOWED){n.noOfOngoingConnections++;for(var b=n.requestStack.shift(),a=[],d=0,c=b.length;d<c;d++){var q=y(b[d]),q=n.immersiveDropdownDiv.find("#"+q.attr("id")).closest(".a-declarative"),f=q.attr("data-action"),q=JSON.parse(q.attr("data-"+f)).dimValueIndex;a.push(q)}x(a);l()}}function k(b){n.initData.fnToDetermineSelectedVariations?"function"===typeof n.initData.fnToDetermineSelectedVariations&&(n.currentDimCombOnGlance=n.initData.fnToDetermineSelectedVariations.call(n)):
(n.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,n.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID);return b?n.currentDimCombOnGlance.split("_"):n.currentDimCombOnGlance}function t(b){var a=k(!0);a[b]=n.symbolForTriggeringDim;var a=a.join("_"),d={},c={};b=H[b];if(!n.mapOfDimToAsinMaps[a]){for(var q=0,f=b.length;q<f;q++){var g=a.replace(n.symbolForTriggeringDim,q);(g=I[g])?(d[b[q]]=g,c[g]=b[q]):d[b[q]]=""}d&&(n.mapOfDimToAsinMaps[a]=
d);c&&(n.mapOfAsinToDimMaps[a]=c)}}function b(b,a,d){d=[];var c=k(!0).slice(0);c[a]=n.symbolForTriggeringDim;var c=c.join("_"),c=n.mapOfDimToAsinMaps[c],q=G();a=H[a];for(var f=0,g=b.length;f<=g;f++){var e=b[f],l=a[e];l&&((l=c[l])?d.push(l):(e=y("#"+ROW_ID_PREFIX+n.dimensionName+"_"+e+" .idd_loading_slot_0"),q||e.html("<span class='a-color-tertiary'>- -</span>")))}return d}function x(d){var c={};c.indices=d;c.dimTriggeringDimSum=f[a.STRING_DIM_NAME];c.dimType=n.dimType;var q=dimensionsList.indexOf(c.dimTriggeringDimSum);
t(q);c.asinList=b(d,q,c);0==c.asinList.length?(n.noOfOngoingConnections--,l()):(c.dimCombId=k(!1),c.executeChunk=function(){var b=DetailPage.StateController.getState().currentDimCombID,a=b.split("_"),d=c.dimCombId.split("_");if(c.dimCombId===b)return!0;if(!h.isPartialState(n.dimensionsMap.length)){for(var b=n.dimensionsMap.length,q=!0,f=0;f<b;f++)if(f!==parseInt(n.dimOrder)&&d[f]!==a[f]){q=!1;break}return q}return!1},c.chunk=function(b,a){b.dimensionValue=dimensionsList[a.dimIndexTriggeringDimSum]+
"_"+H[a.dimIndexTriggeringDimSum].indexOf(n.mapOfAsinToDimMaps[a.hashKey][b.ASIN]);var d=y("#"+ROW_ID_PREFIX+b.dimensionValue+" .idd_loading_slot_0");d.html(b.Value.content.twisterSlotDiv["0"]);d=y("#"+ROW_ID_PREFIX+b.dimensionValue+" .idd_loading_slot_1");d.html(b.Value.content.twisterSlotDiv["1"])},c.success=function(b,a,d,c){n.noOfOngoingConnections--;l()},c.error=function(){n.noOfOngoingConnections--;l()},c.abort=function(){n.noOfOngoingConnections--;l()},Twister.dimensionalSummaryModule.fetchDimSumData(c))}
function B(b){var d=y("#"+ROW_ID_PREFIX+n.dimensionName+a.CHAR_UNDERSCORE+b);b=[];var c;if(0<d.length){b=d.get(0).className.split(" ");for(var d=0,q=b.length;d<q;d++){var f=b[d];if(0===f.indexOf("twister-idd-row-")){c=f;break}}}return c}function q(b,d,c){b=y("#"+ROW_ID_PREFIX+n.dimensionName+a.CHAR_UNDERSCORE+b);d!==c&&(d==F?y(b).addClass(c):y(b).removeClass(d).addClass(c))}function u(b,d){var c=y("#"+ROW_ID_PREFIX+n.dimensionName+a.CHAR_UNDERSCORE+b+" .idd_loading_slot_0 ."+a.PRICE_SLOT_CLASS_NAME),
q=a.CLASS_FOR_PRICE_SECONDARY;if("twister-idd-row-selected"===d||d===a.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||"twister-idd-row-hover"===d)q=a.CLASS_FOR_PRICE_SELECTED;c.length&&c.removeClass(a.CLASS_FOR_PRICE_SECONDARY+" "+a.CLASS_FOR_PRICE_SELECTED+" a-color-tertiary").addClass(q)}function C(b,a){DetailPage.StateController.getState();a?y("#"+n.immersiveDropdownDivId+" #twister-idd-modal-selection").html(b).addClass("hover"):(y("#"+n.dropdownButtonId+" #twister-idd-button-selection").html(b).removeClass("hover"),
y("#"+n.immersiveDropdownDivId+" #twister-idd-modal-selection").html(b).removeClass("hover"))}function G(){for(var b=n.dimensionsMap.length,a=DetailPage.StateController.getState().currentDimCombID.split("_"),d=!1,c=0;c<b;c++)if(c!==parseInt(n.dimOrder)&&"X"===a[c]){d=!0;break}return d}function D(b){b=b?h.getImmersivePartialStateBannerContent(c,parseInt(n.dimOrder)):h.getImmersiveFullStateBannerContent(c,parseInt(n.dimOrder));y("#twisterImmersiveDropdownBanner_"+n.dimOrder).html(b)}var n=this,y=w.$,
H,I;ROW_ID_PREFIX="twister_idd_";DEFAULT_DISPLAY_VALUE="Select";n.symbolForTriggeringDim="*";n.currentDimCombOnGlance="";n.twisterFeatureDiv=y("#twister_feature_div");n.mapOfDimToAsinMaps={};n.mapOfAsinToDimMaps={};n.$subNav=y(a.ID_SELECTOR+"nav-subnav");n.updateView=function(b){if(b[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_MOUSEOVER){var d;d=b[a.STRING_EVENT_DATA];var c=d[a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][n.dimOrder];d=d[a.STRING_EVENT_DIV_METADATA];n.dimOrder==d[a.STRING_DIM_INDEX]&&
(B(d[a.STRING_DIM_VALUE_INDEX]),b=h.getDimStyleData(b.dimCombID,n.dimValuesDisplayData.length,n.dimOrder,n.twisterControllerHandle.twisterAvailabilityCache,n.displayConfigStylesData),-1===d.dimValueIndex?C(DEFAULT_DISPLAY_VALUE,!0):C(c,!0),c=d.dimValueIndex,-1<c&&(b=b[c],b=b[a.STRING_STYLE],d=B(c),"twister-idd-row-selected"!==d&&("twister-idd-row-selected"===b&&(b="twister-idd-row-unavailable"===d?"twister-idd-row-unavailable-hover":"twister-idd-row-hover",u(c,b)),q(c,d,b))))}else{var f;eventData=
b[a.STRING_EVENT_DATA];eventDimInfo=eventData[a.STRING_EVENT_DIM_INFO];dimensionValueDisplay=eventDimInfo[a.STRING_DIMENSION_VALUES_DATA][n.dimOrder];divMetaData=eventData[a.STRING_EVENT_DIV_METADATA];dimensionSelectionData=eventData[a.STRING_DIMENSION_SELECTION_DATA];dimCombID=b.dimCombID;dimDataForThisInteraction=h.getDimStyleData(dimCombID,n.dimValuesDisplayData.length,n.dimOrder,n.twisterControllerHandle.twisterAvailabilityCache,n.displayConfigStylesData);0===dimensionSelectionData[n.dimOrder][a.STRING_IS_SELECTED]?
("click"===b.eventType&&(f=B("-1"))&&(f=B("-1"),q("-1",f,"twister-idd-row-selected")),C(DEFAULT_DISPLAY_VALUE,!1)):("click"===b.eventType&&(f=B("-1"))&&(f=B("-1"),q("-1",f,"twister-idd-row-available")),C(dimensionValueDisplay,!1));c=0;for(b=dimDataForThisInteraction.length;c<b;c++)if(d=dimDataForThisInteraction[c],d=d[a.STRING_STYLE],0===dimensionSelectionData[n.dimOrder][a.STRING_IS_SELECTED]&&d===a.CLASS_FOR_SWATCH_SELECT&&(d=a.CLASS_FOR_SWATCH_AVAILABLE),f=B(c))f=B(c),q(c,f,d),u(c,d)}};n.updateViewAfterTwisterUpdate=
function(b){var d=b[a.STRING_EVENT_DATA][a.STRING_DIMENSION_SELECTION_DATA][n.dimOrder][a.STRING_IS_SELECTED];b=G();if(h.isPartialState(n.dimensionsMap.length)&&(d||C(DEFAULT_DISPLAY_VALUE,!1),b)){for(var d=H[n.dimOrder].length,c=0;c<d;c++)y("#"+ROW_ID_PREFIX+n.dimensionName+"_"+c+" .idd_loading_slot_1").css("display","none"),y("#"+ROW_ID_PREFIX+n.dimensionName+"_"+c+" .idd_loading_slot_0").css("display","none");Twister.multiDimensionWeblabEnabled&&Twister.immersiveBannersPresent&&D(!0)}if(!b){b=
H[n.dimOrder].length;for(d=0;d<b;d++)c=y("#"+ROW_ID_PREFIX+n.dimensionName+"_"+d+" .idd_loading_slot_1"),c.html(""),c.css("display",""),c=y("#"+ROW_ID_PREFIX+n.dimensionName+"_"+d+" .idd_loading_slot_0"),c.html("Loading details..."),c.css("display","");Twister.multiDimensionWeblabEnabled&&Twister.immersiveBannersPresent&&D(!1)}y("#"+n.immersiveDropdownDivId+" .twister-idd-row").invalidateAppearedAlreadyCache()};(function(){n.dimensionName=f[a.STRING_DIM_NAME];n.dimOrder=f[a.STRING_DIM_ORDER];n.twisterControllerHandle=
f[a.STRING_TWISTER_CONTROLLER_HANDLE];n.dimValuesDisplayData=f[a.STRING_DIMENSION_VALUES_DATA];n.displayConfigStylesData=f[a.STRING_DISPLAY_CONFIG_STYLES_DATA];n.initialTwisterState=f[a.STRING_TWISTER_INITIAL_STATE_KEY];n.dimensionsMap=f[a.STRING_DIMENSIONS_MAP];n.dropdownButtonId="twister-idd-button-"+n.dimensionName;n.$dropdownButtonDiv=y("#"+n.dropdownButtonId);n.immersiveDropdownDivId="twister-idd-modal-"+n.dimensionName;n.immersiveDropdownDiv=y("#"+n.immersiveDropdownDivId);n.immersiveDropdownContentDiv=
y("#twister-idd-table_"+n.dimensionName);n.immersiveDropdownButtonId="twister-idd-table_"+n.dimensionName;n.dropdownDivPlaceHolderId=n.dimensionName+a.SUFFIX_FOR_DROPDOWN_PANEL_PLACEHOLDER;n.dropdownHeaderDiv=y("#twister-idd-modal-header_"+n.dimensionName);n.requestStack=[];n.maxBatchLimitForIMDD=8;n.MAX_AJAX_CONNECTIONS_ALLOWED=2;n.noOfOngoingConnections=0;n.dimType="Dropdown";n.modalAttachedToButton=0;H=n.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;I=n.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;
dimensionsList=n.twisterControllerHandle.twisterJSInitData.dimensions;n.initData={};n.initData.scopeSuffix="twister";n.symbolForTriggeringDim="*";n.displayConfigStylesData.available="twister-idd-row-available";n.displayConfigStylesData.invalid="twister-idd-row-unavailable";n.displayConfigStylesData.selected="twister-idd-row-selected";n.displayConfigStylesData.hidden="twister-idd-row-hidden";n.logger=new r(y,this,Twister.multiDimensionWeblabEnabled?"ImmersiveMultiDimensionView":"ImmersiveDropdownSingleDimensionView");
n.logger.init();n.isDropdownOpen=0;e()})()}});z.when("A","dp-js-logger").register("twister-logger-service",function(w,h){return function(a,c,e){var t=new h,r=e||"";this.logCounters=function(c){a.each(c,function(a,c){var d=r+":"+c.name;Twister.printConsoleLogs&&console.log("Logging metric: "+d+" -> "+c.value);t.logCounter(d,c.value)})};this.init=function(){var g=this;a(E).bind("beforeunload",function(){var a=c.getDataToUploadOnUnload();g.logCounters(a);return null})}}});z.when("A","twister-logger-service",
"twister-string-constants").register("twister-logger",function(w,h,a){return function(c,e,t){function r(d){if(!d)return null;var c=e.jsInteractionEnabledTime||Date.now();return(d[a.TWISTER_EVENT_DATA_TIME]||Date.now())-c}function g(a){if(a.hasOwnProperty("getMetricData"))return a.getMetricData();var d=a.stringVal;a=a.hasOwnProperty("getUploadValue")?a.getUploadValue():a.hasOwnProperty("currentValue")?a.currentValue:a.initValue;return isNaN(a)?null:{value:a,name:d}}var f=this,m;this.createFunctionTimer=
function(a){return{eventType:a,start:function(){this.startTime=Date.now()},stop:function(){f.logImpression(this.eventType,{duration:Date.now()-this.startTime})}}};this.eventTypes={CLICK:{metricList:["M_CLICK_COUNT","M_FIRST_CLICK"]},IMMERSIVE_DROPDOWN_OPENED:{metricList:["IMMERSIVE_DROPDOWN_OPEN_COUNT"]},IMMERSIVE_DROPDOWN_CLOSED:{metricList:["IMMERSIVE_DROPDOWN_CLOSE_COUNT"]},IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR:{metricList:["IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR_COUNT"]},IMMERSIVE_DROPDOWN_FULL_SCROLL:{metricList:["IMMERSIVE_DROPDOWN_FULL_SCROLL_COUNT"]},
IMMERSIVE_DROPDOWN_ROW_CLICK:{metricList:["IMMERSIVE_DROPDOWN_ROW_CLICK_COUNT"]},IMMERSIVE_DROPDOWN_SCROLL:{metricList:["IMMERSIVE_DROPDOWN_SCROLL_COUNT"]},IMMERSIVE_OPTION_CLICK:{metricList:["M_IMMERSIVE_CLICK_COUNT"]},IMMERSIVE_SWATCH_CLICK:{metricList:["M_IMMERSIVE_SWATCH_CLICK_COUNT"]},IMMERSIVE_MODAL_CLOSE_CLICK:{metricList:["M_IMMERSIVE_CLOSE_CLICK_COUNT"]},IMMODAL_VISIBLE_SCROLLBAR:{metricList:["M_IMMERSIVE_VISIBLE_SCROLL_COUNT"]},IMMODAL_FULL_SCROLL:{metricList:["M_IMMERSIVE_FULL_SCROLL_COUNT"]},
HOVER:{metricList:["M_HOVER_COUNT","M_FIRST_HOVER"]},HOVER_OUT:[],CACHE_HIT:{metricList:["M_CACHE_HIT","M_CACHE_USED"]},CACHE_MISS:{metricList:["M_CACHE_MISS","M_CACHE_USED"]},PAGE_UNLOAD:{metricList:["M_CACHE_UNUSED","M_CACHE_HIT_RATIO","M_CACHE_USED_RATIO"]},REQ_DIM_CHANGED:{metricList:["M_OTHER_REQ_DIM_SELECTED_COUNT","M_REQ_DIM_CHANGE_COUNT"]},DIM_SUM_LOAD:{metricList:["M_DIM_SUM_LOAD"]},CLICK_NA:{metricList:["M_NA_CLICK_COUNT"]},DIM_INIT:{metricList:["M_DIM_PAGENATION_COUNT"]},SCROLL:{metricList:["M_VIEWED_DIM_COUNT"]},
CLICK_VARIATION:{metricList:["M_DIM_CLICK_VIEWED_DIM_COUNT"]},EXPAND_BUTTON_CLICK:{metricList:["EXPAND_BUTTON_CLICK_COUNT"]},COLLAPSE_BUTTON_CLICK:{metricList:["COLLAPSE_BUTTON_CLICK_COUNT"]},EXPANDER:{metricList:["EXPANDER_COUNT"]}};var d=function(d,f){this.stringVal=f;this.initValue=NaN;this.deferLogging=!0;this.pagenationCountName=d;this.updateFunction=function(d){var c;c=25*Math.ceil(d[a.TWISTER_EVENT_DATA_PERCENTAGE]/25);var b=d[a.TWISTER_EVENT_DATA_DIV_METADATA][a.STRING_DIM_INDEX];this.metrics||
(this.metrics={});this.metrics[b]||(this.metrics[b]={});(this.metrics[b].percentage||0)<c&&(this.metrics[b].percentage=c);this.metrics[b].pageCount=d[a.TWISTER_EVENT_DATA_COUNT];this.metrics[b].dimDisplayType=d[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];Twister.printConsoleLogs&&console.log(this.stringVal+": index - "+b+" page - "+this.metrics[b].pageCount+" percentage - "+this.metrics[b].percentage)};this.getMetricData=function(){if(this.metrics){var a=[],d=this;c.each(this.metrics,function(b,c){var f=d.pagenationCountName+
c.pageCount;c.dimDisplayType&&(f=c.dimDisplayType+":"+f);a.push({name:f+"_"+(d.stringVal+c.percentage),value:1})});return a}}},p={M_CACHE_HIT:{stringVal:"CacheHit",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue=0<this.currentValue?this.currentValue+1:1;Twister.printConsoleLogs&&console.log("incrementing cacheHit count to "+this.currentValue)}},M_CACHE_MISS:{stringVal:"CacheMiss",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue=0<this.currentValue?
this.currentValue+1:1}},M_CACHE_HIT_RATIO:{stringVal:"CacheHitRatio",initValue:NaN,deferLogging:!0,updateFunction:function(a){a=f.getMetricCurrentValue("M_CACHE_HIT");var d=f.getMetricCurrentValue("M_CACHE_MISS");if(a||d)this.currentValue=Math.round(a/(a+d)*100)}},M_CACHE_USED:{stringVal:"CacheUsed",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue||(this.currentValue=this.initValue,this.usedIdCache={});a=a.id;this.usedIdCache.hasOwnProperty(a)||(this.currentValue++,this.usedIdCache[a]=
!0)}},M_CACHE_UNUSED:{stringVal:"CacheUnused",initValue:0,deferLogging:!0,updateFunction:function(a){a=e.twisterModel.pageRefresh.getModelCacheSize("full")-f.getMetricCurrentValue("M_CACHE_USED");this.currentValue=0>a?0:a}},M_CACHE_USED_RATIO:{stringVal:"CacheUsedRatio",initValue:NaN,deferLogging:!0,updateFunction:function(a){a=f.getMetricCurrentValue("M_CACHE_USED");var d=f.getMetricCurrentValue("M_CACHE_UNUSED");if(a||d)this.currentValue=Math.round(a/(a+d)*100)}},M_FIRST_CLICK:{stringVal:"FirstClick",
initValue:NaN,deferLogging:!0,updateFunction:function(a){this.firstClickLogged||(this.currentValue=r(a),Twister.printConsoleLogs&&console.log("first click = "+this.currentValue),this.firstClickLogged=!0)}},M_CLICK_COUNT:{stringVal:"ClickCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue=1;Twister.printConsoleLogs&&console.log("incrementing click count to "+this.currentValue)}},M_HOVER_COUNT:{stringVal:"HoverCount",initValue:0,deferLogging:!0,updateFunction:function(a){a=
a.divMetaData;this.lastHoveredDivMetaData&&a&&this.lastHoveredDivMetaData.dimIndex===a.dimIndex&&this.lastHoveredDivMetaData.dimValueIndex===a.dimValueIndex||(this.lastHoveredDivMetaData=a,this.currentValue=0<this.currentValue?this.currentValue+1:1,Twister.printConsoleLogs&&console.log("incrementing hover count to "+this.currentValue))}},M_FIRST_HOVER:{stringVal:"FirstHover",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.firstHoverLogged||(this.currentValue=r(a),Twister.printConsoleLogs&&
console.log("first hover = "+this.currentValue),this.firstHoverLogged=!0)}},M_OTHER_REQ_DIM_SELECTED_COUNT:{stringVal:"OtherReqDimSelectedCount",initValue:NaN,deferLogging:!0,updateFunction:function(a){var d=a.newReqDimValueIndex;a=a.oldReqDimValueIndex;"X"===d?this.currentValue||(this.lastReqDimValueIndex=a,this.currentValue=0):this.lastReqDimValueIndex!==d&&(this.lastReqDimValueIndex=d,this.currentValue||0===this.currentValue?this.currentValue++:"X"===a?this.currentValue=0:this.currentValue=1,Twister.printConsoleLogs&&
console.log("OtherReqDimSelectedCount incremented to : "+this.currentValue))}},M_REQ_DIM_CHANGE_COUNT:{stringVal:"ReqDimChangeCount",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("ReqDimChangeCount incremented to : "+this.currentValue)):this.currentValue=1}},M_DIM_SUM_LOAD:{stringVal:"DimSumLoadingDuration",initValue:NaN,deferLogging:!1,updateFunction:function(d){this.currentValue=d[a.TWISTER_EVENT_DATA_DURATION];
Twister.printConsoleLogs&&console.log("DimSumLoadingDuration: "+this.currentValue)}},M_NA_CLICK_COUNT:{stringVal:"NAClickCount",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;Twister.printConsoleLogs&&console.log("NAClick incremented to: "+this.currentValue)}},M_DIM_PAGENATION_COUNT:{stringVal:"DimPageCount",initValue:1,deferLogging:!1,updateFunction:function(d){this.pageCount=d[a.TWISTER_EVENT_DATA_COUNT]||1;this.dimDisplayType=d[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];
Twister.printConsoleLogs&&console.log("DimPageCount: "+this.pageCount)},getMetricData:function(){var a=this.stringVal+(this.pageCount||1);this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:1}}},M_VIEWED_DIM_COUNT:new d("DimPageCount","ViewedVariationCount"),M_DIM_CLICK_VIEWED_DIM_COUNT:new d("DimPageCount","ViewedVariationCountBeforeClick"),IMMERSIVE_DROPDOWN_ROW_CLICK_COUNT:{stringVal:"ImmersiveDropdownRowClickCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?
(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Row Click Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_OPEN_COUNT:{stringVal:"ImmersiveDropdownOpenedCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Opened Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_CLOSE_COUNT:{stringVal:"ImmersiveDropdownClosedCount",
initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Closed Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR_COUNT:{stringVal:"ImmersiveDropdownScrollBarCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Visible Scroll Bar Count incremented to : "+
this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_FULL_SCROLL_COUNT:{stringVal:"ImmersiveDropdownFullScrollCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Full Scroll Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_SCROLL_COUNT:{stringVal:"ImmersiveDropdownScrollCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?
(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Scroll Count incremented to : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_CLICK_COUNT:{stringVal:"ImmersiveClickCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Click Count incremented to : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_SWATCH_CLICK_COUNT:{stringVal:"ImmersiveSwatchClickCount",initValue:0,
deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive swatch click Count incremented to : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_CLOSE_CLICK_COUNT:{stringVal:"ImmersiveCloseClickCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal close click count : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_VISIBLE_SCROLL_COUNT:{stringVal:"ImmersiveScrollBarCount",
initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal scrollBar count : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_FULL_SCROLL_COUNT:{stringVal:"ImmersiveFullScrollCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal full scroll down count : "+this.currentValue)):this.currentValue=1}},EXPAND_BUTTON_CLICK_COUNT:{stringVal:"ExpandButtonClickCount",
initValue:0,deferLogging:!0,updateFunction:function(d){this.dimDisplayType=d[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Expand Button Click Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}},COLLAPSE_BUTTON_CLICK_COUNT:{stringVal:"CollapseButtonClickCount",initValue:0,deferLogging:!0,
updateFunction:function(d){this.dimDisplayType=d[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Collapse Button Click Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}},EXPANDER_COUNT:{stringVal:"ExpanderCount",initValue:0,deferLogging:!0,updateFunction:function(d){this.dimDisplayType=
d[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Expander Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}}};this.init=function(){m=t!==F?new h(c,this,t):new h(c,this);m.init()};this.logImpression=function(a,d){try{c.each(a.metricList,function(a,b){try{var c=p[b];c.updateFunction(d);
p[b].deferLogging||m.logCounters(Array(g(c)))}catch(f){Twister.printConsoleLogs&&console.log("metricUpdate failing for metric = "+b)}})}catch(f){Twister.printConsoleLogs&&console.log("logImpression failed")}};this.getDataToUploadOnUnload=function(a){this.logImpression(this.eventTypes.PAGE_UNLOAD);var d=[];c.each(p,function(a,f){try{if(f.deferLogging){var b=g(f);b&&(c.isArray(b)?d=c.merge(b,d):d.push(b))}}catch(e){}});return d};this.getMetricCurrentValue=function(a){try{return p[a].hasOwnProperty("currentValue")?
p[a].currentValue:p[a].initValue}catch(d){return p[a].initValue}}}});z.when("A").register("twister-availabilty-cache",function(w){return function(h){function a(c,r){var g=c+":"+r,f=c.split("_"),m=f.length,d=-1,p,v;if(null!==e.asinToRenderCache[g]&&e.asinToRenderCache[g]!==F)return e.asinToRenderCache[g];e.intermediateAsinToRenderCache[g]=!0;for(g=0;g<m;g++)if("X"===f[g]){d=g;break}if(-1===d)return p=null,null!=e.twisterVariationsData.dimToAsinMapData[c]&&(p=e.twisterVariationsData.dimToAsinMapData[c]),
p;for(var m=e.twisterVariationsData.dimensionValuesData[d].length,l=0;l<m&&(f[d]=l,g=f.join("_"),v=g+":"+r,e.intermediateAsinToRenderCache.hasOwnProperty(v)||(p=a(g,r),null===p||p===F));l++);return p}function c(a){for(var c in e.intermediateAsinToRenderCache)e.asinToRenderCache[c]=a,delete e.intermediateAsinToRenderCache[c];e.intermediateAsinToRenderCache={}}var e=this;e.twisterVariationsData=h;e.dimAvailabilityCache={};e.asinToRenderCache={};e.intermediateAsinToRenderCache={};e.isUpdateCacheReq=
!1;e.isDimCombinationAvailable=function(a){var c=a.split("_"),g,f=-1,m,d;g=c.length;if(null!==e.dimAvailabilityCache[a]&&e.dimAvailabilityCache[a]!==F)return e.dimAvailabilityCache[a];for(d=0;d<g;d++)if("X"===c[d]){f=d;break}if(-1===f)return m=!1,null!==e.twisterVariationsData.dimToAsinMapData[a]&&e.twisterVariationsData.dimToAsinMapData[a]!==F&&(m=!0),e.dimAvailabilityCache[a]=m;g=e.twisterVariationsData.dimensionValuesData[f].length;for(var p=0;p<g&&(c[f]=p,d=c.join("_"),null!==e.dimAvailabilityCache[d]&&
e.dimAvailabilityCache[d]!==F?m=e.dimAvailabilityCache[d]:(m=e.isDimCombinationAvailable(d),e.dimAvailabilityCache[d]=m),!m);p++);return e.dimAvailabilityCache[a]=m};e.gAsinToRender=function(t,r){var g=null,f,m,d=t.split("_"),p=d.length,v=t+":"+r;if(null!==e.asinToRenderCache[v]&&e.asinToRenderCache[v]!==F)return e.isUpdateCacheReq&&(c(e.asinToRenderCache[v]),e.isUpdateCacheReq=!1),e.asinToRenderCache[v];e.isUpdateCacheReq||(e.isUpdateCacheReq=!0);e.intermediateAsinToRenderCache.hasOwnProperty(v)||
(g=a(t,r));if(null!==g&&g!==F)return e.isUpdateCacheReq&&("X"===d[r]?(e.asinToRenderCache[v]=g,e.intermediateAsinToRenderCache={}):c(g),e.isUpdateCacheReq=!1),g;for(v=0;v<p;v++)if(v!=r&&"X"!=d[v]&&(g=d[v],d[v]="X",f=d.join("_"),m=f+":"+r,d[v]=g,!e.intermediateAsinToRenderCache.hasOwnProperty(m)&&(g=a(f,r),null!==g&&g!==F)))return e.isUpdateCacheReq&&(c(g),e.isUpdateCacheReq=!1),g;g=-1;for(v=0;v<p;v++)if("X"!==d[v]&&v!==r){g=v;break}if(-1===g)return"";d[g]="X";f=d.join("_");return e.gAsinToRender(f,
r)}}});z.when("A","twister-modal","twister-string-constants","twister-logger","aui-style-override").register("twister-dimension-views-ingress",function(w,h,a,c,e){return function(t,r){function g(){w.declarative(a.AUI_EVENT_FOR_INGRESS_PREFIX+t.dimOrder,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_TOUCHSTART],function(d){d.type===a.EVENT_TYPE_CLICK&&(f.logger.logImpression(f.logger.eventTypes.IMMERSIVE_OPTION_CLICK,null),f.modalHandle.openTwisterModal())});m(document).ready(function(){m(document).click(function(d){var c=
f.modalHandle.twisterModalDiv;m("#"+a.TWISTER_FEATURE_DIV_ID);d.target.id==c.attr("id")||c.has(d.target).length||d.target.id==m(f.ingressDiv).attr("id")||m(f.ingressDiv).has(d.target).length||f.modalHandle.closeTwisterModal()})})}var f=this,m=w.$;f.ingressDiv;f.dimensionData=t;f.modalHandle;if(Twister.multiDimensionWeblabEnabled)var d="ImmersiveMultiDimensionView";else Twister.isImmersiveExperience&&(d="ImmersiveSwatchSingleDimensionView");f.logger=d!==F?new c(m,this,d):new c(m,this);f.logger.init();
f.twisterJSInitData=r;(function(){f.modalHandle=new h(t,f.twisterJSInitData);f.ingressDiv="#"+a.TWISTER_INGRESS_ID_PREFIX+t.dimName;g();var d=f.modalHandle.closeTwisterModal;f.modalHandle.closeTwisterModal=function(a){e.ingressOverride(m(f.ingressDiv));d.apply(f.modalHandle,a)}})()}});z.when("A","twister-utils","scroll-event-handler","twister-modal-resize-helper","twister-string-constants","twister-logger").register("twister-modal",function(w,h,a,c,e,t){E.MAX_AJAX_CONNECTIONS_ALLOWED=2;return function(a,
g){function f(){w.declarative(e.AUI_EVENT_CLOSE_MODAL_PREFIX+a.dimName,[e.EVENT_TYPE_CLICK,e.EVENT_TYPE_TOUCHSTART],function(a){a.type===e.EVENT_TYPE_CLICK&&(b.logger.logImpression(b.logger.eventTypes.IMMERSIVE_MODAL_CLOSE_CLICK,null),b.closeTwisterModal())});x(document).keyup(function(a){27==a.keyCode&&b.closeTwisterModal()});b.twisterModalContentDiv.bind("scroll",function(){x(this).scrollTop()+x(this).innerHeight()>=this.scrollHeight?(b.logger.logImpression(b.logger.eventTypes.IMMODAL_FULL_SCROLL,
null),x(e.ID_SELECTOR+b.twisterModalDivId+" ."+e.CLASSNAME_FOR_STYLERBOTTOM).css("display","none")):(0==x(this).scrollTop()?x(e.ID_SELECTOR+b.twisterModalDivId+" ."+e.CLASSNAME_FOR_STYLERTOP).css("display","none"):x(e.ID_SELECTOR+b.twisterModalDivId+" ."+e.CLASSNAME_FOR_STYLERTOP).css("display","block"),x(e.ID_SELECTOR+b.twisterModalDivId+" ."+e.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"))});b.twisterModalContentDiv.live("DOMMouseScroll mousewheel  wheel",function(a){var d=x(this),c=this.scrollTop,
f=this.scrollHeight,g=d.height(),k=a.originalEvent.wheelDelta;"undefined"==typeof k&&(k=-a.originalEvent.deltaY);var n=function(){a.stopPropagation();a.preventDefault();return a.returnValue=!1};if(!(0<k)&&-k>f-g-c)return d.scrollTop(f),x(e.ID_SELECTOR+b.twisterModalDivId+" ."+e.CLASSNAME_FOR_STYLERBOTTOM).css("display","none"),n();if(0<=k&&k>=c)return x(e.ID_SELECTOR+b.twisterModalDivId+" ."+e.CLASSNAME_FOR_STYLERTOP).css("display","none"),d.scrollTop(0),n();x(e.ID_SELECTOR+b.twisterModalDivId+" ."+
e.CLASSNAME_FOR_STYLERBOTTOM).css("display","block");x(e.ID_SELECTOR+b.twisterModalDivId+" ."+e.CLASSNAME_FOR_STYLERTOP).css("display","block")})}function m(){return h.isPartialState(b.dimensions.length)}function d(){var a=e.AUI_EVENT_VISIBILITY_PREFIX+b.dimName;x(e.ID_SELECTOR+b.twisterModalDivId+" .swatches li").appearedInTwisterImmersiveView({force_process:!0,$window:b.twisterModalDiv,$scrollHandlerDiv:b.twisterModalContentDiv,eventToBeTriggered:a,blockIsAppear:m});w.on(a,function(a){for(a=a[0].slice(0);a.length;)b.requestStack.push(a.splice(0,
b.maxSwatchLimitForImmersive));p()})}function p(){if(!(0>=b.requestStack.length)&&b.noOfOngoingConnections!==MAX_AJAX_CONNECTIONS_ALLOWED){b.noOfOngoingConnections++;for(var a=b.requestStack.shift(),d=[],c=0,f=a.length;c<f;c++){var g=x(a[c]).find(".a-declarative"),k=g.attr("data-action"),g=JSON.parse(g.attr("data-"+k)).dimValueIndex;d.push(g)}A(d);p()}}function v(a){b.initData.fnToDetermineSelectedVariations?"function"===typeof b.initData.fnToDetermineSelectedVariations&&(b.currentDimCombOnGlance=
b.initData.fnToDetermineSelectedVariations.call(b)):(b.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,b.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID);return a?b.currentDimCombOnGlance.split("_"):b.currentDimCombOnGlance}function l(a){var d=v(!0);d[a]=b.symbolForTriggeringDim;var d=d.join("_"),c={},f={};a=dimensionValuesList[a];if(!b.mapOfDimToAsinMaps[d]){for(var g=0,k=a.length;g<k;g++){var e=d.replace(b.symbolForTriggeringDim,g);
(e=dimensionToAsinMap[e])?(c[a[g]]=e,f[e]=a[g]):c[a[g]]=""}c&&(b.mapOfDimToAsinMaps[d]=c);f&&(b.mapOfAsinToDimMaps[d]=f)}}function k(a,d,c){c=[];var f=v(!0).slice(0);f[d]=b.symbolForTriggeringDim;f=f.join("_");f=b.mapOfDimToAsinMaps[f];d=dimensionValuesList[d];for(var g=0,k=a.length;g<=k;g++){var e=a[g],l=d[e];l&&((l=f[l])?c.push(l):(e=x(".twister_"+b.dimName+"_"+e+" .twisterSlotDiv"),e.html("<span class='a-color-tertiary'>- -</span>"),e.css("display","")))}return c}function A(a){var d={};d.indices=
a;d.dimTriggeringDimSum=b.dimensionData.dimName;d.dimSubType=b.dimSubType;var c=dimensionsList.indexOf(d.dimTriggeringDimSum);d.dimType=dimensionsDisplayTypesArray[c];l(c);d.asinList=k(a,c,d);0==d.asinList.length?(b.noOfOngoingConnections--,p()):(d.dimCombId=v(!1),d.executeChunk=function(){var a=DetailPage.StateController.getState().currentDimCombID,c=a.split("_"),f=d.dimCombId.split("_");if(d.dimCombId===a)return!0;if(!h.isPartialState(b.dimensions.length)){for(var a=b.dimensions.length,g=!0,k=0;k<
a;k++)if(k!==parseInt(b.dimOrder)&&f[k]!==c[k]){g=!1;break}return g}return!1},d.chunk=function(a,d){a.dimensionValue=dimensionsList[d.dimIndexTriggeringDimSum]+"_"+dimensionValuesList[d.dimIndexTriggeringDimSum].indexOf(b.mapOfAsinToDimMaps[d.hashKey][a.ASIN]);var c=x(".twister_"+a.dimensionValue+" .twisterSlotDiv");c.css("display","");if(Twister.multiDimensionWeblabEnabled){for(var q="",f=0;a.Value.content.twisterSlotDiv[f];)"IMAGE"===b.dimSubType&&(q+="<div>"),q+=a.Value.content.twisterSlotDiv[f],
"IMAGE"===b.dimSubType&&(q+="</div>"),f++;c.html(q)}else c.html(a.Value.content.twisterSlotDiv)},d.success=function(a,d,c,q){(a=b.getWindowWidth())&&a<b.slotsEligibleWidth?b.resizeHelperHandle.fixSize(b.$twisterModalSwatches,b.swatchWrapper,b.swatchDynaWrapper,b.ingressWrapper,b):b.resizeHelperHandle.fixSize(b.$swatches,b.swatchWrapper,b.swatchDynaWrapper,b.ingressWrapper,b);b.noOfOngoingConnections--;p()},d.error=function(){b.noOfOngoingConnections--;p()},d.abort=function(){b.noOfOngoingConnections--;
p()},Twister.dimensionalSummaryModule.fetchDimSumData(d))}var b=this,x=w.$;b.maxSwatchLimitForImmersive;b.dimensionData=a;b.dimOrder=b.dimensionData.dimOrder;b.centerColDivId=e.ID_SELECTOR+e.CENTER_COL_DIV_ID;b.centerColDiv=x(b.centerColDivId);b.twisterModalDivId=e.TWISTER_MODAL_ID_PREFIX+b.dimensionData.dimName;b.twisterModalDiv=x(e.ID_SELECTOR+b.twisterModalDivId);b.variationsPrefix="variation_";b.swatchWrapperClassForAnimation="twisterSwatchWrapper";b.swatchWrapper=".twisterSwatchWrapper_"+b.dimOrder;
b.swatchDynaWrapper="twisterSwatchWrapperDynaStyle_"+b.dimOrder;b.ingressWrapper="twisterIngressWrapper_"+b.dimOrder;b.glanceSwatchContainer=e.ID_SELECTOR+b.variationsPrefix+b.dimensionData.dimName;b.twisterModalContentDiv=x(e.ID_SELECTOR+e.MODAL_CONTENTDIV_PREFIX+b.dimensionData.dimName);b.twisterModalHeaderDiv=x(e.ID_SELECTOR+e.MODAL_HEADER_PREFIX+b.dimensionData.dimName);b.resizeHelperHandle;b.twisterFeatureDiv=x(e.ID_SELECTOR+e.TWISTER_FEATURE_DIV_ID);b.$swatches=x(b.swatchWrapper);b.$twisterModalSwatches=
x(".twisterModal "+b.swatchWrapper);b.$subNav=x(e.ID_SELECTOR+"nav-subnav");b.modalWidth;b.contentDivWidth;b.contentDivHeight;b.requestStack=[];b.noOfOngoingConnections=0;b.isModalOpen=0;b.isSlotRowPopulated=!1;b.showModalFadeDuration=500;b.isIE8=x("html").hasClass("a-lt-ie9");b.slotsEligibleWidth=1100;b.windowWidth=E.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;b.executeResizeSwatchesForThin=0;b.logger=new t(x,this,Twister.multiDimensionWeblabEnabled?"ImmersiveMultiDimensionView":
"ImmersiveSwatchSingleDimensionView");b.logger.init();b.twisterJSInitData=g;b.symbolForTriggeringDim="*";b.currentDimCombOnGlance="";b.mapOfDimToAsinMaps={};b.mapOfAsinToDimMaps={};b.dimName=b.dimensionData.dimName;b.dimValuesDisplayData=b.dimensionData.dimValuesDisplayData;b.noOfDimValues=b.dimValuesDisplayData.length;b.maxSwatchLimitForImmersive=b.dimensionData.maxSwatchLimitForImmersive;b.dimSubType=b.dimensionData.dimSubType;b.dimensions=b.twisterJSInitData.dimensions;dimensionValuesList=b.twisterJSInitData.dimensionValuesData;
dimensionDisplayLabels=b.twisterJSInitData.dimensionsDisplay;dimensionToAsinMap=b.twisterJSInitData.dimToAsinMapData;asinToDimIndexMapData=b.twisterJSInitData.asinToDimIndexMapData;dimensionsList=b.twisterJSInitData.dimensions;dimensionsDisplayTypesArray=g.dimensionsDisplayType;b.initData={};b.initData.scopeSuffix="twister";b.symbolForTriggeringDim="*";b.resizeHelperHandle=new c;b.closeTwisterModal=function(){b.isModalOpen&&(h.enableTwisterDiv(),b.isIE8?b.twisterModalDiv.css("display","none"):b.twisterModalDiv.fadeOut(b.showModalFadeDuration),
b.isModalOpen=0)};b.resizeSwatchesForThinWidths=function(){var a=document.getElementById("twister").querySelectorAll(b.swatchWrapper),d=a.length;b.getWindowWidth();if(b.executeResizeSwatchesForThin)for(var c=b.executeResizeSwatchesForThin=0;c<d;c++)x(a[c]).addClass(e.CLASSNAME_FOR_THIN_WIDTH_OVERRIDE)};b.openTwisterModal=function(){if("centerCol"!==b.twisterModalDiv.parent().attr("id"))x(b.centerColDivId+" > hr").first().after(b.twisterModalDiv),f(),a.isSlotsEnabled&&d();else{var c=e.AUI_EVENT_VISIBILITY_PREFIX+
b.dimName;x(e.ID_SELECTOR+b.twisterModalDivId+" .swatches li").forceAppear({force_process:!0,$window:b.twisterModalDiv,$scrollHandlerDiv:b.twisterModalContentDiv,eventToBeTriggered:c,blockIsAppear:m})}b.fixModalSwatchesForThinWidths();b.twisterModalDiv.css("display","block");c=b.twisterModalDiv.css("transition-duration");b.$twisterModalSwatches.removeClass(b.swatchWrapperClassForAnimation);c!=F&&b.twisterModalDiv.css("transition-duration","0s");b.resizeHelperHandle.fixSize(b.$swatches,b.swatchWrapper,
b.swatchDynaWrapper,b.ingressWrapper);b.twisterModalDiv.css({"z-index":"290"});var q,g=x(b.glanceSwatchContainer+" li"),k;k=g.first()[0].getBoundingClientRect();q=k.left;for(var l=k.top,p=0,n=1,g=g.length;n<g;n++){var v;v=x(b.glanceSwatchContainer+" li:eq("+n+")")[0].getBoundingClientRect();if(5<Math.abs(l-v.top))break;else p=v.right}q=0<p?p-q+55:k.right-q+55;b.setModalWidth(q);b.twisterModalContentDiv.css({"max-height":"420px"});k=x(".twisterModal_innerDiv ul").outerHeight()>x(".twisterModal_innerDiv").outerHeight()+
15;-1<navigator.platform.indexOf("Win")&&k&&(q=parseInt(q)+25+"px",b.twisterModalDiv.css("width",q));k&&b.logger.logImpression(b.logger.eventTypes.IMMODAL_VISIBLE_SCROLLBAR,null);b.resizeSwatchesForThinWidths();b.twisterModalDiv.offset();b.twisterModalDiv.outerHeight();500<x(E).height()&&(b.isIE8?(l=b.twisterModalDiv.offset().top+document.documentElement.scrollTop+b.twisterModalDiv.outerHeight(),q=b.twisterModalDiv.offset().top+document.documentElement.scrollTop,k=b.$subNav.offset().top+document.documentElement.scrollTop+
b.$subNav.outerHeight()):(l=b.twisterModalDiv.offset().top+b.twisterModalDiv.outerHeight(),q=b.twisterModalDiv.offset().top,k=b.$subNav.offset().top+b.$subNav.outerHeight()),l>x(E).height()&&(l-=x(E).height(),q=q-l-30,0<l&&(q>k?b.twisterModalDiv.offset({top:q}):b.twisterModalDiv.offset({top:k+20}))));l=b.glanceSwatchContainer+" ."+b.ingressWrapper+":first";k="#"+b.twisterModalDivId+":first";b.isIE8?(offSetTopIngress=x(l).offset().top+document.documentElement.scrollTop,offSetTopModal=x(k).offset().top+
document.documentElement.scrollTop):(offSetTopIngress=x(l).offset().top,offSetTopModal=x(k).offset().top);q=x(k).outerHeight();l=x(l).outerHeight();q=offSetTopIngress+l-(offSetTopModal+q);0<q&&(q+=offSetTopModal,x(k).offset({top:q}));h.disableTwisterDiv();b.twisterModalContentDiv.get(0).scrollHeight>b.twisterModalContentDiv.get(0).clientHeight?x(e.ID_SELECTOR+b.twisterModalDivId+" ."+e.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"):x(e.ID_SELECTOR+b.twisterModalDivId+" ."+e.CLASSNAME_FOR_STYLERBOTTOM).css("display",
"none");b.twisterModalDiv.css("display","none");c!=F&&(b.$twisterModalSwatches.addClass(b.swatchWrapperClassForAnimation),b.twisterModalDiv.css("transition-duration",c));b.twisterModalDiv.fadeIn(b.showModalFadeDuration);b.isModalOpen=1};b.fixModalSwatchesForThinWidths=function(){var a=document.getElementById("twister").querySelectorAll(b.swatchWrapper),d=a.length,c=b.getWindowWidth();if(c&&c<b.slotsEligibleWidth)for(b.executeResizeSwatchesForThin=1,c=0;c<d;c++)x(a[c]).removeClass(e.CLASSNAME_FOR_THIN_WIDTH_OVERRIDE)};
b.getWindowWidth=function(){return E.innerWidth||document.documentElement.clientWidth||document.body.clientWidth};b.setModalWidth=function(a){var d=b.twisterFeatureDiv.css("width");a=parseInt(a);b.twisterModalDiv.css({width:a?a+"px":d});d=(a?a:d)-30;x(e.ID_SELECTOR+b.twisterModalDivId+" ."+e.CLASSNAME_FOR_STYLERBOTTOM).css("width",d+"px");x(e.ID_SELECTOR+b.twisterModalDivId+" ."+e.CLASSNAME_FOR_STYLERTOP).css("width",d+"px")}}});z.when("A","twister-string-constants").register("twister-utils",function(w,
h){var a=w.$,c=this,e={};c.windowWidth=E.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;c.immersiveTwisterOverlay=a("#"+h.TWISTER_FEATURE_DIV_ID+" #"+h.IMMERSIVE_TWISTER_OVERLAY);c.twisterFeatureDiv=a("#"+h.TWISTER_FEATURE_DIV_ID);(function(){for(var a="Array Object String Date RegExp Function Boolean Number Null Undefined".split(" "),c=0,g=a.length;c<g;c++)e["is"+a[c]]=function(a){return function(c){return Object.prototype.toString.call(c).slice(8,-1)===a}}(a[c])})();
return{enableTwisterDiv:function(){c.immersiveTwisterOverlay.css({opacity:"0",position:"absolute",width:"0px",height:"0px"})},disableTwisterDiv:function(){var a=c.twisterFeatureDiv.get(0).clientWidth,e=c.twisterFeatureDiv.get(0).clientHeight;c.immersiveTwisterOverlay.css({opacity:"0.8",position:"absolute",width:a,height:e,"background-color":"white","z-index":10})},isSwatchSelected:function(a,c){var g=Twister.isImmersiveExperience?"."+h.TWISTER_SWATCH_CLASS_PREFIX+c.dimensionsMap[a[h.STRING_DIM_INDEX]]+
"_"+a[h.STRING_DIM_VALUE_INDEX]:"#"+c.dimensionsMap[a[h.STRING_DIM_INDEX]]+"_"+a[h.STRING_DIM_VALUE_INDEX],f=[],e;if(w.$(g).is("li")){f=w.$(g);!Twister.isImmersiveExperience||0<f.length||(f=w.$("."+h.TWISTER_SWATCH_CLASS_PREFIX+c.dimensionsMap[a[h.STRING_DIM_INDEX]]+"_"+a[h.STRING_DIM_VALUE_INDEX]));for(var f=f.get(0).className.split(" "),g=0,d=f.length;g<d;g++){var p=f[g];if(0===p.indexOf("swatch")){e=p;break}}e!==h.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER&&e!==h.CLASS_FOR_SWATCH_UNAVAILABLE||w.$("#twisterPopover.twisterPopoverSkin").hide();
return e===h.CLASS_FOR_SWATCH_SELECT}return!1},isPartialState:function(a){for(var c=DetailPage.StateController.getState().currentDimCombID.split("_"),g=!1,f=0;f<a;f++)if("X"===c[f]){g=!0;break}return g},getImmersivePartialStateBannerContent:function(a,c){for(var g="",f=Twister.immersivePartialStateMessage,e=a.dimensionSelectionData,d=a.dimensionsDisplay,p=0;p<e.length;p++)p!==c&&0===e[p][h.STRING_IS_SELECTED]&&(g=g?g+", "+d[p]:d[p]);return f.replace("dimName",g)},getImmersiveFullStateBannerContent:function(a,
c){for(var g="",f=Twister.immersiveFullySelectedStateMessage,e=a.dimensionSelectionData,d=a.dimensions,p=a.dimensionsDisplay,v=DetailPage.StateController.getState().selected_variations,l=0;l<e.length;l++)l!==c&&1===e[l][h.STRING_IS_SELECTED]&&(g=g?g+", "+p[l]+" "+v[d[l]]:p[l]+" "+v[d[l]]);return f.replace("dimName",g)},isSmallerWidthScreen:function(){return 1100>c.windowWidth?1:0},getAttachedClass:function(c,e){var g=c[h.STRING_DIM_VALUE_INDEX],f="#"+e+"_"+g;if(w.$(f).is("li")){var m=[],d,m=w.$(f);
!Twister.isImmersiveExperience||0<m.length||(m=a("."+h.TWISTER_SWATCH_CLASS_PREFIX+e+"_"+g));m=m.get(0).className.split(" ");g=0;for(f=m.length;g<f;g++){var p=m[g];if(0===p.indexOf("swatch")){d=p;break}}return d}f=Twister.isImmersiveExperience?h.IMMERSIVE_DROPDOWN_ROW_PREFIX+e+"_"+g:h.NATIVE_DROPDOWN_DIV_PREFIX+e+"_"+g;return w.$(f).attr("class")},htmlUnescape:function(a){return String(a).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},
getDimStyleData:function(a,c,g,f,e){a=a.split("_");for(var d=[],p=a.slice(0),v,l,k=0;k<c;k++)l={},a[g]===k.toString()?v=h.STYLE_CLASS_TYPE_FOR_SELECTED:(p[g]=k,v=p.join("_"),v=(v=f.isDimCombinationAvailable(v))?h.STYLE_CLASS_TYPE_FOR_AVAILABLE:h.STYLE_CLASS_TYPE_FOR_INAVLID),v=e[v],l.style=v,d[k]=l;return d},getVisibleTableRows:function(c,e){var g=[],f=c.getBoundingClientRect();e||(e=a(c).find("tr"));if(e.length)for(var m=0;m<e.length;m++){var d=e.get(m),p=d.getBoundingClientRect(),v=(p.bottom-p.top)/
2,l=f.bottom+v;f.top-v<p.top&&l>p.bottom&&g.push(d);if(f.bottom<p.top)break}return g},reconstructCombinationWithDimValue:function(a,c,g){if(!a)return a;var f=a.split(h.CHAR_UNDERSCORE);if(c>=f.length)return a;f[c]=g;return f.join(h.CHAR_UNDERSCORE)},isTouchDevice:function(){return w.capabilities.touch},typeChecker:e,getQueryParams:function(c){c=c===F?{}:c;var e={},g=decodeURIComponent(E.location.href).match(/^.*?\?(.*?)(#.*)?$/);if(null===g||2>g.length||g[1]===F)return{};g=g[1].split("&");a.each(g,
function(a,g){var d=g.split("=");2>d.length||c.hasOwnProperty(d[0])||(e[d[0]]=d[1])});return e},stringTrim:function(a){var c=/^\s+/,g=/\s+$/;return String.prototype.trim?String.prototype.trim.call(a):a.replace(c,"").replace(g,"")}}});z.when("A").register("twister-string-constants",function(w){return{YES:"YES",NO:"NO",MTYPE_PARENT:"parent",MTYPE_PARTIAL:"partial",MTYPE_FULL:"full",MTYPE_MASTER:"master",AUI_DROPDOWN_EVENT_PREFIX:"a:dropdown:selected:",AUI_EVENT_FOR_SWATCHTHUMB:"swatchthumb-action",
CHAR_SEMICOLON:":",CHAR_UNDERSCORE:"_",CLASS_FOR_DROPDOWN_UNAVAILABLE:"dropdownUnavailable",CLASS_FOR_NEW_TWISTER_EVDD:"#newTwisterEVDD",CLASS_FOR_NON_JS_EVDD:"#nonJSEVDD",CLASS_FOR_SWATCH_AVAILABLE:"swatchAvailable",CLASS_FOR_SWATCH_HOVER:"swatchHover",CLASS_FOR_SWATCH_SELECT:"swatchSelect",CLASS_FOR_SWATCH_UNAVAILABLE:"swatchUnavailable",CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:"swatchUnavailableHover",AUI_CLASS_FOR_SWATCH_UNAVAILABLE:"a-button-unavailable",AUI_CLASS_FOR_SWATCH_SELECT:"a-button-selected",
CLASS_FOR_VODD_AVAILABLE:"voddAvailable",CLASS_FOR_VODD_HOVER:"voddHover",CLASS_FOR_VODD_SELECT:"voddSelect",CLASS_FOR_VODD_UNAVAILABLE:"voddUnavailable",CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION:"dropdownSelect",DROPDOWN_DIV_NAME:"dropdown_selected_",EVENT_TYPE_SHOWPOPOVER:"showPopover",EVENT_TYPE_HIDEPOPOVER:"hidePopover",EVENT_TYPE_UPDATEPOPOVERPOSITION:"updatePopoverPosition",EVENT_TYPE_DROPDOWN_CHANGE:"dropdownChange",EVENT_TYPE_CLICK:"click",EVENT_TYPE_MOUSEENTER:"mouseenter",EVENT_TYPE_MOUSELEAVE:"mouseleave",
EVENT_TYPE_MOUSEDOWN:"mousedown",EVENT_TYPE_MOUSEOUT:"mouseOut",EVENT_TYPE_MOUSEOVER:"mouseOver",EVENT_TYPE_TOUCHSTART:"touchstart",EVENT_TYPE_TOUCHEND:"touchend",EVENT_TYPE_TOUCHMOVE:"touchmove",EVENT_TYPE_KEYPRESS:"keypress",ID_SELECTOR:"#",TWISTER_POPOVER:"twisterPopover",INDEX_FOR_SELECT_OPTION:"-1",INIT_DATA_ASIN_TO_DIM_INDEX_MAP:"asinToDimIndexMapData",INIT_DATA_DELETED_LANDING_ASIN_INFO:"deletedLandingAsinInfo",INIT_DATA_DIM_TO_ASIN_MAP:"dimToAsinMapData",INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA:"dimensionValuesDisplayData",
INIT_DATA_DIMENSIONS_DISPLAY:"dimensionsDisplay",INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP:"dimensionsDisplayType",INIT_DATA_DIMENSIONS_MAP:"dimensions",INIT_DATA_VARIATIONS_DISPLAY_LABELS:"variationDisplayLabels",INIT_DATA_MAX_POPOVER_HEIGHT:"maxPopoverHeight",INIT_DATA_VISIBLE_ROW_COUNT:"visibleRowCount",INIT_DATA_POPOVER_POSITION:"popoverPosition",INIT_DATA_ANIMATE_BUTTON_CONTENT:"animateButtonContent",INIT_DATA_DISPLAY_TYPE_PROPERTIES:"displayTypeProperties",NATIVE_DROPDOWN_DIV_PREFIX:"#native_",
STRING_CSS_CLASS:"css_class",STRING_DIM_COMB_ID:"dimCombID",STRING_DIM_DATA:"dimData",STRING_DIM_INDEX:"dimIndex",STRING_DIM_NAME:"dimName",STRING_DIM_ORDER:"dimOrder",STRING_DIM_VALUE_INDEX:"dimValueIndex",STRING_DIMENSION_DISPLAY_MAP:"dimensionDisplayMap",STRING_DIMENSION_DISPLAY_STRING:"dimensionDisplayString",STRING_DIMENSION_SELECTION_DATA:"dimensionSelectionData",STRING_DIMENSION_VALUES_DATA:"dimensionValuesData",STRING_DIMENSION_VALUES_DATA_GLOBAL:"dimensionValuesDataGlobal",STRING_DIMENSIONS_MAP:"dimensionsMap",
STRING_DISPLAY_CONFIG_STYLES_DATA:"displayConfigStylesData",STRING_EVENT_DATA:"eventData",STRING_EVENT_DIM_DATA:"dimData",STRING_EVENT_DIM_INFO:"eventDimInfo",STRING_EVENT_DIV_METADATA:"divMetaData",STRING_EVENT_POPOVER_DATA:"popoverData",STRING_EVENT_TYPE:"eventType",STRING_HIDE_POPOVER:"hidePopover",STRING_HOVER_MS:"hoverMS",STRING_IS_REQUIRED:"isRequired",STRING_IS_SELECTED:"isSelected",STRING_NATIVE_CSS_CLASS:"native_css_class",STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER:"showDimSecondUnavailablePopover",
STRING_STYLE:"style",STRING_TWISTER_CONTROLLER_HANDLE:"twisterControllerHandle",STRING_TWISTER_INITIAL_STATE_KEY:"twisterInitialState",STRING_UNAVAILABLE_POPOVER_STRING_VALUE:"unavailablePopOverStringValue",STRING_ACCESSIBILITY_CURRENT_SELECTION:"twisterAccessibilityCurrentSelection",STRING_USE_MS:"useMS",STYLE_CLASS_TYPE_FOR_AVAILABLE:"available",STYLE_CLASS_TYPE_FOR_INAVLID:"invalid",STYLE_CLASS_TYPE_FOR_SELECTED:"selected",TWISTER_DIMENSION_VIEW_DROPDOWN:"dropdown",TWISTER_DIMENSION_VIEW_EVDD:"etdd",
TWISTER_DIMENSION_VIEW_SINGLETON:"singleton",TWISTER_DIMENSION_VIEW_SWATCH:"swatch",TWISTER_DIMENSION_VIEW_VODD:"vodd",TWISTER_DIMENSION_VIEW_COUNTER:"counter",TWISTER_DIMENSION_VIEW_SHELF:"shelf",TWISTER_EVENT_DATA_DIV_METADATA:"divMetaData",TWISTER_EVENT_DATA_DISPLAY_TYPE:"dimDisplayType",TWISTER_EVENT_DATA_TIME:"time",TWISTER_EVENT_DATA_DURATION:"duration",TWISTER_EVENT_DATA_COUNT:"count",TWISTER_EVENT_DATA_PERCENTAGE:"percentage",TWISTER_EVENT_DATA_DIM_INDEX:"dimIndex",MODAL_SWATCH_PREFIX:"modal_",
STRING_MAX_SWATCHES_IMMERSIVE_VIEW:"maxSwatchesForImmersiveView",TWISTER_SWATCH_CLASS_PREFIX:"twister_",PRICE_SLOT_CLASS_NAME:"twister_swatch_price",CLASS_FOR_PRICE_SECONDARY:"a-color-secondary",CLASS_FOR_PRICE_SELECTED:"a-color-price",TWISTER_MODAL_ID_PREFIX:"twister_modal_",TWISTER_INGRESS_ID_PREFIX:"twister_ingress_",AUI_EVENT_FOR_INGRESS_PREFIX:"twister-ingress-click-",TWISTER_FEATURE_DIV_ID:"twister_feature_div",IMMERSIVE_TWISTER_OVERLAY:"immersiveTwisterOverlay",CENTER_COL_DIV_ID:"centerCol",
MODAL_CONTENTDIV_PREFIX:"twister_modal_innerDiv_",MODAL_HEADER_PREFIX:"twister_modal_header_",IMMERSIVE_DROPDOWN_ROW_PREFIX:"twister_idd_",DYNAMIC_STYLE_RULES_ID:"twisterSwatchWrapperDynaStyle",CLASSNAME_FOR_STYLERBOTTOM:"twisterModal_stylerBottom",CLASSNAME_FOR_STYLERTOP:"twisterModal_stylerTop",CLASSNAME_FOR_SWATCH:"twisterSwatchWrapper",CLASSNAME_FOR_INGRESS:"twisterIngressWrapper",AUI_EVENT_CLOSE_MODAL_PREFIX:"close-twisterModal-",AUI_EVENT_VISIBILITY_PREFIX:"twister-appear-",CLASSNAME_FOR_THIN_WIDTH_OVERRIDE:"thinWidthOverride",
DIMENSION_SUB_TYPE:"dimensionDisplaySubType",AUI_EVENT_FOR_COUNTER:"twister_counter-action",EXPANDED_VIEW_ENABLED:"expandedViewEnabled",MIN_ASINS_FOR_EXPANDED_VIEW:"minAsinForExpandedView",MIN_ASINS_FOR_EXPANDED_VIEW_TEXT:"minAsinForExpandedViewText",MIN_ASINS_FOR_EXPANDED_VIEW_IMAGE:"minAsinForExpandedViewImage",MIN_ASINS_FOR_EXPANDED_SCROLL:"minAsinForExpandedScroll",MIN_ASINS_FOR_EXPANDED_SCROLL_TEXT:"minAsinForExpandedScrollText",MIN_ASINS_FOR_EXPANDED_SCROLL_IMAGE:"minAsinForExpandedScrollImage",
SUFFIX_FOR_DROPDOWN_PANEL_PLACEHOLDER:"_placeHolderDivForDD"}});z.when("A").register("aui-style-override",function(w){return{doOverride:function(){},ingressOverride:function(){}}});z.when("A").register("twister-thumbnailModule",function(w){var h=w.$;return{attach:function(a){var c=h("#dropdown_selected_thumbnail_"+a);a=h("#dropdown_selected_"+a+" .a-button-inner");0<c.length&&0<a.length&&(c.detach(),a.append(c),"#"!==c.attr("src")&&c.show())},update:function(a){var c=h("#native_dropdown_selected_"+
a).val().split(",")[0];"undefined"!==typeof c&&"-1"!==c&&(c=h("#native_"+a+"_"+c),c=0<c.length?c.attr("data-a-image-source"):"",a=h("#dropdown_selected_thumbnail_"+a),0<a.length&&""!==c?(a.attr("src",c),a.show()):a.hide())},preloadAllThumbnails:function(a){if(a){var c=h("#native_dropdown_selected_"+a+" option");a=h("#dropdown_selected_"+a).attr("data-a-class");c&&a&&-1!==a.indexOf("twister-image-dropdown")&&h.each(c,function(a,c){var r=c.getAttribute("data-a-image-source");r&&((new Image).src=r)})}}}});
z.when("A","twister-string-constants","scroll-event-handler").execute(function(w,h,a){(function(c){function e(a){function d(d,f){var b=c(f).get(0).getBoundingClientRect(),g=a.$window.get(0).getBoundingClientRect(),e=g.right-g.left,q=g.bottom-g.top;return g.top<b.top&&b.top<g.top+q&&g.left<b.left&&b.left<g.left+e}g=!1;for(var f=0,e=a.selector.length;f<e;f++){var l=[];a.blockIsAppear!==F&&a.blockIsAppear()||(l=c(a.selector[f]).filter(function(){return c(this).is(d)}).not(r));0<l.length&&(w.trigger(a.eventToBeTriggered,
[l.clone()]),r=r.add(l))}}var t=[],r=c(),g=!1,f={interval:250,force_process:!1};c.fn.extend({appearedInTwisterImmersiveView:function(m){var d=c.extend({},f,m||{}),p=this.selector||this;d.selector=[];d.selector[0]=p;var r=function(){g||(g=!0,setTimeout(function(){e(d)},d.interval))};new a(200,m.$scrollHandlerDiv,r);m.$window.resize(r);d.force_process&&setTimeout(function(){e(d)},d.interval);t.push(p);return c(p)},forceAppear:function(a){var d=c.extend({},f,a||{});a=this.selector||this;d.selector=[];
d.selector[0]=a;setTimeout(function(){e(d)},d.interval)},invalidateAppearedAlreadyCache:function(a){r=r.not(this.selector)}})})(w.$)});z.when("A","twister-utils","twister-string-constants","twister-expander").register("twister-counter",function(w,h,a,c){return function(e,t){function r(b){q=p(a.ID_SELECTOR+b.data.dimValueSelectedID);var c=h.reconstructCombinationWithDimValue(d.currDimCombID,b.data[a.TWISTER_EVENT_DATA_DIM_INDEX],b.data[a.STRING_DIM_VALUE_INDEX]);d.currDimCombID!=c&&d.twisterControllerHandle&&
d.twisterControllerHandle.handleClick(b.data)}function g(b,a){var d=p(A+a);b?d.addClass("hoverSwatch"):d.removeClass("hoverSwatch")}function f(){"undefined"===typeof d.$variationList&&(d.$variationList=p("#"+a.TWISTER_DIMENSION_VIEW_COUNTER+"-"+d.dimName+" .counterSwatch"));for(var b=d.$variationList,c=d.initialTwisterState.getCurrentDimCombID(),q=parseInt(d.dimOrder),f=[],g=0;g<b.length;g++){5===f.length&&(m(f),f=[]);var k;(k=b[g].id)?(k=k.split(a.CHAR_UNDERSCORE),k=k[k.length-1]):k=-1;k=h.reconstructCombinationWithDimValue(c,
q,k);(k=d.dimensionToAsinMap[k])?f.push(k):p(b[g]).addClass("counter_unavailable")}0<f.length&&m(f)}function m(b){var a=G.createFunctionTimer(G.eventTypes.DIM_SUM_LOAD);a.start();var c=function(){a.stop()};0<b.length&&Twister.dimensionalSummaryModule.fetchDimSumData({indices:F,asinList:b,dimTriggeringDimSum:d.dimName,dimSubType:d.dimSubType,dimType:d.dimType,chunk:function(b){var a=parseInt(D[b.ASIN][parseInt(d.dimOrder)]),a=p(A+a);0<b.Value.content.twisterSlotDiv.length&&a.removeClass("counter_unavailable")},
success:function(b,a,d,q){c()},error:c,abort:c})}var d=this,p=w.$,v=p(a.ID_SELECTOR+"expanderButton"),l=p(a.ID_SELECTOR+"collapseButton"),k,A,b,x,B,q,u,C,G,D;d.updateView=function(b){if(b[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_CLICK&&d.currDimCombID!=b[a.STRING_DIM_COMB_ID]){var c=b[a.STRING_EVENT_DATA][a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][d.dimOrder];u.css("z-index",0);q.css("z-index",1);k.html(c);q=p(A+b.dimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]);q.removeClass("hoverSwatch");
q.addClass("selectedSwatch");u.removeClass("selectedSwatch");f();d.currDimCombID=b[a.STRING_DIM_COMB_ID];w.trigger("counter:select",d.currDimCombID);null!=C&&(C.updateSelectedVariation(d.currDimCombID,q),C.isCollapsed&&B&&C.handleVariationSwap(B),C.isCollapsed?C.handleVariationSwap(!0):C.scrollVariationIntoView());u=q}};d.selectCounterVariationAtIndex=function(b){B=!0;p(A+b).children().click()};d.getCurrentSelectedIndex=function(){return parseInt(d.currDimCombID,10)};d.expandCounter=function(){null!=
C&&C.isCollapsed&&C.handleExpand()};d.onInitializeTwister=function(){f()};d.dimOrder=t[a.STRING_DIM_ORDER];d.dimName=t[a.STRING_DIM_NAME];d.dimensionsMap=t[a.STRING_DIMENSIONS_MAP];d.dimNameDisplayString=t[a.STRING_DIMENSION_DISPLAY_STRING];d.dimValuesDisplayData=t[a.STRING_DIMENSION_VALUES_DATA];d.twisterControllerHandle=t[a.STRING_TWISTER_CONTROLLER_HANDLE];d.initialTwisterState=t[a.STRING_TWISTER_INITIAL_STATE_KEY];d.dimensionToAsinMap=d.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;
e.useCounterConfig?(d.expandedViewEnabled=e[a.EXPANDED_VIEW_ENABLED],d.minAsinsForExpandedView=e[a.MIN_ASINS_FOR_EXPANDED_VIEW],d.minAsinsForExpandedScroll=e[a.MIN_ASINS_FOR_EXPANDED_SCROLL]):(d.displayTypeProperties=e[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][d.dimOrder],d.expandedViewEnabled=d.displayTypeProperties[a.EXPANDED_VIEW_ENABLED],d.minAsinsForExpandedView=d.displayTypeProperties[a.MIN_ASINS_FOR_EXPANDED_VIEW],d.minAsinsForExpandedScroll=d.displayTypeProperties[a.MIN_ASINS_FOR_EXPANDED_SCROLL]);
d.dimSubType=t.dimensionDisplaySubType;d.currDimCombID=d.initialTwisterState.getCurrentDimCombID();G=d.twisterControllerHandle.logger;D=d.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;k=p(a.ID_SELECTOR+"counter-label-"+d.dimName+" .selection");A=a.ID_SELECTOR+d.dimName+a.CHAR_UNDERSCORE;b=p(a.ID_SELECTOR+"counterSwatchSection-"+d.dimName);x=d.dimValuesDisplayData.length;u=p(A+d.currDimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]);q=p(A+d.currDimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]);
B=!1;(function(){p(".counterSwatch").each(function(b){b=p(this);b.parent().is("a")&&b.unwrap()})})();(function(){var b=a.AUI_EVENT_FOR_COUNTER;if(h.isTouchDevice()){var c=!1,q="";w.declarative(b,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_TOUCHSTART,a.EVENT_TYPE_TOUCHEND,a.EVENT_TYPE_TOUCHMOVE],function(b){b.data&&(b.data.dimDisplayType=a.TWISTER_DIMENSION_VIEW_COUNTER);b.type===a.EVENT_TYPE_CLICK?r(b):b.type===a.EVENT_TYPE_TOUCHSTART?(q=b.data.dimValueSelectedID,c=!1):b.type===a.EVENT_TYPE_TOUCHMOVE?c=!0:b.type!==
a.EVENT_TYPE_TOUCHEND||c||q!==b.data.dimValueSelectedID||(q="",c=!1,r(b));B=!1})}else w.declarative(b,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_MOUSEENTER,a.EVENT_TYPE_MOUSELEAVE],function(b){b.data&&(b.data.dimDisplayType=a.TWISTER_DIMENSION_VIEW_COUNTER);b.type===a.EVENT_TYPE_CLICK?r(b):b.type===a.EVENT_TYPE_MOUSEENTER?(d.twisterControllerHandle&&d.twisterControllerHandle.handleMouseOver(b.data),b=b.data[a.STRING_DIM_VALUE_INDEX],p(A+b).css("cursor","pointer"),b!=d.currDimCombID&&(p(A+b).css("z-index",1),
g(!0,b),k.html(d.dimValuesDisplayData[b]))):b.type===a.EVENT_TYPE_MOUSELEAVE&&(d.twisterControllerHandle&&d.twisterControllerHandle.handleMouseOut(b.data,b.data[a.STRING_DIM_INDEX],b.data[a.STRING_DIM_VALUE_INDEX]),b=b.data[a.STRING_DIM_VALUE_INDEX],b!=d.currDimCombID&&(p(A+b).css("z-index",0),g(!1,b),k.html(d.dimValuesDisplayData[d.currDimCombID])));B=!1})})();d.expandedViewEnabled&&x>=d.minAsinsForExpandedView&&(C=new c({minHeightForExpandedSection:55,maxHeightForExpandedSection:155,maxHeightForExpandedSectionInView:101,
scrollAnimationDuration:500,expanderSection:b,useExpanderScrollView:x>=d.minAsinsForExpandedScroll-1,minAsinsForExpandedView:d.minAsinsForExpandedView,expanderButtonReplacementIndex:d.minAsinsForExpandedView-2,dimValuePrefix:A,initSelectedID:d.currDimCombID,swatchImageSize:54,swatchImageMargin:10,expanderButton:v,collapseButton:l,dimDisplayType:"counter",logger:G,dimOrder:d.dimOrder}));E.CounterScenesController&&E.CounterScenesController.registerCounter(d)}});z.when("A","twister-utils","twister-string-constants",
"twister-expander").register("twister-shelf",function(w,h,a,c){return function(e,t){function r(){z=new c({minHeightForExpandedSection:89,maxHeightForExpandedSection:209,maxHeightForExpandedSectionInView:135,scrollAnimationDuration:500,expanderSection:q,useExpanderScrollView:u>=l.minAsinsForExpandedScroll-1,minAsinsForExpandedView:l.minAsinsForExpandedView,expanderButtonReplacementIndex:l.minAsinsForExpandedView-1,dimValuePrefix:B,initSelectedID:l.currDimCombID,swatchImageSize:74,swatchImageMargin:17,
expanderButton:A,collapseButton:b,expanderHidesVariation:!1,dimDisplayType:"shelf",logger:D,dimOrder:l.dimOrder,synchronousPreExpanderCallback:function(){q.removeClass("twisterShelf_isCollapsed");q.removeClass("twisterShelf_isCollapsedAnimated");q.addClass("twisterShelf_isExpanded");q.addClass("twisterShelf_isExpandedAnimated");d()},synchronousPostExpanderCallback:function(){m();q.removeClass("twisterShelf_isExpandedAnimated")},synchronousPreCollapseCallback:function(){q.removeClass("twisterShelf_isExpanded");
q.removeClass("twisterShelf_isExpandedAnimated");q.addClass("twisterShelf_isCollapsed");q.addClass("twisterShelf_isCollapsedAnimated");d()},synchronousPostCollapseCallback:function(){m();q.removeClass("twisterShelf_isCollapsedAnimated")}})}function g(b){if(!b)return-1;b=b.split(a.CHAR_UNDERSCORE);return b[b.length-1]}function f(b){return{dimIndex:l.dimOrder,dimValueIndex:b?g(b.id):null,dimDisplayType:a.TWISTER_DIMENSION_VIEW_SHELF,dimValueSelectedID:b.id}}function m(){d();C.bind(a.EVENT_TYPE_CLICK,
function(b){b=f(b.currentTarget);n=k(a.ID_SELECTOR+b.dimValueSelectedID);var d=h.reconstructCombinationWithDimValue(l.currDimCombID,b.dimIndex,b.dimValueIndex);l.currDimCombID!=d&&l.twisterControllerHandle&&l.twisterControllerHandle.handleClick(b)});h.isTouchDevice()||(C.bind(a.EVENT_TYPE_MOUSEENTER,function(b){b=f(b.currentTarget);l.twisterControllerHandle&&l.twisterControllerHandle.handleMouseOver(b);b=b[a.STRING_DIM_VALUE_INDEX];var d=k(B+b);d.css("cursor","pointer");b!=l.currDimCombID&&(d.addClass("hoverSwatch"),
x.html(l.dimValuesDisplayData[b]))}),C.bind(a.EVENT_TYPE_MOUSELEAVE,function(b){b=f(b.currentTarget);l.twisterControllerHandle&&l.twisterControllerHandle.handleMouseOut(b,b[a.STRING_DIM_INDEX],b[a.STRING_DIM_VALUE_INDEX]);b=b[a.STRING_DIM_VALUE_INDEX];var d=k(B+b);b!=l.currDimCombID&&(d.removeClass("hoverSwatch"),x.html(l.dimValuesDisplayData[l.currDimCombID]))}))}function d(){C.unbind(a.EVENT_TYPE_CLICK);h.isTouchDevice()||(C.unbind(a.EVENT_TYPE_MOUSEENTER),C.unbind(a.EVENT_TYPE_MOUSELEAVE))}function p(b){"undefined"===
typeof l.$variationList&&(l.$variationList=k("#"+a.TWISTER_DIMENSION_VIEW_SHELF+"-"+l.dimName+" .twisterShelf_swatch"));for(var d=l.$variationList,c=l.initialTwisterState.getCurrentDimCombID(),q=parseInt(l.dimOrder),f=[],e=0;e<d.length;e++){5===f.length&&(v(f),f=[]);var n=g(d[e].id),n=h.reconstructCombinationWithDimValue(c,q,n);if(n=l.dimensionToAsinMap[n])b?k(".twisterShelf_container #"+l.dimName+"_"+G[n]+" .twisterShelf_infoSection_slots").length||f.push(n):f.push(n);else{var n=k(d[e]),x,m=d[e];
x=l.initialTwisterState.getCurrentDimCombID().split(a.CHAR_UNDERSCORE);var p=[],r=parseInt(l.dimOrder),m=g(m.id);x[r]=m;for(var m=x.join(a.CHAR_UNDERSCORE),m=l.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(m,r),m=G[m],u=0;u<x.length;u++)r!==u&&p.push(l.dimensionValuesList[u][m[u]]);x=p.join(", ");n.addClass("shelf_unavailable");"undefined"!==typeof x?(n.find(".variation-combination-text").text(x),n.find(".unavailable-text").removeClass("aok-hidden"),n.find(".shelf_loading_placeholder").hide(),
n.find(".unavailableV2").removeClass("aok-hidden"),n=n.find(".twisterShelf_infoSection"),n.empty(),n.addClass("aok-hidden")):(n.find(".shelf_loading_placeholder").hide(),n.find(".outofstock-text").removeClass("aok-hidden"),n.find(".shelf-outofstock").removeClass("aok-hidden"))}}0<f.length&&v(f)}function v(b){var a=D.createFunctionTimer(D.eventTypes.DIM_SUM_LOAD);a.start();var d=function(){a.stop()};0<b.length&&Twister.dimensionalSummaryModule.fetchDimSumData({indices:F,asinList:b,dimTriggeringDimSum:l.dimName,
dimSubType:l.dimSubType,dimType:l.dimType,chunk:function(b){if(b&&"object"===typeof b){var a=parseInt(G[b.ASIN][parseInt(l.dimOrder)]),a=k(B+a);if(b.Value&&b.Value.content&&b.Value.content.twisterSlotDiv){var d=k.trim(b.Value.content.twisterSlotDiv);if(0<d.length){a.removeClass("shelf_unavailable");a.find(".unavailableV2").addClass("aok-hidden");a.find(".outofstock-text").addClass("aok-hidden");a.find(".shelf-outofstock").addClass("aok-hidden");a.find(".unavailable-text").addClass("aok-hidden");b=
a.find(".twisterShelf_infoSection");b.empty();b.addClass("aok-hidden");b.append(d);d=a.find(".twisterShelf_infoSection .price_slot_ppu, .twisterShelf_infoSection .deal_slot_ppu");if(d.length){var c=k("<p></p>");c.append(d);b.append(c);d=a.find(".twisterShelf_infoSection i");a=a.find(".twisterShelf_infoSection .olpWrapper");c=k(".twisterShelf_swatchSection.twisterShelf_isCollapsed");d.length&&a.length&&c.length&&b.addClass("hasAllItems")}b.removeClass("aok-hidden")}}}},success:function(b,a,c,q){d()},
error:d,abort:d})}var l=this,k=w.$,A,b,x,B,q,u,C,G,D,n,y,z;l.updateView=function(b){if(b[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_CLICK&&l.currDimCombID!=b[a.STRING_DIM_COMB_ID]){for(var d=b[a.STRING_EVENT_DATA][a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][l.dimOrder],c=0;c<l.$variationList.length;c++){var q=k(l.$variationList[c]);q.addClass("shelf_loading_placeholder");q.find("twisterShelf_infoSection").removeClass("aok-hidden");q.find("twisterShelf_infoSection").addClass("twisterShelf_placeholder_price");
q.find("twisterShelf_infoSection").addClass("twisterShelf_placeholder_badge");q.find("unavailableV2").addClass("aok-hidden");q.find("twister_swatch_price").addClass("aok-hidden")}x.html(d);n=k(B+b.dimCombID.split(a.CHAR_UNDERSCORE)[l.dimOrder]);n.removeClass("hoverSwatch");y.removeClass("selectedSwatch");n.addClass("selectedSwatch");p(!1);l.currDimCombID=b[a.STRING_DIM_COMB_ID];null!=z&&(z.updateSelectedVariation(l.currDimCombID,n),z.isCollapsed?z.handleVariationSwap(!0):z.scrollVariationIntoView());
y=n}};l.onInitializeTwister=function(){p(!1)};l.dimOrder=t[a.STRING_DIM_ORDER];l.dimName=t[a.STRING_DIM_NAME];l.dimensionsMap=t[a.STRING_DIMENSIONS_MAP];l.dimNameDisplayString=t[a.STRING_DIMENSION_DISPLAY_STRING];l.dimValuesDisplayData=t[a.STRING_DIMENSION_VALUES_DATA];l.twisterControllerHandle=t[a.STRING_TWISTER_CONTROLLER_HANDLE];l.initialTwisterState=t[a.STRING_TWISTER_INITIAL_STATE_KEY];l.expandedViewEnabled=e[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][l.dimOrder][a.EXPANDED_VIEW_ENABLED];l.dimensionToAsinMap=
l.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;"IMAGE"===t[a.DIMENSION_SUB_TYPE]?(l.minAsinsForExpandedView=e[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][l.dimOrder][a.MIN_ASINS_FOR_EXPANDED_VIEW_IMAGE],l.minAsinsForExpandedScroll=e[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][l.dimOrder][a.MIN_ASINS_FOR_EXPANDED_SCROLL_IMAGE]):(l.minAsinsForExpandedView=e[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][l.dimOrder][a.MIN_ASINS_FOR_EXPANDED_VIEW_TEXT],l.minAsinsForExpandedScroll=e[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][l.dimOrder][a.MIN_ASINS_FOR_EXPANDED_SCROLL_TEXT]);
l.dimType=a.TWISTER_DIMENSION_VIEW_SHELF;l.dimSubType=t[a.DIMENSION_SUB_TYPE];l.currDimCombID=l.initialTwisterState.getCurrentDimCombID();D=l.twisterControllerHandle.logger;G=l.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;l.dimensionValuesList=l.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;C=k(a.ID_SELECTOR+"shelfSwatchSection-"+l.dimName+" .twisterShelf_swatch");x=k(a.ID_SELECTOR+"shelf-label-"+l.dimName+" .twisterShelf_dimension_label span");
B=a.ID_SELECTOR+l.dimName+a.CHAR_UNDERSCORE;q=k(a.ID_SELECTOR+"shelfSwatchSection-"+l.dimName);u=l.dimValuesDisplayData.length;y=k(B+l.currDimCombID.split(a.CHAR_UNDERSCORE)[l.dimOrder]);n=k(B+l.currDimCombID.split(a.CHAR_UNDERSCORE)[l.dimOrder]);A=k(a.ID_SELECTOR+"shelfSwatchSection-"+l.dimName+" .expanderButton");b=k(a.ID_SELECTOR+"shelfSwatchSection-"+l.dimName+" .collapseButton");(function(){k(".twisterShelf_swatch").each(function(b){b=k(this);b.parent().is("a")&&b.unwrap()})})();m();l.expandedViewEnabled&&
u>=l.minAsinsForExpandedView&&r()}});z.when("A","a-popover","twister-string-constants","twister-utils").register("twister-vodd-popover",function(w,h,a,c){return function(e){function t(a,d){l.eventListener&&l.eventListener.handlePopoverEvent&&l.eventListener.handlePopoverEvent(a,d)}function r(d){t(a.EVENT_TYPE_SHOWPOPOVER,d);var c="bottom"===l.displayPosition?"vodd-modified-popover":"vodd-modified-top-popover";d.popover.$container.hasClass(c)||d.popover.$container.addClass(c);m(d.popover.$container)}
function g(d){t(a.EVENT_TYPE_HIDEPOPOVER,d);d.popover.$trigger.blur()}function f(d){m(d.popover.$container);t(a.EVENT_TYPE_UPDATEPOPOVERPOSITION,d)}function m(a){var d=v.get(0).getBoundingClientRect(),b,c;E.pageYOffset?(b=E.pageYOffset,c=E.pageXOffset):"CSS1Compat"===(document.compatMode||"")?(b=document.documentElement.scrollTop,c=document.documentElement.scrollLeft):(b=document.body.scrollTop,c=document.body.scrollLeft);b="bottom"===l.displayPosition?d.bottom+b:d.top+b-a.height();var f=d.right-
d.left,d=d.left+c;a&&a.css({top:b+"px",left:d+"px",width:f+"px"})}var d,p=w.$,v,l={name:null,trigger:null,eventListener:null,displayPosition:"bottom",positionOnTwisterContainer:!0};this.getHandle=function(){return d};e&&p.extend(l,e);if(!l.name)throw"Popover name should not be null";if(!l.trigger)throw"Popover trigger should not be null";(function(){var a="triggerBottom";"top"===l.displayPosition&&(a="triggerTop");a={closeButton:!1,closeButtonLabel:"close",position:a,name:l.name,popoverLabel:l.name,
activate:c.isTouchDevice()?"onmouseover":"onclick"};l.height&&p.extend(a,{height:l.height});d=h.create(l.trigger,a)})();(function(){w.on("a:popover:afterShow:"+l.name,r);w.on("a:popover:afterHide:"+l.name,g);w.on("a:popover:afterUpdatePosition:"+l.name,f);var a=function(){d&&d.isActive()&&m(d.$container)};w.on("a:pageUpdate",a);p(E).resize(a)})();v=l.positionOnTwisterContainer?p("#twister"):popover.trigger}});z.when("A","twister-js-init-mason-data").register("accessibility-helper",function(w,h){function a(){clearTimeout(t.timeout);
t.innerHTML="";t.timeout=setTimeout(function(){t.innerHTML=t.textString},10)}var c=w.$,e=h.isTablet,t=e?null:{};!e&&c(document).ready(function(){t=document.createElement("div");null!=t&&(t.className="twisterAccess",c(t).attr("aria-live","polite"),c(t).attr("aria-atomic","true"),document.body.appendChild(t))});return{announceText:function(c){null!=t&&(t.textString=c,setTimeout(a,0))}}});z.when("A").register("twister-expander",function(w){return function(h){function a(){"function"===typeof b.synchronousPreCollapseCallback&&
b.synchronousPreCollapseCallback();b.logger.logImpression(b.logger.eventTypes.COLLAPSE_BUTTON_CLICK,A);b.expanderSection.height();b.expanderSection.animate({height:b.minHeightForExpandedSection},{duration:b.scrollAnimationDuration,queue:!1,complete:function(){b.expanderSection.css("overflow-y","hidden");b.expanderSection.css("overflow","hidden");b.expanderHidesVariation||b.expanderButton.removeClass("aok-hidden");"function"===typeof b.synchronousPostCollapseCallback&&b.synchronousPostCollapseCallback()}});
b.expanderSection.animate({scrollTop:0},{duration:b.scrollAnimationDuration,queue:!1});g.isCollapsed=!0;b.expanderHidesVariation?e():b.collapseButton.addClass("aok-hidden");g.handleVariationSwap()}function c(){l.hasClass("aok-hidden")&&(l.removeClass("aok-hidden"),b.expanderButton.prev().insertAfter(d))}function e(){g.isCollapsed?(b.collapseButton.addClass("aok-hidden"),b.expanderHidesVariation&&v.addClass("aok-hidden"),b.expanderButton.removeClass("aok-hidden")):(b.expanderButton.addClass("aok-hidden"),
v.removeClass("aok-hidden"),b.collapseButton.removeClass("aok-hidden"))}function t(){k.bind("click",function(d){b.expanderButton[0].id==d.currentTarget.id||g.isCollapsed||a()})}var r=w.$,g=this,f,m,d,p,v,l,k=r(".expanderButton"),A,b={minHeightForExpandedSection:50,maxHeightForExpandedSection:100,maxHeightForExpandedSectionInView:null,scrollAnimationDuration:500,expanderSection:null,useExpanderScrollView:!0,minAsinsForExpandedView:null,expanderButtonReplacementIndex:null,dimValuePrefix:null,initSelectedID:null,
swatchImageSize:null,swatchImageMargin:null,expanderButton:null,collapseButton:null,expanderHidesVariation:!0,synchronousPreExpanderCallback:null,synchronousPostExpanderCallback:null,synchronousPreCollapseCallback:null,synchronousPostCollapseCallback:null,dimDisplayType:null,logger:null,dimOrder:null};g.handleExpand=function(){"function"===typeof b.synchronousPreExpanderCallback&&b.synchronousPreExpanderCallback();b.logger.logImpression(b.logger.eventTypes.EXPAND_BUTTON_CLICK,A);var a=b.expanderSection.height();
g.isCollapsed=!1;g.handleVariationSwap();b.expanderHidesVariation?e():b.expanderButton.addClass("aok-hidden");if(b.useExpanderScrollView)b.expanderSection.height(a).animate({height:b.maxHeightForExpandedSection},{duration:b.scrollAnimationDuration,queue:!1,complete:function(){b.expanderSection.css("overflow-y","auto");g.scrollVariationIntoView();b.expanderHidesVariation||b.collapseButton.removeClass("aok-hidden");"function"===typeof b.synchronousPostExpanderCallback&&b.synchronousPostExpanderCallback()}});
else{var d=b.expanderSection.css("height","auto").height();b.expanderSection.height(a).animate({height:d},{duration:b.scrollAnimationDuration,queue:!1,complete:function(){b.expanderHidesVariation||b.collapseButton.removeClass("aok-hidden");"function"===typeof b.synchronousPostExpanderCallback&&b.synchronousPostExpanderCallback()}})}};g.handleVariationSwap=function(a){g.isCollapsed&&f>=p?(a&&c(),f==p&&b.expanderHidesVariation?(v.removeClass("aok-hidden"),d=l):d=f==p+1&&b.expanderHidesVariation?b.expanderButton:
b.expanderHidesVariation?r(b.dimValuePrefix+(f-1)):f==p?b.expanderButton:r(b.dimValuePrefix+(f-1)),m.insertBefore(b.expanderButton),l.addClass("aok-hidden")):g.isCollapsed||c()};g.scrollVariationIntoView=function(){var a=m.offset().top,d=b.expanderSection.offset().top,c=b.expanderSection.scrollTop(),a=a-d,c=c+a;0>a?b.expanderSection.animate({scrollTop:c},{duration:b.scrollAnimationDuration,queue:!1}):a>b.maxHeightForExpandedSectionInView&&(c-=b.swatchImageSize+b.swatchImageMargin,b.expanderSection.animate({scrollTop:c},
{duration:b.scrollAnimationDuration,queue:!1}))};g.updateSelectedVariation=function(a,d){null!=d&&(m=d);null!=a&&(f=a.split("_")[b.dimOrder])};(function(){h&&r.extend(b,h);if(!b.collapseButton)throw"Expander collapseButton should not be null";if(!b.expanderButton)throw"Expander expanderButton should not be null";if(!b.expanderSection)throw"Expander expanderSection should not be null";if(!b.initSelectedID)throw"Expander initSelectedID should not be null";if(!b.minAsinsForExpandedView)throw"Expander minAsinsForExpandedView should not be null";
if(!b.dimValuePrefix)throw"Expander dimValuePrefix should not be null";if(!b.swatchImageSize)throw"Expander swatchImageSize should not be null";if(!b.swatchImageMargin)throw"Expander swatchImageMargin should not be null";if(!b.expanderButtonReplacementIndex)throw"Expander expanderButtonReplacementIndex should not be null";if(!b.dimDisplayType)throw"Expander dimDisplayType should not be null";if(!b.logger)throw"Expander Logger should not be null";b.dimOrder||(b.dimOrder=0);A={dimDisplayType:b.dimDisplayType};
b.logger.logImpression(b.logger.eventTypes.EXPANDER,A);p=b.expanderButtonReplacementIndex;v=r(b.dimValuePrefix+p);l=r(b.dimValuePrefix+(p-1));f=b.initSelectedID.split("_")[b.dimOrder];m=r(b.dimValuePrefix+b.initSelectedID.split("_")[b.dimOrder]);g.isCollapsed=!0;b.expanderButton.click(function(){g.handleExpand()});b.collapseButton.click(function(){a()});t();g.handleVariationSwap()})()}});z.when("A","twisterModule").register("twister-view-registry",function(w,h){var a=w.createClass({init:function(a,
c){this.twisterControllerHandle=a;this.externalViewName=c;this.dimensions=a.twisterJSInitData.dimensions;this.dimensionToAsinMap=a.twisterJSInitData.dimToAsinMapData;this.dimensionValues=a.twisterJSInitData.dimensionValuesData;this.dimensionAsinToValuesMap=a.twisterJSInitData.dimensionValuesDisplayData;this.getControllerInterface=function(){function c(a,f,e){return{dimIndex:a,dimValueIndex:f,dimDisplayType:e}}return{handleClick:function(g,f,m){g=c(g,f,m);a.handleExternalViewClick(g,this.externalViewName)},
handleMouseOver:function(g,f,m){g=c(g,f,m);a.handleExternalViewMouseOver(g,this.externalViewName)},handleMouseOut:function(g,f,m){g=c(f);a.handleExternalViewMouseOut(g,g.dimIndex,g.dimValueIndex,this.externalViewName)}}}},updateView:function(a,c,r){},updateViewAfterTwisterUpdate:function(a,c,r){}}),c=E.twisterController;this.createAndRegisterExternalView=function(e){var t=new a(c,e);c.registerExternalView(t,e);return t};return this})})})(function(){var z=window.AmazonUIPageJS||window.P,E=z._namespace||
z.attributeErrors;return E?E("DetailPageTwisterAssets"):z}(),window);